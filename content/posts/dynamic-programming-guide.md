---
title: "动态规划完全攻略：从入门到精通"
date: 2024-02-27T22:05:43+08:00
draft: false
tags: ["算法", "动态规划", "DP", "LeetCode", "编程技巧"]
categories: ["算法学习"]
description: "动态规划系统训练方案，从核心思维到高频题型再到实战技巧的全面覆盖，包含完整的学习路线和避坑指南"
cover:
    image: ""
    alt: "动态规划学习指南"
    caption: "动态规划完全攻略"
---

> 今天开始！DP！针对动态规划（DP）的系统训练，这是一套完整的训练方案，从**核心思维**到**高频题型**再到**实战技巧**全面覆盖。

## 一、动态规划核心思维训练

### 1. 破除两大误区

- ❌ **误区1**：必须找到最优子结构才能用DP  
  ✅ **正确姿势**：先暴力递归 → 发现重叠子问题 → 改记忆化搜索 → 再推导DP方程  

- ❌ **误区2**：DP必须用数组存储状态  
  ✅ **正确姿势**：学会状态压缩（如打家劫舍用两个变量代替数组）

### 2. 四步解题法（用爬楼梯问题实践）

```python
# 原题：每次爬1或2阶，到n阶有多少种方法？
# 1. 定义状态：dp[i]表示到i阶的方法数
# 2. 初始状态：dp[0]=1, dp[1]=1（注意不是常规的dp[0]=0）
# 3. 状态转移：dp[i] = dp[i-1] + dp[i-2]
# 4. 优化空间：只需prev和curr两个变量滚动计算
def climbStairs(n):
    if n <= 1: return 1
    prev, curr = 1, 1
    for i in range(2, n+1):
        prev, curr = curr, prev + curr
    return curr
```

### 3. 高频状态转移类型

| 类型 | 经典例题 | 状态转移关键点 |
|------|----------|----------------|
| 单序列线性DP | 打家劫舍(198) | `dp[i] = max(dp[i-1], dp[i-2]+nums[i])` |
| 双序列匹配DP | 最长公共子序列(1143) | `dp[i][j] = 1+dp[i-1][j-1] if s[i]==t[j]` |
| 区间DP | 最长回文子串(5) | `dp[i][j] = (s[i]==s[j]) and dp[i+1][j-1]` |
| 背包DP | 分割等和子集(416) | `dp[j] = dp[j] or dp[j-num]` |
| 状态机DP | 买卖股票最佳时机(121/122) | 持有/未持有两种状态转换 |

## 二、阶梯式训练路线

### 阶段1：基础模型搭建（1-2周）

| 题目 | 训练重点 | 突破技巧 |
|------|----------|----------|
| 70. 爬楼梯 | 斐波那契型DP | 空间压缩到O(1) |
| 118. 杨辉三角 | 二维DP填表逻辑 | 观察行列关系 |
| 121. 买卖股票的最佳时机 | 状态机模型 | 维护min_price和max_profit |
| 53. 最大子数组和 | 决策型DP（选或不选） | 用curr_max代替dp数组 |
| 746. 使用最小花费爬楼梯 | 路径成本计算 | 逆向推导更简单 |

### 阶段2：经典题型突破（2-3周）

| 题目 | 难点解析 | 代码模板片段 |
|------|----------|--------------|
| **198. 打家劫舍** | 相邻不能选 | `max(dp[i-1], dp[i-2]+nums[i])` |
| **322. 零钱兑换** | 完全背包最小值 | `dp[amt] = min(dp[amt], dp[amt-coin]+1)` |
| **300. 最长递增子序列** | O(n²)与O(nlogn)两种解法 | 二分查找维护tails数组 |
| **1143. 最长公共子序列** | 双序列匹配 | `if s[i]==t[j]: dp[i][j]=dp[i-1][j-1]+1` |
| **139. 单词拆分** | 字符串分段判断 | `dp[i] = any(dp[j] and s[j:i] in dict)` |

### 阶段3：高难度挑战（3-4周）

| 题目 | 破题关键点 | 优化技巧 |
|------|------------|----------|
| **72. 编辑距离** | 三种操作的状态转移 | 空间压缩到一维数组 |
| **152. 乘积最大子数组** | 处理负数乘积 | 同时维护max和min |
| **312. 戳气球** | 区间DP逆向思维 | 从最后戳破的气球倒推 |
| **10. 正则表达式匹配** | 星号匹配的特殊处理 | 分情况讨论pattern的第二个字符 |
| **887. 鸡蛋掉落** | 决策最优化的数学推导 | 逆向思维+二分查找优化 |

## 三、避坑指南与实战技巧

### 1. 五大常见错误类型

- 🚫 **初始化错误**：比如背包问题中dp[0]应该初始化为True
- 🚫 **遍历顺序错误**：完全背包要正序循环，01背包要倒序循环
- 🚫 **状态转移遗漏**：如编辑距离忘记考虑replace操作
- 🚫 **二维DP行列混淆**：把s的长度当作行还是列要统一
- 🚫 **空间压缩陷阱**：覆盖未使用的旧值导致错误

### 2. 三步优化方法论

```markdown
1. **暴力递归** → 写出基本状态转移
   - 斐波那契数列递归版
   
2. **记忆化搜索** → 添加缓存（@lru_cache）
   - 用装饰器自动缓存参数
   
3. **推导DP方程** → 优化空间复杂度
   - 观察状态依赖关系，压缩维度
```

### 3. 面试应答技巧

- 💡 先说出暴力解的时间复杂度
- 💡 明确说出DP数组的定义和维度
- 💡 在白板上先写状态转移方程再编码
- 💡 主动讨论空间优化可能性

## 四、配套训练资源

### 1. 可视化学习

- **DPV 算法可视化网站** - 动态展示DP执行过程
- **VisuAlgo 动态规划专题** - 包含LCS、背包等问题动画

### 2. 专项题单

- **LeetCode动态规划分类** → 按通过率排序练习
- **经典DP问题Top 50** → 涵盖所有DP类型

### 3. 错题本模板

```markdown
## 72. 编辑距离
### 错误记录
- 初始版本忘记处理空字符串情况
- 误将替换操作的成本计算为2（正确是1）

### 状态转移表
|       | "" | r | o | s |
|-------|----|---|---|---|
| ""    | 0 | 1 | 2 | 3 |
| h     | 1 | 1 | 2 | 3 | 
| o     | 2 | 2 | 1 | 2 |
| r     | 3 | 2 | 2 | 2 |
| s     | 4 | 3 | 3 | 2 |
```

## 五、训练计划建议

### 每日任务

- **上午**：精做1道新DP题（按阶段选择难度）
- **下午**：复习2道旧题，写出空间优化版本
- **晚上**：观看对应题目的讲解视频

### 每周检验

- 周赛至少完成2道DP相关题目
- 整理本周的DP类型思维导图

## 预期效果

坚持按照这个方案训练**2个月**后，你会明显发现：

1. ✅ 中等DP题能在15分钟内找到思路
2. ✅ 能轻松应对字符串匹配、背包类问题
3. ✅ 面对hard题时有清晰的拆解策略

## 总结

> 动态规划的本质是用空间换时间，核心是找到**重叠子问题**和**最优子结构**。多动手画状态转移表，你的大脑会逐渐建立DP的思维模式。

记住：**Practice makes perfect!** 动态规划需要大量的练习来培养直觉，但一旦掌握，它将成为你算法工具箱中最强大的武器之一。

---

*持续更新中，欢迎交流讨论！*