+++
date = '2025-08-08T05:50:23+08:00'
draft = true
title = 'E-R模型'
tags = ['数据库']
categories = ['数据库']

+++
# E-R模型与数据表间的关联关系
## E-R模型
### ORM
ORM（Object-Relational Mapping，对象关系映射）的概念：

表 (Table) ↔ 类 (Class)：数据库中的一个表可以映射到编程语言中的一个类。
行/记录 (Row/Record) ↔ 对象/实体 (Object/Entity)：表中的一条数据记录可以映射到类的一个对象或实体。
列/字段 (Column/Field) ↔ 字段/属性 (Field/Attribute)：表中的一个列可以映射到类的一个字段（在编程语言中常被称为“属性”）。
ORM的思想使得开发者能够通过操作对象的方式来操作数据库，大大简化了数据库编程的复杂性。
## 数据表间的关联关系
### 1. 一对一（One-to-One）
表A中的一条记录对应表B中的一条记录，反之亦然。

示例：学生表与学生档案信息表。

特点：在实际开发中，一对一关系通常较少独立存在，因为它们完全可以合并到一张表中。
优化考量：当一张表的字段过多（如20、30个甚至更多），且某些字段不常用时，可以将其拆分为两张一对一关联的表。这样做的好处是，查询常用字段时可以避免加载冗余数据，从而减少内存占用和I/O次数，提高查询效率。
### 2. 一对多（One-to-Many）
表A中的一条记录可以对应表B中的多条记录，但表B中的一条记录只能对应表A中的一条记录。

示例：

客户表与订单表：一个客户可以有多个订单。
部门表与员工表：一个部门可以有多个员工。
省份表与城市表：一个省份可以有多个城市。
在一对多关系中，通常存在“主表”（One方）和“从表”（Many方）。例如，部门表是主表，员工表是从表。

### 3. 多对多（Many-to-Many）
表A中的多条记录可以对应表B中的多条记录，反之亦然。表示多对多关系通常需要引入第三个表，称为“连接表”或“中间表”。

示例：

学生表与课程表：一个学生可以选多门课程，一门课程可以被多个学生选择。这时，需要一个“选课信息表”作为连接表。
产品表与订单表：一个产品可以出现在多个订单中，一个订单可以包含多个产品。这时，需要一个“订单详情表”作为连接表。
用户与角色：一个用户可以拥有多个角色，一个角色可以赋给多个用户。
连接表实际上是拆分了两个一对多关系，从而实现了多对多的逻辑关联。

4. 自我引用（Self-Referencing）
表中的记录引用同一表中的其他记录。

示例：员工表中的员工与主管关系。

每个员工可能有一个主管，而这个主管本身也是员工表中的一条记录。这种情况下，员工表中的“主管ID”字段会引用同一表中的“员工ID”字段。