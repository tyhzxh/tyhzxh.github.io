<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.148.2"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>tyhzxhçš„ä¸ªäººåšå®¢</title><meta name=description content="åˆ†äº«æŠ€æœ¯ã€æ€è€ƒä¸ç”Ÿæ´»çš„ä¸ªäººåšå®¢"><meta name=author content="tyhzxh"><link rel=canonical href=https://tyhzxh.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.8ee78296343cf29844826f6d943ca1b6638fc5059dcdf673ace996a7617f1b69.css integrity="sha256-jueCljQ88phEgm9tlDyhtmOPxQWdzfZzrOmWp2F/G2k=" rel="preload stylesheet" as=style><link rel=icon href=https://tyhzxh.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tyhzxh.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tyhzxh.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tyhzxh.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tyhzxh.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://tyhzxh.github.io/index.xml><link rel=alternate type=application/json href=https://tyhzxh.github.io/index.json><link rel=alternate hreflang=en href=https://tyhzxh.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>.archive-summary{margin-bottom:2rem;padding:1rem;background:var(--theme);border-radius:8px;border:1px solid var(--border);text-align:center;color:var(--secondary);font-size:.9rem}.pagination{display:flex;justify-content:center;align-items:center;gap:1rem;margin:3rem 0;padding:2rem 0;border-top:1px solid var(--border)}.pagination-prev,.pagination-next{padding:.75rem 1.5rem;background:var(--theme);border:1px solid var(--border);border-radius:6px;text-decoration:none;color:var(--primary);font-weight:500;transition:all .3s ease}.pagination-prev:hover,.pagination-next:hover{background:var(--secondary);color:var(--theme);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.pagination-numbers{display:flex;gap:.5rem;align-items:center}.pagination-number,.pagination-current{display:inline-flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;border-radius:50%;text-decoration:none;font-weight:500;transition:all .3s ease}.pagination-number{background:var(--theme);border:1px solid var(--border);color:var(--primary)}.pagination-number:hover{background:var(--secondary);color:var(--theme);transform:scale(1.1)}.pagination-current{background:var(--secondary);color:var(--theme);border:1px solid var(--secondary);font-weight:600}@media(max-width:768px){.pagination{flex-direction:column;gap:1rem}.pagination-prev,.pagination-next{width:100%;text-align:center}.pagination-numbers{order:-1}.archive-summary{font-size:.8rem;padding:.75rem}}[data-theme=dark] .archive-summary{background:var(--code-bg)}[data-theme=dark] .pagination-prev,[data-theme=dark] .pagination-next,[data-theme=dark] .pagination-number{background:var(--code-bg);border-color:var(--border)}[data-theme=dark] .pagination-prev:hover,[data-theme=dark] .pagination-next:hover,[data-theme=dark] .pagination-number:hover{background:var(--hljs-bg)}</style><meta property="og:url" content="https://tyhzxh.github.io/"><meta property="og:site_name" content="tyhzxhçš„ä¸ªäººåšå®¢"><meta property="og:title" content="tyhzxhçš„ä¸ªäººåšå®¢"><meta property="og:description" content="åˆ†äº«æŠ€æœ¯ã€æ€è€ƒä¸ç”Ÿæ´»çš„ä¸ªäººåšå®¢"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="tyhzxhçš„ä¸ªäººåšå®¢"><meta name=twitter:description content="åˆ†äº«æŠ€æœ¯ã€æ€è€ƒä¸ç”Ÿæ´»çš„ä¸ªäººåšå®¢"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"tyhzxhçš„ä¸ªäººåšå®¢","url":"https://tyhzxh.github.io/","description":"åˆ†äº«æŠ€æœ¯ã€æ€è€ƒä¸ç”Ÿæ´»çš„ä¸ªäººåšå®¢","logo":"https://tyhzxh.github.io/favicon.ico","sameAs":["https://github.com/tyhzxh","mailto:your-email@example.com"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tyhzxh.github.io/ accesskey=h title="tyhzxhçš„ä¸ªäººåšå®¢ (Alt + H)">tyhzxhçš„ä¸ªäººåšå®¢</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tyhzxh.github.io/ title=é¦–é¡µ><span class=active>é¦–é¡µ</span></a></li><li><a href=https://tyhzxh.github.io/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://tyhzxh.github.io/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://tyhzxh.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://tyhzxh.github.io/search/ title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li><li><a href=https://tyhzxh.github.io/about/ title=å…³äº><span>å…³äº</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ ğŸ‘‹</h1></header><div class=entry-content><div style=text-align:center;margin-bottom:20px><img src=/images/avatar.svg alt=tyhzxh class=profile-image width=120 height=120></div><pre><code>è¿™é‡Œæ˜¯æˆ‘åˆ†äº«æŠ€æœ¯æ–‡ç« ã€å­¦ä¹ ç¬”è®°å’Œç”Ÿæ´»æ„Ÿæ‚Ÿçš„åœ°æ–¹ã€‚

ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š
- ğŸ’» ç¼–ç¨‹æŠ€æœ¯ä¸å¼€å‘ç»éªŒ
- ğŸ“š å­¦ä¹ ç¬”è®°ä¸çŸ¥è¯†æ€»ç»“  
- ğŸ¤” æ€è€ƒä¸æ„Ÿæ‚Ÿ
- ğŸ“¸ ç”Ÿæ´»è®°å½•

å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼
</code></pre></div><footer class=entry-footer><div class=social-icons><a href=https://github.com/tyhzxh target=_blank rel="noopener noreferrer me" title=Github><svg class="social-icon"><use href="#github"/></svg>
</a><a href=mailto:your-email@example.com target=_blank rel="noopener noreferrer me" title=Email><svg class="social-icon"><use href="#email"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2>Hugoåšå®¢ç½‘ç«™æ—¥å¸¸ç»´æŠ¤æŒ‡å—</h2></header><div class=entry-meta><span title='2025-02-23 02:39:29 +0800 CST'>February 23, 2025</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>å‰è¨€ æœ¬æ–‡ä»‹ç»ä½¿ç”¨Hugoé™æ€ç½‘ç«™ç”Ÿæˆå™¨æ­å»ºçš„åšå®¢ç½‘ç«™çš„æ—¥å¸¸ç»´æŠ¤æµç¨‹ã€‚Hugoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç°ä»£çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œç»“åˆGitHub Pageså¯ä»¥è½»æ¾æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ã€‚
Hugoåšå®¢å‘å¸ƒæµç¨‹ å®Œæ•´å·¥ä½œæµç¨‹ graph TD A[åˆ›å»ºMarkdownæ–‡æ¡£] --> B[ç¼–å†™åšå®¢å†…å®¹] B --> C[ç”Ÿæˆé™æ€ç½‘ç«™] C --> D[æäº¤åˆ°GitHub] D --> E[ç½‘ç«™è‡ªåŠ¨æ›´æ–°] è¯¦ç»†æ“ä½œæ­¥éª¤ 1. åˆ›å»ºåšå®¢æ–‡ç«  åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ–°çš„åšå®¢æ–‡ç« ï¼š
hugo new posts/article-name.md å‘½ä»¤è¯´æ˜ï¼š
hugo newï¼šHugoçš„å†…å®¹åˆ›å»ºå‘½ä»¤ posts/ï¼šæ–‡ç« å­˜æ”¾çš„ç›®å½• article-name.mdï¼šæ–‡ç« æ–‡ä»¶åï¼ˆå»ºè®®ä½¿ç”¨è‹±æ–‡å’Œè¿å­—ç¬¦ï¼‰ ç¤ºä¾‹ï¼š
# åˆ›å»ºæŠ€æœ¯æ–‡ç«  hugo new posts/react-hooks-guide.md # åˆ›å»ºç”Ÿæ´»éšç¬” hugo new posts/my-reading-notes.md # åˆ›å»ºé¡¹ç›®ä»‹ç» hugo new posts/project-showcase.md 2. ç¼–å†™æ–‡ç« å†…å®¹ åˆ›å»ºçš„Markdownæ–‡ä»¶ä¼šåŒ…å«åŸºæœ¬çš„å‰ç½®å…ƒæ•°æ®ï¼ˆFront Matterï¼‰ï¼š
--- title: "æ–‡ç« æ ‡é¢˜" date: 2025-02-23T02:39:29+08:00 draft: true --- å®Œå–„æ–‡ç« å…ƒæ•°æ®ï¼š
--- title: "React Hookså®Œå…¨æŒ‡å—" date: 2025-02-23T10:00:00+08:00 draft: false tags: ["React", "JavaScript", "å‰ç«¯å¼€å‘"] categories: ["æŠ€æœ¯æ•™ç¨‹"] description: "æ·±å…¥ç†è§£React Hooksçš„ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µ" cover: image: "/images/react-hooks.jpg" alt: "React Hooks" caption: "React Hooksè®©å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§" --- # æ–‡ç« å†…å®¹å¼€å§‹... é‡è¦å­—æ®µè¯´æ˜ï¼š
...</p></div><footer class=entry-footer><span title='2025-02-23 02:39:29 +0800 CST'>February 23, 2025</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Hugoåšå®¢ç½‘ç«™æ—¥å¸¸ç»´æŠ¤æŒ‡å—" href=https://tyhzxh.github.io/posts/hugo-blog-workflow/></a></article><article class=post-entry><header class=entry-header><h2>åŒæŒ‡é’ˆç®—æ³•è¯¦è§£</h2></header><div class=entry-meta><span title='2024-10-24 19:52:26 +0800 CST'>October 24, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>ä»‹ç» åŒæŒ‡é’ˆæ˜¯ä¸€ç§å¸¸ç”¨çš„ç®—æ³•æŠ€å·§ï¼Œé€šè¿‡ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆæ¥éå†æ•°æ®ç»“æ„ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘æ—¶é—´å¤æ‚åº¦ï¼Œä»O(nÂ²)é™ä½åˆ°O(n)ã€‚åŒæŒ‡é’ˆçš„ç±»å‹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š
1. å¯¹æ’æŒ‡é’ˆï¼ˆTwo Pointers from Two Sidesï¼‰ ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»æ•°ç»„æˆ–é“¾è¡¨çš„ä¸¤ç«¯å¼€å§‹ï¼Œå‘ä¸­é—´ç§»åŠ¨ï¼Œç›´åˆ°ç›¸é‡æˆ–è€…æ»¡è¶³æŸä¸ªæ¡ä»¶ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæœ‰åºæ•°ç»„æˆ–é“¾è¡¨ï¼Œå¯ä»¥ç”¨äºæŸ¥æ‰¾å’Œé—®é¢˜ã€ä¹˜ç§¯å’Œé—®é¢˜ç­‰ã€‚
2. å¿«æ…¢æŒ‡é’ˆï¼ˆFast and Slow Pointersï¼‰ ä¸¤ä¸ªæŒ‡é’ˆä»åŒä¸€ä½ç½®å¼€å§‹ï¼Œä¸€ä¸ªæŒ‡é’ˆï¼ˆå¿«æŒ‡é’ˆï¼‰ç§»åŠ¨çš„é€Ÿåº¦æ˜¯å¦ä¸€ä¸ªæŒ‡é’ˆï¼ˆæ…¢æŒ‡é’ˆï¼‰çš„ä¸¤å€ã€‚è¿™ç§æ–¹æ³•å¸¸ç”¨äºé“¾è¡¨é—®é¢˜ï¼Œæ¯”å¦‚åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼Œæˆ–è€…æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ã€‚
3. å·¦å³æŒ‡é’ˆï¼ˆLeft and Right Pointersï¼‰ ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»æ•°ç»„çš„ä¸¤ç«¯å¼€å§‹ï¼Œå‘ä¸­é—´ç§»åŠ¨ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæœ‰åºæ•°ç»„ï¼Œå¯ä»¥ç”¨äºæŸ¥æ‰¾ç‰¹å®šå…ƒç´ æˆ–è€…è§£å†³ä¸‰æ•°ä¹‹å’Œé—®é¢˜ã€‚
4. æ— åºæŒ‡é’ˆ å¦‚æœä¸¤ä¸ªæŒ‡é’ˆæ²¡æœ‰ä»»ä½•è¯­ä¹‰å’Œé€»è¾‘é¡ºåºï¼Œåªæ˜¯ç”¨äºæŒ‡å‘ä¸åŒçš„åœ°å€ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç®€å•å‘½åã€‚ä¾‹å¦‚ï¼Œåœ¨åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„é—®é¢˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ— åºæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘é“¾è¡¨1å’Œé“¾è¡¨2ã€‚
åº”ç”¨åœºæ™¯ åŒæŒ‡é’ˆç®—æ³•çš„å…³é”®åœ¨äºå¦‚ä½•ç§»åŠ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆã€‚åŒæŒ‡é’ˆæŠ€å·§é€šå¸¸ç”¨äºè§£å†³æ¶‰åŠæ•°ç»„æˆ–é“¾è¡¨çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»¥çº¿æ€§æ—¶é—´å¤æ‚åº¦è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯ä½¿ç”¨åµŒå¥—å¾ªç¯å¯¼è‡´çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚
å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š æ»‘åŠ¨çª—å£é—®é¢˜ï¼šå½“éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå­æ•°ç»„æˆ–å­ä¸²ï¼Œä½¿å¾—å®ƒæ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼ˆå¦‚æœ€å¤§å’Œã€æœ€å°å’Œã€åŒ…å«ç‰¹å®šå…ƒç´ ç­‰ï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆæ¥ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ã€‚
æœ‰åºæ•°ç»„ä¸­çš„æŸ¥æ‰¾é—®é¢˜ï¼šå¦‚æœæœ‰ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œéœ€è¦æ‰¾åˆ°ä¸¤ä¸ªæ•°ç»„çš„ç¬¬kå°çš„æ•°ï¼Œæˆ–è€…åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ•°ç»„çš„å­é›†ï¼Œå¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆã€‚
é“¾è¡¨é—®é¢˜ï¼šåœ¨é“¾è¡¨ä¸­æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ã€åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ç­‰é—®é¢˜ï¼Œé€šå¸¸ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆã€‚
æ•°ç»„ä¸­çš„æˆå¯¹é—®é¢˜ï¼šéœ€è¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•°ï¼Œå®ƒä»¬çš„å’Œä¸ºç‰¹å®šå€¼ï¼ˆå¦‚"ä¸¤æ•°ä¹‹å’Œ"é—®é¢˜ï¼‰ï¼Œæˆ–è€…éœ€è¦æ‰¾åˆ°ä¸¤ä¸ªæ•°ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¸ºç‰¹å®šå€¼ã€‚
å¾ªç¯æ•°ç»„é—®é¢˜ï¼šå½“æ•°ç»„æ˜¯å¾ªç¯çš„ï¼Œéœ€è¦æ‰¾åˆ°é‡å¤çš„å…ƒç´ æˆ–è€…æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ å¯¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆã€‚
æ•°ç»„ä¸­çš„è¿ç»­å­æ•°ç»„é—®é¢˜ï¼šéœ€è¦æ‰¾åˆ°è¿ç»­çš„å­æ•°ç»„ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œæ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼Œæˆ–è€…æ‰¾åˆ°æœ€é•¿çš„è¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—å®ƒä»¬æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚
ç®—æ³•ä¼˜åŠ¿ åŒæŒ‡é’ˆæŠ€å·§åœ¨è§£å†³ç‰¹å®šé—®é¢˜æ—¶å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š
1. æ—¶é—´å¤æ‚åº¦ä¼˜åŒ– åŒæŒ‡é’ˆå¯ä»¥å‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æœ‰åºæ•°ç»„æˆ–é“¾è¡¨æ—¶ï¼Œå¯ä»¥é¿å…ä½¿ç”¨åµŒå¥—å¾ªç¯å¯¼è‡´çš„äºŒæ¬¡æ–¹æ—¶é—´å¤æ‚åº¦ï¼Œé€šå¸¸å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°çº¿æ€§æ—¶é—´å¤æ‚åº¦O(n)ã€‚
2. ç©ºé—´å¤æ‚åº¦ä¼˜åŒ– åŒæŒ‡é’ˆé€šå¸¸åªéœ€è¦å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´ï¼Œè¿™æ¯”ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„ï¼ˆå¦‚å“ˆå¸Œè¡¨ï¼‰è¦èŠ‚çœç©ºé—´ã€‚
3. ç®€åŒ–é—®é¢˜ åŒæŒ‡é’ˆå¯ä»¥å°†å¤æ‚é—®é¢˜ç®€åŒ–ä¸ºæ›´ç®€å•çš„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨æ»‘åŠ¨çª—å£é—®é¢˜ä¸­ï¼ŒåŒæŒ‡é’ˆå¯ä»¥åŠ¨æ€åœ°ç»´æŠ¤ä¸€ä¸ªçª—å£ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—çª—å£å†…çš„å…ƒç´ ã€‚
4. çµæ´»æ€§å’Œé€‚åº”æ€§ åŒæŒ‡é’ˆæŠ€å·§éå¸¸çµæ´»ï¼Œå¯ä»¥æ ¹æ®é—®é¢˜çš„ä¸åŒéœ€æ±‚è°ƒæ•´æŒ‡é’ˆçš„ç§»åŠ¨ç­–ç•¥ï¼Œå¦‚å¯ä»¥åŒæ—¶å‘ä¸­é—´ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªå‘å‰ç§»åŠ¨è€Œå¦ä¸€ä¸ªå‘åç§»åŠ¨ã€‚
æ»‘åŠ¨çª—å£ æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰æ˜¯ä¸€ç§åœ¨æ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸Šè¿›è¡Œæ“ä½œçš„ç®—æ³•ç­–ç•¥ï¼Œä¸»è¦ç”¨äºè§£å†³éœ€è¦åœ¨è¿ç»­å­æ•°ç»„æˆ–å­å­—ç¬¦ä¸²ä¸Šæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„é—®é¢˜ã€‚
ä¸ºä»€ä¹ˆå«æ»‘åŠ¨çª—å£ï¼Ÿ â€œæ»‘åŠ¨çª—å£"è¿™ä¸ªåå­—çš„ç”±æ¥æ˜¯å› ä¸ºè¿™ç§ç®—æ³•çš„æ“ä½œæ–¹å¼ç±»ä¼¼äºä¸€ä¸ªå¯ä»¥æ²¿ç€æ•°ç»„æˆ–å­—ç¬¦ä¸²æ»‘åŠ¨çš„çª—å£ã€‚çª—å£å¯ä»¥æ‰©å¤§æˆ–ç¼©å°ï¼Œä»¥åŒ…å«ä¸åŒçš„å…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æˆ–å­å­—ç¬¦ä¸²ã€‚
æ»‘åŠ¨çª—å£çš„ç‰¹ç‚¹ï¼š è¿ç»­æ€§ï¼šçª—å£å†…çš„å…ƒç´ æ˜¯è¿ç»­çš„ï¼Œä¸éœ€è¦æ˜¯æ•´ä¸ªæ•°ç»„æˆ–å­—ç¬¦ä¸²çš„å­é›†ã€‚ åŠ¨æ€æ€§ï¼šçª—å£çš„å¤§å°å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´ï¼Œçª—å£çš„è¾¹ç•Œå¯ä»¥å‘å‰æˆ–å‘åç§»åŠ¨ã€‚ å®æ—¶æ€§ï¼šçª—å£å¯ä»¥å®æ—¶åœ°æ£€æŸ¥å½“å‰çª—å£å†…çš„æ•°æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚ æ»‘åŠ¨çª—å£çš„å®ç°ï¼š æ»‘åŠ¨çª—å£é€šå¸¸ä½¿ç”¨åŒæŒ‡é’ˆï¼ˆæˆ–ç´¢å¼•ï¼‰æ¥å®ç°ï¼Œä¸€ä¸ªæŒ‡é’ˆè¡¨ç¤ºçª—å£çš„å¼€å§‹ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆè¡¨ç¤ºçª—å£çš„ç»“æŸã€‚é€šè¿‡ç§»åŠ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥åŠ¨æ€åœ°è°ƒæ•´çª—å£çš„å¤§å°å’Œä½ç½®ã€‚
æ‰©å±•çª—å£ï¼šé€šå¸¸é€šè¿‡ç§»åŠ¨ç»“æŸæŒ‡é’ˆï¼ˆå³æŒ‡é’ˆï¼‰å‘å³æ¥å®ç°ï¼Œè¿™æ ·å¯ä»¥åŒ…å«æ›´å¤šçš„å…ƒç´ ã€‚ æ”¶ç¼©çª—å£ï¼šé€šå¸¸é€šè¿‡ç§»åŠ¨å¼€å§‹æŒ‡é’ˆï¼ˆå·¦æŒ‡é’ˆï¼‰å‘å³æ¥å®ç°ï¼Œè¿™æ ·å¯ä»¥æ’é™¤çª—å£ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ ç»å…¸ç®—æ³•å®ç° 1. å¯¹æ’æŒ‡é’ˆç¤ºä¾‹ é—®é¢˜æè¿°ï¼šæ‰¾å‡ºæ•°ç»„ä¸­ä¹˜ç§¯å°äºKçš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§é•¿åº¦ã€‚
def maxProductSubarray(nums, k): left, right = 0, 0 max_length = 0 product = 1 while right &lt; len(nums): product *= nums[right] while left &lt;= right and product >= k: product /= nums[left] left += 1 max_length = max(max_length, right - left + 1) right += 1 return max_length 2. å¿«æ…¢æŒ‡é’ˆç¤ºä¾‹ é—®é¢˜æè¿°ï¼šåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼Œå¹¶è¿”å›ç¯çš„å…¥å£èŠ‚ç‚¹ã€‚
...</p></div><footer class=entry-footer><span title='2024-10-24 19:52:26 +0800 CST'>October 24, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to åŒæŒ‡é’ˆç®—æ³•è¯¦è§£" href=https://tyhzxh.github.io/posts/two-pointers-algorithm/></a></article><article class=post-entry><header class=entry-header><h2>LevelDBæºç é˜…è¯»æŒ‡å—</h2></header><div class=entry-meta><span title='2024-10-12 10:00:00 +0800 CST'>October 12, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>å‰è¨€ é˜…è¯»LevelDBæºç æ˜¯ä¸€é¡¹å¾ˆå¥½çš„å­¦ä¹ æœºä¼šï¼Œå› ä¸ºå®ƒçš„ä»£ç è´¨é‡é«˜ã€è®¾è®¡ç®€æ´è€Œé«˜æ•ˆã€‚LevelDBæ˜¯Googleå¼€å‘çš„ä¸€ä¸ªé«˜æ€§èƒ½é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼Œé‡‡ç”¨LSM Treeæ•°æ®ç»“æ„ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§å­˜å‚¨ç³»ç»Ÿä¸­ã€‚
åŸºæœ¬æ¦‚å¿µ åœ¨é˜…è¯»æºç ä¹‹å‰ï¼Œç¡®ä¿ä½ ç†Ÿæ‚‰LevelDBçš„åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­ï¼š
æ ¸å¿ƒæ¦‚å¿µ SSTableï¼ˆSorted String Tableï¼‰ï¼šä¸å¯å˜çš„ã€æ’åºçš„é”®å€¼å­˜å‚¨æ–‡ä»¶ï¼Œæ˜¯LevelDBæŒä¹…åŒ–æ•°æ®çš„åŸºæœ¬å•ä½ LSM Treeï¼ˆLog-Structured Merge Treeï¼‰ï¼šä¸€ç§æ•°æ®ç»“æ„ï¼ŒLevelDBä½¿ç”¨å®ƒæ¥ç®¡ç†å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„æ•°æ® MemTableå’ŒImmutable MemTableï¼šå†…å­˜ä¸­å­˜å‚¨çš„æ•°æ®ç»“æ„ï¼Œæ•°æ®é¦–å…ˆå†™å…¥MemTableï¼Œç„¶ååœ¨å…¶è¾¾åˆ°ä¸€å®šå¤§å°æ—¶ï¼Œè½¬æ¢æˆImmutable MemTableå¹¶æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ WALï¼ˆWrite-Ahead Logï¼‰ï¼šæ¯ä¸ªå†™å…¥æ“ä½œéƒ½ä¼šè¢«è®°å½•åˆ°WALä¸­ï¼Œç”¨äºæ¢å¤æœªæŒä¹…åŒ–çš„æ•°æ® äº†è§£è¿™äº›åŸºç¡€çŸ¥è¯†èƒ½å¸®åŠ©ä½ åœ¨ä»£ç ä¸­æ›´å®¹æ˜“è¯†åˆ«å’Œç†è§£è¿™äº›æ¦‚å¿µã€‚
é¡¹ç›®ç»“æ„è¯¦è§£ LevelDBçš„æºç ç»“æ„æ¸…æ™°ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜ï¼š
1. db/ - æ ¸å¿ƒæ•°æ®åº“æ“ä½œ åŒ…å«LevelDBæ•°æ®åº“çš„æ ¸å¿ƒå®ç°ï¼Œå¤„ç†æ•°æ®çš„å­˜å‚¨ã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ç­‰ä¸»è¦åŠŸèƒ½ã€‚
é‡è¦æ–‡ä»¶ï¼š
db_impl.ccï¼šä¸»è¦æ•°æ®åº“æ“ä½œçš„å®ç°ï¼ˆGetã€Putã€Deleteç­‰æ¥å£ï¼‰ version_set.ccï¼šç®¡ç†SSTableæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ä»¥åŠæ–‡ä»¶åˆå¹¶ï¼ˆCompactionï¼‰æ“ä½œ write_batch.ccï¼šå¤„ç†æ‰¹é‡å†™æ“ä½œï¼ˆWriteBatchï¼‰çš„å®ç° log_writer.cc å’Œ log_reader.ccï¼šå†™å‰æ—¥å¿—ï¼ˆWALï¼‰çš„è¯»å†™åŠŸèƒ½å®ç° æ ¸å¿ƒåŠŸèƒ½ï¼š
æ•°æ®è¯»å†™æ¥å£çš„å®ç° æ—¥å¿—æ¢å¤å’Œæ•°æ®æ¢å¤ æ•°æ®çš„å­˜å‚¨ç»„ç»‡å½¢å¼ç®¡ç† 2. table/ - SSTableå®ç° SSTableæ˜¯LevelDBæŒä¹…åŒ–å­˜å‚¨çš„åŸºæœ¬å•ä½ï¼Œè¿™ä¸ªç›®å½•åŒ…å«äº†SSTableçš„ç”Ÿæˆã€è¯»å–ä»¥åŠä¸å…¶ä»–æ•°æ®åº“ç»“æ„çš„äº¤äº’ã€‚
é‡è¦æ–‡ä»¶ï¼š
block_builder.ccï¼šæ„å»ºSSTableä¸­çš„Blockï¼ˆå°çš„å­˜å‚¨å•å…ƒï¼‰ table_builder.ccï¼šæ„å»ºSSTableæ–‡ä»¶çš„é€»è¾‘ block.cc å’Œ block_reader.ccï¼šä»SSTableä¸­è¯»å–Blockçš„é€»è¾‘ filter_block.ccï¼šå®ç°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨ æ ¸å¿ƒåŠŸèƒ½ï¼š
SSTableæ–‡ä»¶çš„ç”Ÿæˆä¸è¯»å– æ•°æ®çš„ç»„ç»‡æ–¹å¼ï¼ˆåˆ†å—å­˜å‚¨ã€å¸ƒéš†è¿‡æ»¤å™¨ã€å‹ç¼©ç­‰ï¼‰ ä¿è¯SSTableä¸­çš„æ•°æ®æ˜¯æœ‰åºçš„ 3. util/ - é€šç”¨å·¥å…·å’Œè¾…åŠ©ç±» åŒ…å«LevelDBä¸­çš„é€šç”¨å·¥å…·ï¼Œè¾…åŠ©å¤„ç†å¸¸è§çš„æ“ä½œã€‚
é‡è¦æ–‡ä»¶ï¼š
status.ccï¼šæä¾›çŠ¶æ€ç±»Statusï¼Œç”¨äºè¡¨ç¤ºæ“ä½œæˆåŠŸæˆ–å¤±è´¥çš„ç»“æœ coding.ccï¼šæä¾›åŸºæœ¬çš„ç¼–ç ã€è§£ç åŠŸèƒ½ env.ccï¼šæä¾›æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„æŠ½è±¡ crc32c.ccï¼šå®ç°CRC32Cæ ¡éªŒï¼Œç”¨äºæ•°æ®å®Œæ•´æ€§æ ¡éªŒ compression.ccï¼šå¤„ç†æ•°æ®å‹ç¼©ä¸è§£å‹ç¼© 4. port/ - è·¨å¹³å°æ”¯æŒ ç¡®ä¿LevelDBå¯ä»¥åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶æ¶æ„ä¸‹è¿è¡Œã€‚
é‡è¦æ–‡ä»¶ï¼š
...</p></div><footer class=entry-footer><span title='2024-10-12 10:00:00 +0800 CST'>October 12, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to LevelDBæºç é˜…è¯»æŒ‡å—" href=https://tyhzxh.github.io/posts/leveldb-source-code-guide/></a></article><article class=post-entry><header class=entry-header><h2>CSAPPç¬¬äºŒç« ï¼šä¿¡æ¯çš„è¡¨ç¤ºä¸å¤„ç†</h2></header><div class=entry-meta><span title='2024-04-07 23:31:21 +0800 CST'>April 7, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>è‘—åçš„å¤§é»‘ä¹¦ CSAPPã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ç¬¬äºŒç« å­¦ä¹ ç¬”è®°ã€‚ä»ç¬¬äºŒç« ï¼ˆä¿¡æ¯çš„è¡¨ç¤ºä¸å¤„ç†ï¼‰å¼€å§‹ï¼Œè¿™æ˜¯è®¡ç®—æœºåº•å±‚æ•°æ®è¡¨ç¤ºçš„æ ¸å¿ƒå†…å®¹ã€‚
å‰è¨€ ä»è¿™ä¸€ç« å¼€å§‹ï¼ŒCSAPPå°†æˆ‘ä»¬å¼•å…¥äº†è®¡ç®—æœºæœ€åº•å±‚çš„æ•°æ®è¡¨ç¤ºé¢†åŸŸâ€”â€”æ¢¦å¼€å§‹çš„åœ°æ–¹ï¼
æ ¸å¿ƒè§‚ç‚¹ï¼šè®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶åºåˆ—æœ¬èº«æ˜¯æ²¡æœ‰å®é™…æ„ä¹‰çš„ï¼Œé‡è¦çš„æ˜¯çœ‹ä½ æ€ä¹ˆå»è§£é‡Šå®ƒã€‚
è¿™å¥è¯è´¯ç©¿äº†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„è®¾è®¡å“²å­¦ã€‚
ä¸€ã€æ•´æ•°è¡¨ç¤º å†…å­˜æ¨¡å‹åŸºç¡€ ç¨‹åºå‘˜ç¼–ç¨‹æ—¶é¢å¯¹çš„æ˜¯ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼ˆä¸€ç§æŠ½è±¡ï¼‰ï¼Œè¿™ä¸ªå†…å­˜ç©ºé—´æœ¬è´¨ä¸Šæ˜¯ï¼š
ä¸€ä¸ªå¾ˆé•¿çš„å­—èŠ‚æ•°ç»„ï¼ˆå­—èŠ‚æ˜¯å†…å­˜çš„æœ€å°å•ä½ï¼‰ æ¯ä¸ªå­—èŠ‚ç”±8ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆ æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å †äºŒè¿›åˆ¶åºåˆ— è¿›åˆ¶è½¬æ¢åŸºç¡€ æ¯ä¸ªå­—èŠ‚é‡Œçš„8ä½äºŒè¿›åˆ¶æ•°ä¹ æƒ¯ç”¨16è¿›åˆ¶è¡¨ç¤ºï¼š
äºŒè¿›åˆ¶: 11111111 åå…­è¿›åˆ¶: FF è®°å¿†æŠ€å·§ï¼š
16è¿›åˆ¶çš„ä¸¤ä½åˆ†åˆ«ç”±äºŒè¿›åˆ¶çš„4ä½ç»„æˆ æ¯ä¸€ä½çš„æƒé‡ï¼š8ã€4ã€2ã€1ï¼ˆæ•°å­—ç”µè·¯åŸºç¡€ï¼‰ æœ‰ç¬¦å·æ•°ï¼ˆè¡¥ç è¡¨ç¤ºï¼‰ ä»¥intç±»å‹ä¸ºä¾‹ï¼š
å¤§å°ï¼š4ä¸ªå­—èŠ‚ï¼Œå…±32ä½ ç¬¦å·ä½ï¼šç¬¬ä¸€ä½ï¼Œ0è¡¨ç¤ºæ­£æ•°ï¼Œ1è¡¨ç¤ºè´Ÿæ•° å­˜å‚¨æ–¹å¼ï¼šè¡¥ç  è¡¥ç çš„ç²¾å¦™è®¾è®¡ // æ­£æ•°ï¼šç›´æ¥è¡¨ç¤º int a = 5; // 00000000 00000000 00000000 00000101 // è´Ÿæ•°ï¼šè¡¥ç è¡¨ç¤º int b = -5; // 11111111 11111111 11111111 11111011 è¡¥ç è®¡ç®—è§„åˆ™ï¼š
æ­£æ•°çš„è¡¥ç å°±æ˜¯å…¶äºŒè¿›åˆ¶è¡¨ç¤º è´Ÿæ•°çš„è¡¥ç  = æŒ‰ä½å–å + 1 æ•°çš„ç›¸åæ•° = æŒ‰ä½å–å + 1 è¡¥ç çš„ä¼˜åŠ¿ ç»Ÿä¸€è¿ç®—ï¼šåŠ æ³•å’Œå‡æ³•å¯ä»¥ç”¨åŒä¸€å¥—ç”µè·¯å®ç° å”¯ä¸€é›¶å€¼ï¼šåªæœ‰ä¸€ä¸ªé›¶çš„è¡¨ç¤º èŒƒå›´å¯¹ç§°ï¼šèƒ½è¡¨ç¤ºçš„è´Ÿæ•°æ¯”æ­£æ•°å¤šä¸€ä¸ª æ— ç¬¦å·æ•° æ— ç¬¦å·æ•°æœ€ç®€å•ï¼š32ä½äºŒè¿›åˆ¶ä»£ç ç›´æ¥å¯¹åº”çœŸå€¼ï¼Œæ²¡æœ‰ç¬¦å·ä½çš„æ¦‚å¿µã€‚
unsigned int x = 4294967295U; // 2^32 - 1 äºŒã€å®é™…ç¼–ç¨‹ç»ƒä¹  1. å¤§å°ç«¯æ£€æµ‹ç¨‹åº èƒŒæ™¯ï¼šå¤§å°ç«¯ä¹‹äº‰æ˜¯è®¡ç®—æœºå†å²ä¸Šçš„ç»å…¸é—®é¢˜
å°ç«¯æœºå™¨ï¼šä½ä½å­—èŠ‚å­˜å‚¨åœ¨ä½åœ°å€ï¼ˆç°åœ¨PCå¤§å¤šæ˜¯å°ç«¯ï¼‰ å¤§ç«¯æœºå™¨ï¼šé«˜ä½å­—èŠ‚å­˜å‚¨åœ¨ä½åœ°å€ #include &lt;stdio.h> char get_first_bytes(char *a) { return a[0]; } void islittle_endian() { int a = 1; if (get_first_bytes((char *)&amp;a)) printf("is little_endian\n"); else printf("is big_endian\n"); } int main() { islittle_endian(); return 0; } åŸç†è§£æï¼š
...</p></div><footer class=entry-footer><span title='2024-04-07 23:31:21 +0800 CST'>April 7, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to CSAPPç¬¬äºŒç« ï¼šä¿¡æ¯çš„è¡¨ç¤ºä¸å¤„ç†" href=https://tyhzxh.github.io/posts/csapp-chapter2-data-representation/></a></article><article class=post-entry><header class=entry-header><h2>è®¡ç®—æœºç½‘ç»œæ¦‚è¿°ï¼šä»OSIæ¨¡å‹åˆ°TCP/IPåè®®æ ˆ</h2></header><div class=entry-meta><span title='2024-03-25 22:24:11 +0800 CST'>March 25, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>è®¡ç®—æœºç½‘ç»œåŸºç¡€æ¦‚è¿° è®¡ç®—æœºç½‘ç»œæ˜¯ç°ä»£ä¿¡æ¯æŠ€æœ¯çš„åŸºç¡€è®¾æ–½ï¼Œç†è§£ç½‘ç»œæ¨¡å‹å’Œåè®®å¯¹äºä»»ä½•ITä»ä¸šè€…éƒ½è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ç½‘ç»œåˆ†å±‚æ¨¡å‹ã€æ ¸å¿ƒåè®®åŠå…¶å®é™…åº”ç”¨ã€‚
ç½‘ç»œåˆ†å±‚æ¨¡å‹å¯¹æ¯” OSIä¸ƒå±‚æ¨¡å‹ OSIï¼ˆOpen Systems Interconnectionï¼‰æ¨¡å‹æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡åˆ¶å®šçš„ç½‘ç»œé€šä¿¡æ ‡å‡†æ¨¡å‹ï¼Œå°†ç½‘ç»œé€šä¿¡åˆ†ä¸ºä¸ƒä¸ªå±‚æ¬¡ï¼š
å±‚æ¬¡ åç§° åŠŸèƒ½æè¿° å…¸å‹åè®®/æŠ€æœ¯ æ•°æ®å•ä½ ç¬¬7å±‚ åº”ç”¨å±‚ ä¸ºåº”ç”¨ç¨‹åºæä¾›ç½‘ç»œæœåŠ¡ HTTPã€HTTPSã€FTPã€SMTPã€DNS æ•°æ® ç¬¬6å±‚ è¡¨ç¤ºå±‚ æ•°æ®æ ¼å¼è½¬æ¢ã€åŠ å¯†è§£å¯†ã€å‹ç¼© SSL/TLSã€JPEGã€MPEG æ•°æ® ç¬¬5å±‚ ä¼šè¯å±‚ å»ºç«‹ã€ç®¡ç†ã€ç»ˆæ­¢ä¼šè¯è¿æ¥ NetBIOSã€RPCã€SQL æ•°æ® ç¬¬4å±‚ ä¼ è¾“å±‚ ç«¯åˆ°ç«¯çš„å¯é æ•°æ®ä¼ è¾“ TCPã€UDP æ®µï¼ˆSegmentï¼‰ ç¬¬3å±‚ ç½‘ç»œå±‚ è·¯å¾„é€‰æ‹©å’Œé€»è¾‘åœ°å€ IPã€ICMPã€OSPFã€BGP åŒ…ï¼ˆPacketï¼‰ ç¬¬2å±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†åœ°å€å’Œé”™è¯¯æ£€æµ‹ Ethernetã€WiFiã€PPP å¸§ï¼ˆFrameï¼‰ ç¬¬1å±‚ ç‰©ç†å±‚ ç”µæ°”ã€ç‰©ç†ã€åŠŸèƒ½å’Œè¿‡ç¨‹ç‰¹æ€§ åŒç»çº¿ã€å…‰çº¤ã€æ— çº¿ç”µæ³¢ æ¯”ç‰¹ï¼ˆBitï¼‰ TCP/IPå››å±‚æ¨¡å‹ TCP/IPæ¨¡å‹æ˜¯äº’è”ç½‘å®é™…ä½¿ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼Œæ›´åŠ å®ç”¨å’Œç®€åŒ–ï¼š
TCP/IPå±‚æ¬¡ åŠŸèƒ½æè¿° å¯¹åº”OSIå±‚ ä¸»è¦åè®® åº”ç”¨å±‚ åº”ç”¨ç¨‹åºæ¥å£å’ŒæœåŠ¡ åº”ç”¨å±‚+è¡¨ç¤ºå±‚+ä¼šè¯å±‚ HTTPã€HTTPSã€FTPã€SMTPã€DNSã€SSH ä¼ è¾“å±‚ ç«¯åˆ°ç«¯é€šä¿¡å’Œæ•°æ®å®Œæ•´æ€§ ä¼ è¾“å±‚ TCPã€UDP ç½‘ç»œå±‚ è·¯ç”±å’Œå¯»å€ ç½‘ç»œå±‚ IPã€ICMPã€ARP ç½‘ç»œæ¥å£å±‚ ç‰©ç†ç½‘ç»œè®¿é—® æ•°æ®é“¾è·¯å±‚+ç‰©ç†å±‚ Ethernetã€WiFiã€PPP ä¸¤ç§æ¨¡å‹çš„å¯¹æ¯” OSIä¸ƒå±‚æ¨¡å‹ TCP/IPå››å±‚æ¨¡å‹ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ åº”ç”¨å±‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ åº”ç”¨å±‚ â”‚ â”‚ è¡¨ç¤ºå±‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ ä¼šè¯å±‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ ä¼ è¾“å±‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ ä¼ è¾“å±‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ ç½‘ç»œå±‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ ç½‘ç»œå±‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ æ•°æ®é“¾è·¯å±‚ â”‚ â”‚ ç½‘ç»œæ¥å£å±‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ ç‰©ç†å±‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æ ¸å¿ƒåè®®è¯¦è§£ HTTPåè®®ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ HTTPåŸºæœ¬æ¦‚å¿µ **HTTPï¼ˆHyperText Transfer Protocolï¼‰**æ˜¯åº”ç”¨å±‚åè®®ï¼Œç”¨äºåœ¨Webæµè§ˆå™¨å’ŒWebæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚
...</p></div><footer class=entry-footer><span title='2024-03-25 22:24:11 +0800 CST'>March 25, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to è®¡ç®—æœºç½‘ç»œæ¦‚è¿°ï¼šä»OSIæ¨¡å‹åˆ°TCP/IPåè®®æ ˆ" href=https://tyhzxh.github.io/posts/computer-network-overview/></a></article><article class=post-entry><header class=entry-header><h2>Javaç¼“å†²æµè¯¦è§£ï¼šæå‡IOæ€§èƒ½çš„å…³é”®æŠ€æœ¯</h2></header><div class=entry-meta><span title='2024-03-20 16:45:00 +0800 CST'>March 20, 2024</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>ç¼“å†²æµæ¦‚è¿° ç¼“å†²æµï¼ˆBuffered Streamï¼‰ æ˜¯Java IOä¸­ä¸€ç§å¤„ç†æµï¼ˆProcessing Streamï¼‰ï¼Œå®ƒåœ¨åº•å±‚èŠ‚ç‚¹æµï¼ˆå¦‚æ–‡ä»¶æµã€ç½‘ç»œæµï¼‰çš„åŸºç¡€ä¸Šï¼Œå¢åŠ å†…å­˜ç¼“å†²åŒºï¼Œé€šè¿‡æ‰¹é‡è¯»å†™æ•°æ®æ˜¾è‘—æå‡IOæ•ˆç‡ã€‚
ç¼“å†²æµçš„æ ¸å¿ƒä½œç”¨ 1. å‡å°‘ç‰©ç†IOæ¬¡æ•° è¿™æ˜¯ç¼“å†²æµæœ€é‡è¦çš„ä½œç”¨ã€‚è®©æˆ‘ä»¬é€šè¿‡å¯¹æ¯”æ¥ç†è§£ï¼š
æ— ç¼“å†²æµçš„é—®é¢˜ // æ¯æ¬¡è¯»å–1å­—èŠ‚ï¼ˆæ€§èƒ½æå·®ï¼‰ try (FileInputStream fis = new FileInputStream("largefile.bin")) { int data; while ((data = fis.read()) != -1) { // æ¯è¯»1å­—èŠ‚è§¦å‘ä¸€æ¬¡ç£ç›˜IOæ“ä½œ // è¯»å–1GBæ–‡ä»¶éœ€è¦çº¦10äº¿æ¬¡ç£ç›˜è®¿é—® } } ä½¿ç”¨ç¼“å†²æµçš„ä¼˜åŠ¿ // é»˜è®¤ç¼“å†²åŒº8KBï¼ˆä¸€æ¬¡æ€§è¯»å–8KBåˆ°å†…å­˜ï¼‰ try (BufferedInputStream bis = new BufferedInputStream( new FileInputStream("largefile.bin"))) { int data; while ((data = bis.read()) != -1) { // ä»å†…å­˜ç¼“å†²åŒºè¯»å–ï¼Œç¼“å†²åŒºç©ºäº†æ‰ä¼šè§¦å‘ç£ç›˜IO // è¯»å–1GBæ–‡ä»¶åªéœ€è¦çº¦128,000æ¬¡ç£ç›˜è®¿é—® } } 2. æ€§èƒ½å¯¹æ¯”æ•°æ® åœºæ™¯ ç‰©ç†IOæ¬¡æ•° è€—æ—¶ æ€§èƒ½æå‡ è¯»å–1GBæ–‡ä»¶ï¼ˆæ— ç¼“å†²ï¼‰ çº¦10äº¿æ¬¡æ“ä½œ >60ç§’ - è¯»å–1GBæ–‡ä»¶ï¼ˆ8KBç¼“å†²ï¼‰ çº¦128,000æ¬¡æ“ä½œ &lt;1ç§’ 60å€ä»¥ä¸Š è¯»å–1GBæ–‡ä»¶ï¼ˆ64KBç¼“å†²ï¼‰ çº¦16,000æ¬¡æ“ä½œ &lt;0.5ç§’ 120å€ä»¥ä¸Š Javaä¸­çš„ç¼“å†²æµç±»å‹ ç¼“å†²æµå®¶æ— ç±»å‹ å¯¹åº”èŠ‚ç‚¹æµ åŠŸèƒ½è¯´æ˜ é»˜è®¤ç¼“å†²åŒºå¤§å° BufferedInputStream FileInputStream å­—èŠ‚è¾“å…¥ç¼“å†²æµ 8KB BufferedOutputStream FileOutputStream å­—èŠ‚è¾“å‡ºç¼“å†²æµ 8KB BufferedReader FileReader å­—ç¬¦è¾“å…¥ç¼“å†²æµï¼ˆæ”¯æŒæŒ‰è¡Œè¯»ï¼‰ 8KB BufferedWriter FileWriter å­—ç¬¦è¾“å‡ºç¼“å†²æµ 8KB ç¼“å†²æµçš„åº•å±‚åŸç† 1. è¯»å–ç¼“å†²æœºåˆ¶ public class BufferedInputStreamDemo { public static void demonstrateBuffering() { try (BufferedInputStream bis = new BufferedInputStream( new FileInputStream("data.txt"), 1024)) { // 1KBç¼“å†²åŒº // å·¥ä½œæµç¨‹ï¼š // 1. åˆå§‹åŒ–ï¼šåˆ›å»º1KBç¼“å†²åŒº // 2. é¦–æ¬¡è¯»å–ï¼šä¸€æ¬¡æ€§ä»ç£ç›˜è¯»å–1KBæ•°æ®åˆ°ç¼“å†²åŒº // 3. åç»­è¯»å–ï¼šç›´æ¥ä»ç¼“å†²åŒºè¿”å›æ•°æ®ï¼ˆä¸è§¦å‘ç£ç›˜IOï¼‰ // 4. ç¼“å†²åŒºè€—å°½ï¼šå†æ¬¡è‡ªåŠ¨è¯»å–ä¸‹ä¸€æ‰¹1KBæ•°æ® int data; while ((data = bis.read()) != -1) { // è¿™é‡Œçš„read()å¤§éƒ¨åˆ†æ—¶å€™æ˜¯ä»å†…å­˜ç¼“å†²åŒºè¯»å– System.out.print((char) data); } } catch (IOException e) { e.printStackTrace(); } } } 2. å†™å…¥ç¼“å†²æœºåˆ¶ public class BufferedOutputStreamDemo { public static void demonstrateBuffering() { try (BufferedOutputStream bos = new BufferedOutputStream( new FileOutputStream("output.txt"), 1024)) { // 1KBç¼“å†²åŒº // å·¥ä½œæµç¨‹ï¼š String data = "Hello, Buffered Stream!"; for (char c : data.toCharArray()) { bos.write(c); // æ•°æ®å…ˆå†™å…¥ç¼“å†²åŒºï¼ˆä¸ç«‹å³å†™å…¥ç£ç›˜ï¼‰ } // ç¼“å†²åŒºæ»¡æ—¶ï¼šè‡ªåŠ¨å°†ç¼“å†²åŒºå†…å®¹å†™å…¥ç£ç›˜ // æ‰‹åŠ¨åˆ·æ–°ï¼šé€šè¿‡flush()å¼ºåˆ¶ç«‹å³å†™å…¥ bos.flush(); // å…³é—­æµæ—¶ï¼šè‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒº } catch (IOException e) { e.printStackTrace(); } } } ç¼“å†²æµçš„ä½¿ç”¨æ–¹æ³• 1. å­—èŠ‚ç¼“å†²æµåŸºç¡€ç”¨æ³• public class ByteBufferedStreamExample { /** * ä½¿ç”¨ç¼“å†²æµå¤åˆ¶æ–‡ä»¶ */ public static void copyFileWithBuffer(String sourcePath, String targetPath) { try ( // åˆ›å»ºè¾“å…¥ç¼“å†²æµ FileInputStream fis = new FileInputStream(sourcePath); BufferedInputStream bis = new BufferedInputStream(fis, 16384); // 16KBç¼“å†²åŒº // åˆ›å»ºè¾“å‡ºç¼“å†²æµ FileOutputStream fos = new FileOutputStream(targetPath); BufferedOutputStream bos = new BufferedOutputStream(fos, 16384) ) { byte[] buffer = new byte[1024]; // é¢å¤–çš„è¯»å–ç¼“å†²åŒº int bytesRead; while ((bytesRead = bis.read(buffer)) != -1) { bos.write(buffer, 0, bytesRead); } // ç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½å†™å…¥ç£ç›˜ bos.flush(); } catch (IOException e) { System.err.println("æ–‡ä»¶å¤åˆ¶å¤±è´¥: " + e.getMessage()); } } /** * æ€§èƒ½æµ‹è¯•ï¼šå¯¹æ¯”æœ‰æ— ç¼“å†²æµçš„æ€§èƒ½å·®å¼‚ */ public static void performanceTest(String filePath) { // æµ‹è¯•æ— ç¼“å†²æµ long startTime = System.currentTimeMillis(); try (FileInputStream fis = new FileInputStream(filePath)) { while (fis.read() != -1) { // é€å­—èŠ‚è¯»å– } } catch (IOException e) { e.printStackTrace(); } long unbufferedTime = System.currentTimeMillis() - startTime; // æµ‹è¯•ç¼“å†²æµ startTime = System.currentTimeMillis(); try (BufferedInputStream bis = new BufferedInputStream( new FileInputStream(filePath))) { while (bis.read() != -1) { // é€å­—èŠ‚è¯»å–ï¼ˆä½†æœ‰ç¼“å†²ï¼‰ } } catch (IOException e) { e.printStackTrace(); } long bufferedTime = System.currentTimeMillis() - startTime; System.out.println("æ— ç¼“å†²æµè€—æ—¶: " + unbufferedTime + "ms"); System.out.println("ç¼“å†²æµè€—æ—¶: " + bufferedTime + "ms"); System.out.println("æ€§èƒ½æå‡: " + (unbufferedTime / (double) bufferedTime) + "å€"); } } 2. å­—ç¬¦ç¼“å†²æµé«˜çº§åŠŸèƒ½ public class CharBufferedStreamExample { /** * ä½¿ç”¨BufferedReaderæŒ‰è¡Œè¯»å–æ–‡æœ¬æ–‡ä»¶ */ public static void readFileByLines(String filePath) { try ( FileReader fr = new FileReader(filePath); BufferedReader br = new BufferedReader(fr, 8192) // 8KBç¼“å†²åŒº ) { String line; int lineNumber = 1; // æŒ‰è¡Œè¯»å–ï¼Œè¿™æ˜¯BufferedReaderçš„ç‰¹è‰²åŠŸèƒ½ while ((line = br.readLine()) != null) { System.out.println(lineNumber + ": " + line); lineNumber++; } } catch (IOException e) { System.err.println("è¯»å–æ–‡ä»¶å¤±è´¥: " + e.getMessage()); } } /** * ä½¿ç”¨BufferedWriterå†™å…¥æ–‡æœ¬æ–‡ä»¶ */ public static void writeFileWithBuffer(String filePath, List&lt;String> lines) { try ( FileWriter fw = new FileWriter(filePath); BufferedWriter bw = new BufferedWriter(fw, 8192) ) { for (String line : lines) { bw.write(line); bw.newLine(); // å†™å…¥ç³»ç»Ÿç›¸å…³çš„è¡Œåˆ†éš”ç¬¦ } // æ‰‹åŠ¨åˆ·æ–°ç¡®ä¿æ•°æ®å†™å…¥ bw.flush(); } catch (IOException e) { System.err.println("å†™å…¥æ–‡ä»¶å¤±è´¥: " + e.getMessage()); } } /** * å¤„ç†å¤§æ–‡ä»¶çš„æµå¼è¯»å– */ public static void processLargeFile(String filePath) { try ( FileReader fr = new FileReader(filePath); BufferedReader br = new BufferedReader(fr, 65536) // 64KBç¼“å†²åŒº ) { String line; long lineCount = 0; long totalChars = 0; while ((line = br.readLine()) != null) { lineCount++; totalChars += line.length(); // æ¯å¤„ç†10000è¡Œè¾“å‡ºä¸€æ¬¡è¿›åº¦ if (lineCount % 10000 == 0) { System.out.println("å·²å¤„ç† " + lineCount + " è¡Œ"); } // è¿™é‡Œå¯ä»¥æ·»åŠ å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ processLine(line); } System.out.println("æ–‡ä»¶å¤„ç†å®Œæˆ:"); System.out.println("æ€»è¡Œæ•°: " + lineCount); System.out.println("æ€»å­—ç¬¦æ•°: " + totalChars); } catch (IOException e) { System.err.println("å¤„ç†æ–‡ä»¶å¤±è´¥: " + e.getMessage()); } } private static void processLine(String line) { // å…·ä½“çš„è¡Œå¤„ç†é€»è¾‘ // ä¾‹å¦‚ï¼šæ•°æ®æ¸…æ´—ã€æ ¼å¼è½¬æ¢ã€ç»Ÿè®¡åˆ†æç­‰ } } 3. è‡ªå®šä¹‰ç¼“å†²åŒºå¤§å° public class CustomBufferSizeExample { /** * æ ¹æ®æ–‡ä»¶å¤§å°åŠ¨æ€è°ƒæ•´ç¼“å†²åŒºå¤§å° */ public static void copyWithOptimalBuffer(String sourcePath, String targetPath) { File sourceFile = new File(sourcePath); long fileSize = sourceFile.length(); // æ ¹æ®æ–‡ä»¶å¤§å°é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºå¤§å° int bufferSize; if (fileSize &lt; 1024 * 1024) { // å°äº1MB bufferSize = 4096; // 4KBç¼“å†²åŒº } else if (fileSize &lt; 100 * 1024 * 1024) { // å°äº100MB bufferSize = 65536; // 64KBç¼“å†²åŒº } else { // å¤§äº100MB bufferSize = 1024 * 1024; // 1MBç¼“å†²åŒº } try ( BufferedInputStream bis = new BufferedInputStream( new FileInputStream(sourcePath), bufferSize); BufferedOutputStream bos = new BufferedOutputStream( new FileOutputStream(targetPath), bufferSize) ) { byte[] buffer = new byte[bufferSize / 4]; // è¯»å–ç¼“å†²åŒºä¸ºç¼“å†²æµçš„1/4 int bytesRead; while ((bytesRead = bis.read(buffer)) != -1) { bos.write(buffer, 0, bytesRead); } } catch (IOException e) { System.err.println("æ–‡ä»¶å¤åˆ¶å¤±è´¥: " + e.getMessage()); } } } ç¼“å†²æµçš„æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ 1. ç¼“å†²åŒºå¤§å°é€‰æ‹© public class BufferSizeOptimization { /** * æµ‹è¯•ä¸åŒç¼“å†²åŒºå¤§å°çš„æ€§èƒ½ */ public static void testBufferSizes(String filePath) { int[] bufferSizes = {1024, 4096, 8192, 16384, 32768, 65536}; for (int bufferSize : bufferSizes) { long startTime = System.currentTimeMillis(); try (BufferedInputStream bis = new BufferedInputStream( new FileInputStream(filePath), bufferSize)) { byte[] buffer = new byte[1024]; while (bis.read(buffer) != -1) { // è¯»å–æ•°æ® } } catch (IOException e) { e.printStackTrace(); } long endTime = System.currentTimeMillis(); System.out.println("ç¼“å†²åŒºå¤§å° " + bufferSize + " å­—èŠ‚ï¼Œè€—æ—¶: " + (endTime - startTime) + "ms"); } } } 2. æ­£ç¡®çš„èµ„æºç®¡ç† public class ResourceManagementExample { /** * æ­£ç¡®çš„èµ„æºç®¡ç†æ–¹å¼ */ public static void correctResourceManagement(String inputPath, String outputPath) { // ä½¿ç”¨try-with-resourcesç¡®ä¿èµ„æºæ­£ç¡®å…³é—­ try ( // åªéœ€è¦å…³é—­æœ€å¤–å±‚çš„ç¼“å†²æµï¼Œå†…éƒ¨çš„èŠ‚ç‚¹æµä¼šè‡ªåŠ¨å…³é—­ BufferedReader reader = new BufferedReader( new FileReader(inputPath), 16384); BufferedWriter writer = new BufferedWriter( new FileWriter(outputPath), 16384) ) { String line; while ((line = reader.readLine()) != null) { writer.write(line); writer.newLine(); } // å†™å…¥æµéœ€è¦æ‰‹åŠ¨flushç¡®ä¿æ•°æ®å®Œå…¨å†™å…¥ writer.flush(); } catch (IOException e) { System.err.println("æ–‡ä»¶æ“ä½œå¤±è´¥: " + e.getMessage()); } // èµ„æºä¼šåœ¨è¿™é‡Œè‡ªåŠ¨å…³é—­ } /** * é”™è¯¯çš„èµ„æºç®¡ç†æ–¹å¼ï¼ˆä»…ä½œç¤ºä¾‹ï¼Œä¸è¦è¿™æ ·åšï¼‰ */ public static void incorrectResourceManagement(String inputPath, String outputPath) { BufferedReader reader = null; BufferedWriter writer = null; try { reader = new BufferedReader(new FileReader(inputPath)); writer = new BufferedWriter(new FileWriter(outputPath)); String line; while ((line = reader.readLine()) != null) { writer.write(line); writer.newLine(); } } catch (IOException e) { e.printStackTrace(); } finally { // æ‰‹åŠ¨å…³é—­èµ„æºï¼Œå®¹æ˜“å‡ºé”™ try { if (reader != null) reader.close(); if (writer != null) writer.close(); } catch (IOException e) { e.printStackTrace(); } } } } 3. å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒº public class FlushExample { /** * æ¼”ç¤ºä½•æ—¶éœ€è¦æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº */ public static void demonstrateFlush(String logPath) { try (BufferedWriter logWriter = new BufferedWriter( new FileWriter(logPath, true))) { // è¿½åŠ æ¨¡å¼ // å†™å…¥æ—¥å¿— logWriter.write("[" + new Date() + "] åº”ç”¨å¯åŠ¨"); logWriter.newLine(); // é‡è¦ï¼šç«‹å³åˆ·æ–°ç¡®ä¿æ—¥å¿—å†™å…¥ç£ç›˜ // å¦‚æœç¨‹åºå´©æºƒï¼Œæ²¡æœ‰flushçš„æ•°æ®å¯èƒ½ä¸¢å¤± logWriter.flush(); // æ¨¡æ‹Ÿä¸€äº›æ“ä½œ Thread.sleep(1000); logWriter.write("[" + new Date() + "] å¤„ç†ç”¨æˆ·è¯·æ±‚"); logWriter.newLine(); logWriter.flush(); // å†æ¬¡åˆ·æ–° } catch (IOException | InterruptedException e) { e.printStackTrace(); } } /** * æ‰¹é‡å†™å…¥æ—¶çš„åˆ·æ–°ç­–ç•¥ */ public static void batchWriteWithFlush(String outputPath, List&lt;String> data) { try (BufferedWriter writer = new BufferedWriter( new FileWriter(outputPath), 32768)) { // 32KBç¼“å†²åŒº int count = 0; for (String item : data) { writer.write(item); writer.newLine(); count++; // æ¯å†™å…¥1000æ¡è®°å½•å°±åˆ·æ–°ä¸€æ¬¡ if (count % 1000 == 0) { writer.flush(); System.out.println("å·²å†™å…¥ " + count + " æ¡è®°å½•"); } } // æœ€åç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½å†™å…¥ writer.flush(); } catch (IOException e) { e.printStackTrace(); } } } å®é™…åº”ç”¨åœºæ™¯ 1. æ—¥å¿—æ–‡ä»¶å¤„ç† public class LogFileProcessor { /** * åˆ†æå¤§å‹æ—¥å¿—æ–‡ä»¶ */ public static void analyzeLogFile(String logPath) { Map&lt;String, Integer> errorCounts = new HashMap&lt;>(); try (BufferedReader reader = new BufferedReader( new FileReader(logPath), 65536)) { // 64KBç¼“å†²åŒº String line; while ((line = reader.readLine()) != null) { if (line.contains("ERROR")) { // æå–é”™è¯¯ç±»å‹ String errorType = extractErrorType(line); errorCounts.merge(errorType, 1, Integer::sum); } } } catch (IOException e) { e.printStackTrace(); } // è¾“å‡ºç»Ÿè®¡ç»“æœ errorCounts.forEach((error, count) -> System.out.println(error + ": " + count + " æ¬¡")); } private static String extractErrorType(String logLine) { // ç®€å•çš„é”™è¯¯ç±»å‹æå–é€»è¾‘ if (logLine.contains("NullPointerException")) { return "NullPointerException"; } else if (logLine.contains("SQLException")) { return "SQLException"; } else { return "Other"; } } } 2. æ•°æ®æ–‡ä»¶è½¬æ¢ public class DataFileConverter { /** * CSVæ–‡ä»¶æ ¼å¼è½¬æ¢ */ public static void convertCsvFormat(String inputPath, String outputPath) { try ( BufferedReader reader = new BufferedReader( new FileReader(inputPath), 32768); BufferedWriter writer = new BufferedWriter( new FileWriter(outputPath), 32768) ) { String line; boolean isFirstLine = true; while ((line = reader.readLine()) != null) { if (isFirstLine) { // å¤„ç†è¡¨å¤´ writer.write(convertHeader(line)); isFirstLine = false; } else { // å¤„ç†æ•°æ®è¡Œ writer.write(convertDataLine(line)); } writer.newLine(); } } catch (IOException e) { e.printStackTrace(); } } private static String convertHeader(String header) { // è¡¨å¤´è½¬æ¢é€»è¾‘ return header.replace(",", "\t"); // CSVè½¬TSV } private static String convertDataLine(String dataLine) { // æ•°æ®è¡Œè½¬æ¢é€»è¾‘ return dataLine.replace(",", "\t"); // CSVè½¬TSV } } æ€§èƒ½ä¼˜åŒ–å»ºè®® 1. ç¼“å†²åŒºå¤§å°ä¼˜åŒ–æŒ‡å— æ–‡ä»¶å¤§å° æ¨èç¼“å†²åŒºå¤§å° è¯´æ˜ &lt; 1MB 4KB - 8KB å°æ–‡ä»¶ä¸éœ€è¦å¤ªå¤§ç¼“å†²åŒº 1MB - 100MB 16KB - 64KB å¹³è¡¡å†…å­˜ä½¿ç”¨å’Œæ€§èƒ½ > 100MB 64KB - 1MB å¤§æ–‡ä»¶å¯ä»¥ä½¿ç”¨æ›´å¤§ç¼“å†²åŒº ç½‘ç»œæµ 8KB - 32KB è€ƒè™‘ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½ 2. é€‰æ‹©åˆé€‚çš„ç¼“å†²æµç±»å‹ public class StreamTypeSelection { /** * æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„æµç±»å‹ */ public static void chooseAppropriateStream() { // åœºæ™¯1ï¼šå¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€å‹ç¼©åŒ…ç­‰ï¼‰ // ä½¿ç”¨å­—èŠ‚ç¼“å†²æµ try (BufferedInputStream bis = new BufferedInputStream( new FileInputStream("image.jpg"), 32768)) { // å¤„ç†äºŒè¿›åˆ¶æ•°æ® } catch (IOException e) { e.printStackTrace(); } // åœºæ™¯2ï¼šå¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œéœ€è¦æŒ‰è¡Œè¯»å– // ä½¿ç”¨å­—ç¬¦ç¼“å†²æµ try (BufferedReader reader = new BufferedReader( new FileReader("data.txt"), 16384)) { String line; while ((line = reader.readLine()) != null) { // æŒ‰è¡Œå¤„ç†æ–‡æœ¬ } } catch (IOException e) { e.printStackTrace(); } // åœºæ™¯3ï¼šç½‘ç»œæ•°æ®ä¼ è¾“ // ä½¿ç”¨è¾ƒå°çš„ç¼“å†²åŒºï¼ŒåŠæ—¶å“åº” try (BufferedOutputStream bos = new BufferedOutputStream( socket.getOutputStream(), 8192)) { // ç½‘ç»œæ•°æ®ä¼ è¾“ } catch (IOException e) { e.printStackTrace(); } } } æ€»ç»“ ç¼“å†²æµçš„æ ¸å¿ƒä»·å€¼ æ€§èƒ½æå‡ï¼šé€šè¿‡å†…å­˜ç¼“å†²åŒºå‡å°‘ç‰©ç†IOæ¬¡æ•°ï¼Œæ˜¾è‘—æå‡è¯»å†™æ€§èƒ½ ä½¿ç”¨ç®€å•ï¼šåªéœ€è¦åŒ…è£…ç°æœ‰çš„èŠ‚ç‚¹æµï¼ŒAPIä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸å˜ é€‚ç”¨å¹¿æ³›ï¼šæ–‡ä»¶æ“ä½œã€ç½‘ç»œä¼ è¾“ã€æ—¥å¿—å¤„ç†ç­‰IOå¯†é›†å‹åœºæ™¯ æœ€ä½³å®è·µè¦ç‚¹ å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ç¼“å†²æµï¼šé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¦åˆ™æ€»æ˜¯ç”¨ç¼“å†²æµåŒ…è£…èŠ‚ç‚¹æµ åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼šæ ¹æ®æ–‡ä»¶å¤§å°å’Œä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºå¤§å° æ­£ç¡®ç®¡ç†èµ„æºï¼šä½¿ç”¨try-with-resourcesç¡®ä¿æµæ­£ç¡®å…³é—­ åŠæ—¶åˆ·æ–°ç¼“å†²åŒºï¼šå¯¹äºé‡è¦æ•°æ®ï¼ŒåŠæ—¶è°ƒç”¨flush()ç¡®ä¿æ•°æ®å†™å…¥ é€‰æ‹©åˆé€‚çš„æµç±»å‹ï¼šæ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©å­—èŠ‚æµæˆ–å­—ç¬¦æµ æ€§èƒ½ä¼˜åŒ–å»ºè®® å¯¹äºå¤§æ–‡ä»¶æ“ä½œï¼Œç¼“å†²æµèƒ½å¸¦æ¥æ•°åå€ç”šè‡³ä¸Šç™¾å€çš„æ€§èƒ½æå‡ åˆç†çš„ç¼“å†²åŒºå¤§å°é€šå¸¸åœ¨8KBåˆ°64KBä¹‹é—´ ç»“åˆå…·ä½“çš„ç¡¬ä»¶ç¯å¢ƒï¼ˆSSD vs HDDï¼‰å’Œç½‘ç»œæ¡ä»¶è¿›è¡Œè°ƒä¼˜ æŒæ¡ç¼“å†²æµçš„ä½¿ç”¨æ˜¯Java IOç¼–ç¨‹çš„åŸºç¡€æŠ€èƒ½ï¼Œå®ƒä¸ä»…èƒ½æ˜¾è‘—æå‡ç¨‹åºæ€§èƒ½ï¼Œè¿˜èƒ½è®©ä»£ç æ›´åŠ ç®€æ´å’Œå¯ç»´æŠ¤ã€‚
...</p></div><footer class=entry-footer><span title='2024-03-20 16:45:00 +0800 CST'>March 20, 2024</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Javaç¼“å†²æµè¯¦è§£ï¼šæå‡IOæ€§èƒ½çš„å…³é”®æŠ€æœ¯" href=https://tyhzxh.github.io/posts/java-buffered-streams/></a></article><article class=post-entry><header class=entry-header><h2>Javaç±»è®¾è®¡è¯¦è§£ï¼šEntityç±»ä¸JavaBeanè§„èŒƒ</h2></header><div class=entry-meta><span title='2024-03-15 14:30:00 +0800 CST'>March 15, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>Javaç±»è®¾è®¡æ¦‚è¿° åœ¨Javaå¼€å‘ä¸­ï¼Œè‰¯å¥½çš„ç±»è®¾è®¡æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»ä¸¤ç§é‡è¦çš„ç±»è®¾è®¡æ¨¡å¼ï¼šEntityç±»ï¼ˆå®ä½“ç±»ï¼‰å’ŒJavaBeanï¼Œä»¥åŠå®ƒä»¬åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨ã€‚
Entity Classï¼ˆå®ä½“ç±»ï¼‰ ä»€ä¹ˆæ˜¯å®ä½“ç±»ï¼Ÿ å®ä½“ç±»ï¼ˆEntity Classï¼‰ æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œä¸»è¦ç”¨äºè¡¨ç¤ºä¸šåŠ¡é¢†åŸŸä¸­çš„å…·ä½“å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ã€è®¢å•ã€å•†å“ç­‰ï¼‰ï¼Œå¹¶æ‰¿è½½ä¸è¿™äº›å¯¹è±¡ç›¸å…³çš„æ•°æ®ã€‚å®ƒçš„æ ¸å¿ƒç‰¹å¾æ˜¯ï¼šç”¨å±æ€§æè¿°å¯¹è±¡ç‰¹å¾ï¼Œç”¨æ–¹æ³•å®šä¹‰ç®€å•è¡Œä¸ºã€‚
å®ä½“ç±»ç¤ºä¾‹ ä»¥RPCç¤ºä¾‹ä¸­çš„Userç±»ä¸ºä¾‹ï¼š
import lombok.Data; import java.io.Serializable; @Data // Lombokæ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆgetter/setter/toStringç­‰æ–¹æ³• public class User implements Serializable { private static final long serialVersionUID = 1L; private int id; // ç”¨æˆ·ID private String name; // ç”¨æˆ·å private String email; // é‚®ç®± private int age; // å¹´é¾„ // æ— å‚æ„é€ å™¨ï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–æ—¶éœ€è¦ï¼‰ public User() {} // å…¨å‚æ„é€ å™¨ï¼ˆæ–¹ä¾¿åˆ›å»ºå¯¹è±¡ï¼‰ public User(int id, String name, String email, int age) { this.id = id; this.name = name; this.email = email; this.age = age; } // éƒ¨åˆ†å‚æ•°æ„é€ å™¨ public User(int id, String name) { this.id = id; this.name = name; } } ä¸ºä»€ä¹ˆéœ€è¦å®ä½“ç±»ï¼Ÿ 1. æ•°æ®å°è£… å°†ç›¸å…³å±æ€§ï¼ˆå¦‚idã€nameã€emailï¼‰èšåˆåœ¨ä¸€èµ·ï¼Œå½¢æˆæœ‰ä¸šåŠ¡æ„ä¹‰çš„å¯¹è±¡ æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£ éšè—å†…éƒ¨å®ç°ç»†èŠ‚ // å¥½çš„è®¾è®¡ï¼šä½¿ç”¨å®ä½“ç±» User user = new User(1, "å¼ ä¸‰", "zhangsan@example.com", 25); userService.saveUser(user); // ä¸å¥½çš„è®¾è®¡ï¼šåˆ†æ•£çš„å‚æ•° userService.saveUser(1, "å¼ ä¸‰", "zhangsan@example.com", 25); 2. è·¨å±‚ä¼ è¾“ åœ¨RPCè°ƒç”¨ä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“å¯¹è±¡ å®ä½“ç±»ä¼šè¢«åºåˆ—åŒ–ä¸ºå­—èŠ‚æµä¼ è¾“ï¼Œæ¥æ”¶æ–¹å†ååºåˆ—åŒ–è¿˜åŸå¯¹è±¡ æä¾›ç»Ÿä¸€çš„æ•°æ®ä¼ è¾“æ ¼å¼ // RPCæœåŠ¡æ¥å£ public interface UserService { User getUserById(int id); // è¿”å›å®ä½“ç±» List&lt;User> getAllUsers(); // è¿”å›å®ä½“ç±»åˆ—è¡¨ boolean saveUser(User user); // æ¥æ”¶å®ä½“ç±»å‚æ•° } 3. æ¥å£å¥‘çº¦ å®šä¹‰æ˜ç¡®çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ æä¾›ç±»å‹å®‰å…¨ä¿éšœ ä¾¿äºAPIæ–‡æ¡£ç”Ÿæˆå’Œç»´æŠ¤ å®ä½“ç±»çš„è®¾è®¡è§„èŒƒ ç‰¹æ€§ è¯´æ˜ ç¤ºä¾‹ å®ç°Serializable å¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£ï¼Œå¦åˆ™æ— æ³•è·¨ç½‘ç»œä¼ è¾“ implements Serializable æ— å‚æ„é€ å™¨ åå°„å’Œååºåˆ—åŒ–æ—¶éœ€è¦é»˜è®¤æ„é€ å™¨ public User() {} å±æ€§ç§æœ‰åŒ– é€šè¿‡getter/setterè®¿é—®å±æ€§ï¼Œä¿è¯å°è£…æ€§ private String name; é¿å…ä¸šåŠ¡é€»è¾‘ å®ä½“ç±»åº”åªåŒ…å«æ•°æ®ï¼Œä¸åŒ…å«å¤æ‚ä¸šåŠ¡æ–¹æ³• åªæœ‰ç®€å•çš„getter/setter ä½¿ç”¨Lombok æ¨èç”¨@Dataè‡ªåŠ¨ç”Ÿæˆgetter/setterï¼Œå‡å°‘æ ·æ¿ä»£ç  @Data åºåˆ—åŒ–ç‰ˆæœ¬å· æ·»åŠ serialVersionUIDç¡®ä¿åºåˆ—åŒ–å…¼å®¹æ€§ private static final long serialVersionUID = 1L; JavaBeanè§„èŒƒ ä»€ä¹ˆæ˜¯JavaBeanï¼Ÿ JavaBeanæ˜¯ç¬¦åˆç‰¹å®šè§„èŒƒçš„Javaç±»ï¼Œç”¨äºå°è£…æ•°æ®å’Œå®šä¹‰å¯é‡ç”¨ç»„ä»¶ã€‚å®ƒæ˜¯Javaå¼€å‘ä¸­çš„ä¸€ç§è®¾è®¡æ ‡å‡†ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§æ¡†æ¶å’Œå·¥å…·ä¸­ã€‚
...</p></div><footer class=entry-footer><span title='2024-03-15 14:30:00 +0800 CST'>March 15, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Javaç±»è®¾è®¡è¯¦è§£ï¼šEntityç±»ä¸JavaBeanè§„èŒƒ" href=https://tyhzxh.github.io/posts/java-classes-and-beans/></a></article><article class=post-entry><header class=entry-header><h2>æ•°æ®åº“åŸºç¡€å…¥é—¨ï¼šä»æ¦‚å¿µåˆ°å®è·µ</h2></header><div class=entry-meta><span title='2024-03-11 12:32:05 +0800 CST'>March 11, 2024</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>æ•°æ®åº“å­¦ä¹ æ¦‚è¿° æ•°æ®åº“æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼ŒæŒæ¡æ•°æ®åº“çŸ¥è¯†å¯¹äºä»»ä½•å¼€å‘è€…éƒ½è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†ä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥æ•°æ®åº“çš„æ ¸å¿ƒæŠ€æœ¯ã€‚
å¼€å‘ç¯å¢ƒæ­å»º æ¨èå·¥å…·ç»„åˆ MySQL 8.3 Command Line Clientï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰
å®˜æ–¹å‘½ä»¤è¡Œå®¢æˆ·ç«¯ é€‚åˆå­¦ä¹ SQLè¯­æ³•å’Œæ‰§è¡Œè„šæœ¬ è½»é‡çº§ï¼Œå¯åŠ¨å¿«é€Ÿ Navicat for MySQLï¼ˆå›¾å½¢åŒ–å·¥å…·ï¼‰
ç›´è§‚çš„å›¾å½¢ç•Œé¢ å†…ç½®å‘½ä»¤è¡ŒåŠŸèƒ½ æ”¯æŒæ•°æ®åº“è®¾è®¡å’Œç®¡ç† é€‚åˆæ—¥å¸¸å¼€å‘å’Œç»´æŠ¤ ç¯å¢ƒé…ç½®å»ºè®® # MySQLæœåŠ¡å¯åŠ¨ net start mysql # è¿æ¥åˆ°MySQLæœåŠ¡å™¨ mysql -u root -p # æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ SELECT VERSION(); # æŸ¥çœ‹å½“å‰ç”¨æˆ· SELECT USER(); æ•°æ®åº“åŸºæœ¬æ¦‚å¿µ æ ¸å¿ƒç»„ä»¶ æ•°æ®åº“ç³»ç»ŸåŒ…å«ä»¥ä¸‹ä¸»è¦ç»„ä»¶ï¼š
ç»„ä»¶ åŠŸèƒ½è¯´æ˜ åº”ç”¨åœºæ™¯ è¡¨ï¼ˆTableï¼‰ å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•ä½ ç”¨æˆ·ä¿¡æ¯ã€è®¢å•è®°å½•ç­‰ è§†å›¾ï¼ˆViewï¼‰ è™šæ‹Ÿè¡¨ï¼ŒåŸºäºæŸ¥è¯¢ç»“æœ æ•°æ®å±•ç¤ºã€æƒé™æ§åˆ¶ å­˜å‚¨è¿‡ç¨‹ï¼ˆProcedureï¼‰ é¢„ç¼–è¯‘çš„SQLä»£ç å— å¤æ‚ä¸šåŠ¡é€»è¾‘å¤„ç† å‡½æ•°ï¼ˆFunctionï¼‰ è¿”å›å•ä¸€å€¼çš„ä»£ç å— æ•°æ®è®¡ç®—å’Œè½¬æ¢ è§¦å‘å™¨ï¼ˆTriggerï¼‰ è‡ªåŠ¨æ‰§è¡Œçš„ç‰¹æ®Šç¨‹åº æ•°æ®å®Œæ•´æ€§ç»´æŠ¤ äº‹ä»¶ï¼ˆEventï¼‰ å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ æ•°æ®æ¸…ç†ã€å¤‡ä»½ç­‰ åŸºæœ¬æ“ä½œç±»å‹ï¼ˆCRUDï¼‰ -- Createï¼ˆåˆ›å»ºï¼‰ INSERT INTO users (name, email) VALUES ('å¼ ä¸‰', 'zhangsan@example.com'); -- Readï¼ˆè¯»å–ï¼‰ SELECT * FROM users WHERE age > 18; -- Updateï¼ˆæ›´æ–°ï¼‰ UPDATE users SET email = 'newemail@example.com' WHERE id = 1; -- Deleteï¼ˆåˆ é™¤ï¼‰ DELETE FROM users WHERE id = 1; SQLè¯­æ³•è§„èŒƒ 1. å¤§å°å†™è§„èŒƒ -- æ¨èå†™æ³•ï¼šå…³é”®å­—å¤§å†™ï¼Œè¡¨ååˆ—åå°å†™ SELECT name, email FROM users WHERE age > 18 ORDER BY name; -- ä¸æ¨èä½†å¯è¡Œçš„å†™æ³• select NAME, EMAIL from USERS where AGE > 18 order by NAME; 2. è¯­å¥ç»“æŸç¬¦ -- æ¯æ¡SQLè¯­å¥å»ºè®®ç”¨åˆ†å·ç»“å°¾ CREATE DATABASE testdb; USE testdb; CREATE TABLE users (id INT PRIMARY KEY); 3. æ ¼å¼åŒ–å’Œç¼©è¿› -- è‰¯å¥½çš„æ ¼å¼åŒ–ç¤ºä¾‹ SELECT u.id, u.name, u.email, p.title AS position_title FROM users u INNER JOIN positions p ON u.position_id = p.id WHERE u.status = 'active' AND u.created_date >= '2024-01-01' ORDER BY u.name ASC, u.created_date DESC LIMIT 10; 4. æ³¨é‡Šè§„èŒƒ -- å•è¡Œæ³¨é‡Šï¼šä½¿ç”¨ # å· # è¿™æ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Š -- å•è¡Œæ³¨é‡Šï¼šä½¿ç”¨åŒæ¨ªçº¿ -- è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Š /* å¤šè¡Œæ³¨é‡Šï¼šä½¿ç”¨æ–œæ æ˜Ÿå· å¯ä»¥è·¨è¶Šå¤šè¡Œ é€‚åˆè¯¦ç»†è¯´æ˜ */ -- å®é™…åº”ç”¨ç¤ºä¾‹ CREATE TABLE users ( id INT AUTO_INCREMENT PRIMARY KEY, -- ç”¨æˆ·IDï¼Œè‡ªå¢ä¸»é”® name VARCHAR(50) NOT NULL, -- ç”¨æˆ·å§“åï¼Œä¸èƒ½ä¸ºç©º email VARCHAR(100) UNIQUE, -- é‚®ç®±åœ°å€ï¼Œå”¯ä¸€çº¦æŸ created_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- åˆ›å»ºæ—¶é—´ï¼Œé»˜è®¤å½“å‰æ—¶é—´ ); æ•°æ®åº“åˆ›å»ºå’Œç®¡ç† 1. åˆ›å»ºæ•°æ®åº“ -- åŸºæœ¬åˆ›å»ºè¯­æ³• CREATE DATABASE IF NOT EXISTS studentinfo; -- å®Œæ•´çš„åˆ›å»ºè¯­æ³•ï¼ˆæ¨èï¼‰ CREATE DATABASE IF NOT EXISTS studentinfo DEFAULT CHARACTER SET = utf8mb4 DEFAULT COLLATE = utf8mb4_unicode_ci; -- æŸ¥çœ‹åˆ›å»ºçš„æ•°æ®åº“ SHOW DATABASES; -- æŸ¥çœ‹æ•°æ®åº“è¯¦ç»†ä¿¡æ¯ SHOW CREATE DATABASE studentinfo; 2. å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ -- UTF-8å­—ç¬¦é›†ï¼ˆæ¨èï¼Œæ”¯æŒå…¨çƒå­—ç¬¦ï¼‰ CREATE DATABASE modern_app DEFAULT CHARACTER SET = utf8mb4 DEFAULT COLLATE = utf8mb4_unicode_ci; -- ç®€ä½“ä¸­æ–‡å­—ç¬¦é›† CREATE DATABASE chinese_app DEFAULT CHARACTER SET = gb2312 DEFAULT COLLATE = gb2312_chinese_ci; -- æŸ¥çœ‹æ”¯æŒçš„å­—ç¬¦é›† SHOW CHARACTER SET; -- æŸ¥çœ‹æ”¯æŒçš„æ ¡å¯¹è§„åˆ™ SHOW COLLATION; 3. æ•°æ®åº“æ“ä½œ -- ä½¿ç”¨æ•°æ®åº“ USE studentinfo; -- æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“ SELECT DATABASE(); -- åˆ é™¤æ•°æ®åº“ï¼ˆè°¨æ…æ“ä½œï¼‰ DROP DATABASE IF EXISTS old_database; -- ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›† ALTER DATABASE studentinfo CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci; è¡¨çš„åˆ›å»ºå’Œç®¡ç† 1. åŸºæœ¬è¡¨ç»“æ„ -- å­¦ç”Ÿä¿¡æ¯è¡¨ CREATE TABLE students ( student_id INT AUTO_INCREMENT PRIMARY KEY, student_name VARCHAR(50) NOT NULL, student_email VARCHAR(100) UNIQUE, student_age INT CHECK (student_age >= 0 AND student_age &lt;= 150), enrollment_date DATE DEFAULT (CURRENT_DATE), status ENUM('active', 'inactive', 'graduated') DEFAULT 'active', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ); -- è¯¾ç¨‹ä¿¡æ¯è¡¨ CREATE TABLE courses ( course_id INT AUTO_INCREMENT PRIMARY KEY, course_name VARCHAR(100) NOT NULL, course_code VARCHAR(20) UNIQUE NOT NULL, credits INT DEFAULT 3, description TEXT, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ); -- é€‰è¯¾å…³ç³»è¡¨ï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰ CREATE TABLE enrollments ( enrollment_id INT AUTO_INCREMENT PRIMARY KEY, student_id INT NOT NULL, course_id INT NOT NULL, enrollment_date DATE DEFAULT (CURRENT_DATE), grade DECIMAL(3,1) CHECK (grade >= 0 AND grade &lt;= 100), status ENUM('enrolled', 'completed', 'dropped') DEFAULT 'enrolled', FOREIGN KEY (student_id) REFERENCES students(student_id) ON DELETE CASCADE, FOREIGN KEY (course_id) REFERENCES courses(course_id) ON DELETE CASCADE, UNIQUE KEY unique_enrollment (student_id, course_id) ); 2. æ•°æ®ç±»å‹é€‰æ‹©æŒ‡å— æ•°æ®ç±»å‹ é€‚ç”¨åœºæ™¯ ç¤ºä¾‹ INT æ•´æ•°IDã€å¹´é¾„ã€æ•°é‡ student_id INT AUTO_INCREMENT VARCHAR(n) å˜é•¿å­—ç¬¦ä¸² name VARCHAR(50) TEXT é•¿æ–‡æœ¬å†…å®¹ description TEXT DECIMAL(m,d) ç²¾ç¡®å°æ•° price DECIMAL(10,2) DATE æ—¥æœŸ birth_date DATE TIMESTAMP æ—¶é—´æˆ³ created_at TIMESTAMP ENUM æšä¸¾å€¼ status ENUM('active', 'inactive') BOOLEAN å¸ƒå°”å€¼ is_active BOOLEAN DEFAULT TRUE 3. çº¦æŸå’Œç´¢å¼• -- æ·»åŠ çº¦æŸ ALTER TABLE students ADD CONSTRAINT chk_age CHECK (student_age >= 16 AND student_age &lt;= 80); -- æ·»åŠ ç´¢å¼• CREATE INDEX idx_student_name ON students(student_name); CREATE INDEX idx_enrollment_date ON students(enrollment_date); -- å¤åˆç´¢å¼• CREATE INDEX idx_student_status_date ON students(status, enrollment_date); -- æŸ¥çœ‹è¡¨ç»“æ„ DESCRIBE students; SHOW CREATE TABLE students; -- æŸ¥çœ‹ç´¢å¼• SHOW INDEX FROM students; åŸºæœ¬æŸ¥è¯¢æ“ä½œ 1. ç®€å•æŸ¥è¯¢ -- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ SELECT * FROM students; -- æŸ¥è¯¢ç‰¹å®šå­—æ®µ SELECT student_name, student_email FROM students; -- æ¡ä»¶æŸ¥è¯¢ SELECT * FROM students WHERE student_age > 20; -- æ¨¡ç³ŠæŸ¥è¯¢ SELECT * FROM students WHERE student_name LIKE 'å¼ %'; -- èŒƒå›´æŸ¥è¯¢ SELECT * FROM students WHERE student_age BETWEEN 18 AND 25; -- å¤šæ¡ä»¶æŸ¥è¯¢ SELECT * FROM students WHERE status = 'active' AND student_age >= 18 AND enrollment_date >= '2024-01-01'; 2. æ’åºå’Œåˆ†é¡µ -- æ’åº SELECT * FROM students ORDER BY student_age DESC, student_name ASC; -- åˆ†é¡µæŸ¥è¯¢ SELECT * FROM students ORDER BY student_id LIMIT 10 OFFSET 20; -- è·³è¿‡å‰20æ¡ï¼Œå–10æ¡ -- MySQLç‰¹æœ‰çš„åˆ†é¡µè¯­æ³• SELECT * FROM students ORDER BY student_id LIMIT 20, 10; -- ä»ç¬¬21æ¡å¼€å§‹ï¼Œå–10æ¡ 3. èšåˆå‡½æ•° -- ç»Ÿè®¡å‡½æ•° SELECT COUNT(*) as total_students, COUNT(DISTINCT status) as status_types, AVG(student_age) as average_age, MIN(student_age) as youngest, MAX(student_age) as oldest, SUM(CASE WHEN status = 'active' THEN 1 ELSE 0 END) as active_count FROM students; -- åˆ†ç»„ç»Ÿè®¡ SELECT status, COUNT(*) as count, AVG(student_age) as avg_age FROM students GROUP BY status HAVING COUNT(*) > 5; æ•°æ®æ“ä½œå®è·µ 1. æ’å…¥æ•°æ® -- å•æ¡æ’å…¥ INSERT INTO students (student_name, student_email, student_age) VALUES ('å¼ ä¸‰', 'zhangsan@example.com', 20); -- æ‰¹é‡æ’å…¥ INSERT INTO students (student_name, student_email, student_age) VALUES ('æå››', 'lisi@example.com', 21), ('ç‹äº”', 'wangwu@example.com', 19), ('èµµå…­', 'zhaoliu@example.com', 22); -- ä»å…¶ä»–è¡¨æ’å…¥ INSERT INTO backup_students (student_name, student_email) SELECT student_name, student_email FROM students WHERE status = 'graduated'; 2. æ›´æ–°æ•°æ® -- å•æ¡æ›´æ–° UPDATE students SET student_email = 'new_email@example.com' WHERE student_id = 1; -- æ‰¹é‡æ›´æ–° UPDATE students SET status = 'inactive' WHERE enrollment_date &lt; '2020-01-01'; -- æ¡ä»¶æ›´æ–° UPDATE students SET student_age = student_age + 1 WHERE MONTH(enrollment_date) = MONTH(CURRENT_DATE); 3. åˆ é™¤æ•°æ® -- æ¡ä»¶åˆ é™¤ DELETE FROM students WHERE status = 'inactive'; -- æ¸…ç©ºè¡¨ï¼ˆä¿ç•™ç»“æ„ï¼‰ TRUNCATE TABLE temp_students; -- åˆ é™¤è¡¨ DROP TABLE IF EXISTS old_table; æ•°æ®åº“è®¾è®¡æœ€ä½³å®è·µ 1. å‘½åè§„èŒƒ -- è¡¨åï¼šä½¿ç”¨å¤æ•°å½¢å¼ï¼Œå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš” CREATE TABLE user_profiles; CREATE TABLE order_items; -- å­—æ®µåï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼Œæœ‰æ„ä¹‰çš„åç§° CREATE TABLE users ( user_id INT AUTO_INCREMENT PRIMARY KEY, first_name VARCHAR(50), last_name VARCHAR(50), email_address VARCHAR(100), phone_number VARCHAR(20), created_at TIMESTAMP, updated_at TIMESTAMP ); 2. æ•°æ®å®Œæ•´æ€§ -- ä¸»é”®çº¦æŸ ALTER TABLE students ADD PRIMARY KEY (student_id); -- å¤–é”®çº¦æŸ ALTER TABLE enrollments ADD CONSTRAINT fk_student FOREIGN KEY (student_id) REFERENCES students(student_id); -- å”¯ä¸€çº¦æŸ ALTER TABLE students ADD UNIQUE (student_email); -- æ£€æŸ¥çº¦æŸ ALTER TABLE students ADD CONSTRAINT chk_age CHECK (student_age >= 0 AND student_age &lt;= 150); -- éç©ºçº¦æŸ ALTER TABLE students MODIFY student_name VARCHAR(50) NOT NULL; 3. æ€§èƒ½ä¼˜åŒ– -- ä¸ºç»å¸¸æŸ¥è¯¢çš„å­—æ®µåˆ›å»ºç´¢å¼• CREATE INDEX idx_student_email ON students(student_email); CREATE INDEX idx_enrollment_date ON students(enrollment_date); -- å¤åˆç´¢å¼•ç”¨äºå¤šå­—æ®µæŸ¥è¯¢ CREATE INDEX idx_status_age ON students(status, student_age); -- æŸ¥çœ‹æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ EXPLAIN SELECT * FROM students WHERE student_email = 'test@example.com'; -- åˆ†æè¡¨ç»Ÿè®¡ä¿¡æ¯ ANALYZE TABLE students; å­¦ä¹ è·¯å¾„å»ºè®® åˆçº§é˜¶æ®µ åŸºç¡€æ¦‚å¿µï¼šç†è§£æ•°æ®åº“ã€è¡¨ã€å­—æ®µçš„æ¦‚å¿µ SQLè¯­æ³•ï¼šæŒæ¡SELECTã€INSERTã€UPDATEã€DELETE æ•°æ®ç±»å‹ï¼šäº†è§£å¸¸ç”¨æ•°æ®ç±»å‹çš„é€‰æ‹© ç®€å•æŸ¥è¯¢ï¼šæ¡ä»¶æŸ¥è¯¢ã€æ’åºã€åˆ†é¡µ ä¸­çº§é˜¶æ®µ è¡¨è®¾è®¡ï¼šä¸»é”®ã€å¤–é”®ã€çº¦æŸçš„ä½¿ç”¨ å¤šè¡¨æŸ¥è¯¢ï¼šJOINæ“ä½œã€å­æŸ¥è¯¢ å‡½æ•°åº”ç”¨ï¼šèšåˆå‡½æ•°ã€å­—ç¬¦ä¸²å‡½æ•°ã€æ—¥æœŸå‡½æ•° ç´¢å¼•ä¼˜åŒ–ï¼šç†è§£ç´¢å¼•åŸç†ï¼Œåˆ›å»ºåˆé€‚çš„ç´¢å¼• é«˜çº§é˜¶æ®µ å­˜å‚¨è¿‡ç¨‹ï¼šç¼–å†™å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ è§¦å‘å™¨ï¼šè‡ªåŠ¨åŒ–æ•°æ®å¤„ç† è§†å›¾åº”ç”¨ï¼šç®€åŒ–å¤æ‚æŸ¥è¯¢ æ€§èƒ½è°ƒä¼˜ï¼šæŸ¥è¯¢ä¼˜åŒ–ã€ç´¢å¼•ä¼˜åŒ– æ€»ç»“ æ•°æ®åº“æŠ€æœ¯æ˜¯è½¯ä»¶å¼€å‘çš„åŸºçŸ³ï¼ŒæŒæ¡å¥½æ•°æ®åº“åŸºç¡€çŸ¥è¯†å¯¹äºä»»ä½•å¼€å‘è€…éƒ½è‡³å…³é‡è¦ã€‚é€šè¿‡ç³»ç»Ÿå­¦ä¹ å’Œå®è·µï¼Œä½ å°†èƒ½å¤Ÿï¼š
...</p></div><footer class=entry-footer><span title='2024-03-11 12:32:05 +0800 CST'>March 11, 2024</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to æ•°æ®åº“åŸºç¡€å…¥é—¨ï¼šä»æ¦‚å¿µåˆ°å®è·µ" href=https://tyhzxh.github.io/posts/database-fundamentals/></a></article><article class=post-entry><header class=entry-header><h2>Javaæ¥å£è¯¦è§£ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨</h2></header><div class=entry-meta><span title='2024-02-28 15:00:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;16 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>Javaæ¥å£æ¦‚è¿° **æ¥å£ï¼ˆInterfaceï¼‰**æ˜¯Javaä¸­å®ç°å¤šé‡ç»§æ‰¿å’Œå®šä¹‰å¥‘çº¦çš„é‡è¦æœºåˆ¶ã€‚æ¥å£å®šä¹‰äº†ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ç­¾åï¼Œä½†ä¸æä¾›å…·ä½“å®ç°ï¼ˆé™¤äº†é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼‰ã€‚æ¥å£æ˜¯Javaé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ã€‚
æ¥å£çš„åŸºæœ¬ç‰¹æ€§ ç‰¹æ€§ æè¿° ç¤ºä¾‹ æŠ½è±¡æ€§ æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤æ˜¯æŠ½è±¡çš„ void method(); å¤šé‡å®ç° ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ class A implements B, C å¸¸é‡å®šä¹‰ æ¥å£ä¸­çš„å˜é‡é»˜è®¤æ˜¯å¸¸é‡ int CONSTANT = 10; ç»§æ‰¿å…³ç³» æ¥å£å¯ä»¥ç»§æ‰¿å…¶ä»–æ¥å£ interface A extends B å¤šæ€æ”¯æŒ æ¥å£å¼•ç”¨å¯ä»¥æŒ‡å‘å®ç°ç±»å¯¹è±¡ Interface obj = new Implementation(); æ¥å£çš„åŸºæœ¬è¯­æ³• æ¥å£å®šä¹‰å’Œå®ç° // åŸºæœ¬æ¥å£å®šä¹‰ public interface Drawable { // å¸¸é‡ï¼ˆé»˜è®¤ public static finalï¼‰ String DEFAULT_COLOR = "BLACK"; int MAX_SIZE = 1000; // æŠ½è±¡æ–¹æ³•ï¼ˆé»˜è®¤ public abstractï¼‰ void draw(); void setColor(String color); void resize(int width, int height); // é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰ default void reset() { setColor(DEFAULT_COLOR); System.out.println("å›¾å½¢å·²é‡ç½®ä¸ºé»˜è®¤çŠ¶æ€"); } // é™æ€æ–¹æ³•ï¼ˆJava 8+ï¼‰ static void printInfo() { System.out.println("è¿™æ˜¯ä¸€ä¸ªå¯ç»˜åˆ¶æ¥å£"); } // ç§æœ‰æ–¹æ³•ï¼ˆJava 9+ï¼‰ private void validateColor(String color) { if (color == null || color.isEmpty()) { throw new IllegalArgumentException("é¢œè‰²ä¸èƒ½ä¸ºç©º"); } } } // æ¥å£å®ç° public class Circle implements Drawable { private String color; private int radius; public Circle(int radius) { this.radius = radius; this.color = DEFAULT_COLOR; } @Override public void draw() { System.out.println("ç»˜åˆ¶ä¸€ä¸ª" + color + "çš„åœ†å½¢ï¼ŒåŠå¾„ï¼š" + radius); } @Override public void setColor(String color) { this.color = color; } @Override public void resize(int width, int height) { // å¯¹äºåœ†å½¢ï¼Œä½¿ç”¨è¾ƒå°çš„å€¼ä½œä¸ºåŠå¾„ this.radius = Math.min(width, height) / 2; } // å¯ä»¥é‡å†™é»˜è®¤æ–¹æ³• @Override public void reset() { this.radius = 10; Drawable.super.reset(); // è°ƒç”¨æ¥å£çš„é»˜è®¤å®ç° } } // å¤šæ¥å£å®ç° public interface Movable { void move(int x, int y); void stop(); } public interface Rotatable { void rotate(double angle); } public class Shape implements Drawable, Movable, Rotatable { private String color = Drawable.DEFAULT_COLOR; private int x, y; private double rotation; @Override public void draw() { System.out.println("ç»˜åˆ¶å½¢çŠ¶åœ¨ä½ç½® (" + x + ", " + y + ")ï¼Œæ—‹è½¬è§’åº¦ï¼š" + rotation); } @Override public void setColor(String color) { this.color = color; } @Override public void resize(int width, int height) { System.out.println("è°ƒæ•´å¤§å°ä¸ºï¼š" + width + "x" + height); } @Override public void move(int x, int y) { this.x = x; this.y = y; System.out.println("ç§»åŠ¨åˆ°ä½ç½®ï¼š(" + x + ", " + y + ")"); } @Override public void stop() { System.out.println("åœæ­¢ç§»åŠ¨"); } @Override public void rotate(double angle) { this.rotation = angle; System.out.println("æ—‹è½¬è§’åº¦ï¼š" + angle + "åº¦"); } } // ä½¿ç”¨ç¤ºä¾‹ public class InterfaceExample { public static void main(String[] args) { // å¤šæ€ä½¿ç”¨ Drawable drawable = new Circle(5); drawable.draw(); drawable.setColor("RED"); drawable.draw(); drawable.reset(); // é™æ€æ–¹æ³•è°ƒç”¨ Drawable.printInfo(); // å¤šæ¥å£å®ç° Shape shape = new Shape(); shape.draw(); shape.move(10, 20); shape.rotate(45.0); // æ¥å£å¼•ç”¨ Movable movable = shape; movable.move(30, 40); Rotatable rotatable = shape; rotatable.rotate(90.0); } } æ ‡è®°æ¥å£è¯¦è§£ Serializableæ¥å£ Serializableæ˜¯Javaä¸­æœ€é‡è¦çš„æ ‡è®°æ¥å£ä¹‹ä¸€ï¼Œç”¨äºæ ‡è¯†ç±»çš„å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚
...</p></div><footer class=entry-footer><span title='2024-02-28 15:00:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;16 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Javaæ¥å£è¯¦è§£ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨" href=https://tyhzxh.github.io/posts/java-interfaces-guide/></a></article><article class=post-entry><header class=entry-header><h2>TCPåè®®æ·±åº¦è§£æï¼šå¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶</h2></header><div class=entry-meta><span title='2024-02-28 14:30:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;14 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>TCPåè®®æ¦‚è¿° **TCPï¼ˆTransmission Control Protocolï¼‰**æ˜¯äº’è”ç½‘åè®®å¥—ä»¶ä¸­çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ï¼Œä½äºä¼ è¾“å±‚ï¼Œä¸ºåº”ç”¨å±‚æä¾›å¯é çš„ã€é¢å‘è¿æ¥çš„å­—èŠ‚æµæœåŠ¡ã€‚TCPç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€é¡ºåºæ€§å’Œå¯é æ€§ï¼Œæ˜¯ç°ä»£äº’è”ç½‘é€šä¿¡çš„åŸºçŸ³ã€‚
TCPçš„æ ¸å¿ƒç‰¹æ€§ ç‰¹æ€§ æè¿° ä¼˜åŠ¿ åº”ç”¨åœºæ™¯ é¢å‘è¿æ¥ é€šä¿¡å‰éœ€å»ºç«‹è¿æ¥ ç¡®ä¿é€šä¿¡åŒæ–¹å‡†å¤‡å°±ç»ª éœ€è¦å¯é ä¼ è¾“çš„åº”ç”¨ å¯é ä¼ è¾“ ä¿è¯æ•°æ®å®Œæ•´åˆ°è¾¾ æ•°æ®ä¸ä¸¢å¤±ã€ä¸é‡å¤ æ–‡ä»¶ä¼ è¾“ã€ç½‘é¡µæµè§ˆ æµé‡æ§åˆ¶ æ§åˆ¶å‘é€é€Ÿç‡ é˜²æ­¢æ¥æ”¶æ–¹ç¼“å†²åŒºæº¢å‡º å¤„ç†èƒ½åŠ›ä¸åŒçš„è®¾å¤‡ æ‹¥å¡æ§åˆ¶ é¿å…ç½‘ç»œæ‹¥å¡ æé«˜ç½‘ç»œæ•´ä½“æ€§èƒ½ é«˜è´Ÿè½½ç½‘ç»œç¯å¢ƒ å…¨åŒå·¥é€šä¿¡ åŒå‘åŒæ—¶ä¼ è¾“ æé«˜é€šä¿¡æ•ˆç‡ å®æ—¶äº¤äº’åº”ç”¨ TCPæŠ¥æ–‡æ®µç»“æ„ TCPå¤´éƒ¨æ ¼å¼ class TCPHeader: """TCPå¤´éƒ¨ç»“æ„è§£æ""" def __init__(self): self.header_fields = { "æºç«¯å£": {"ä½ç½®": "0-15", "é•¿åº¦": "16ä½", "æè¿°": "å‘é€æ–¹ç«¯å£å·"}, "ç›®æ ‡ç«¯å£": {"ä½ç½®": "16-31", "é•¿åº¦": "16ä½", "æè¿°": "æ¥æ”¶æ–¹ç«¯å£å·"}, "åºåˆ—å·": {"ä½ç½®": "32-63", "é•¿åº¦": "32ä½", "æè¿°": "æ•°æ®å­—èŠ‚çš„åºåˆ—å·"}, "ç¡®è®¤å·": {"ä½ç½®": "64-95", "é•¿åº¦": "32ä½", "æè¿°": "æœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªåºåˆ—å·"}, "å¤´éƒ¨é•¿åº¦": {"ä½ç½®": "96-99", "é•¿åº¦": "4ä½", "æè¿°": "TCPå¤´éƒ¨é•¿åº¦"}, "ä¿ç•™ä½": {"ä½ç½®": "100-105", "é•¿åº¦": "6ä½", "æè¿°": "ä¿ç•™å­—æ®µ"}, "æ§åˆ¶ä½": {"ä½ç½®": "106-111", "é•¿åº¦": "6ä½", "æè¿°": "URGã€ACKã€PSHã€RSTã€SYNã€FIN"}, "çª—å£å¤§å°": {"ä½ç½®": "112-127", "é•¿åº¦": "16ä½", "æè¿°": "æ¥æ”¶çª—å£å¤§å°"}, "æ ¡éªŒå’Œ": {"ä½ç½®": "128-143", "é•¿åº¦": "16ä½", "æè¿°": "é”™è¯¯æ£€æµ‹"}, "ç´§æ€¥æŒ‡é’ˆ": {"ä½ç½®": "144-159", "é•¿åº¦": "16ä½", "æè¿°": "ç´§æ€¥æ•°æ®æŒ‡é’ˆ"}, "é€‰é¡¹": {"ä½ç½®": "160+", "é•¿åº¦": "å¯å˜", "æè¿°": "TCPé€‰é¡¹å­—æ®µ"} } def parse_flags(self, flags_byte): """è§£æTCPæ ‡å¿—ä½""" flags = { "URG": bool(flags_byte & 0x20), # ç´§æ€¥ "ACK": bool(flags_byte & 0x10), # ç¡®è®¤ "PSH": bool(flags_byte & 0x08), # æ¨é€ "RST": bool(flags_byte & 0x04), # é‡ç½® "SYN": bool(flags_byte & 0x02), # åŒæ­¥ "FIN": bool(flags_byte & 0x01) # ç»“æŸ } return flags def create_segment(self, src_port, dst_port, seq_num, ack_num, flags, window_size, data=b''): """åˆ›å»ºTCPæŠ¥æ–‡æ®µ""" segment = { "æºç«¯å£": src_port, "ç›®æ ‡ç«¯å£": dst_port, "åºåˆ—å·": seq_num, "ç¡®è®¤å·": ack_num, "å¤´éƒ¨é•¿åº¦": 20, # åŸºæœ¬å¤´éƒ¨é•¿åº¦ "æ ‡å¿—ä½": flags, "çª—å£å¤§å°": window_size, "æ ¡éªŒå’Œ": 0, # éœ€è¦è®¡ç®— "æ•°æ®": data, "æ•°æ®é•¿åº¦": len(data) } # è®¡ç®—æ ¡éªŒå’Œ segment["æ ¡éªŒå’Œ"] = self.calculate_checksum(segment) return segment def calculate_checksum(self, segment): """è®¡ç®—TCPæ ¡éªŒå’Œï¼ˆç®€åŒ–ç‰ˆï¼‰""" # å®é™…å®ç°éœ€è¦åŒ…å«ä¼ªå¤´éƒ¨ checksum = 0 checksum += segment["æºç«¯å£"] checksum += segment["ç›®æ ‡ç«¯å£"] checksum += (segment["åºåˆ—å·"] >> 16) + (segment["åºåˆ—å·"] & 0xFFFF) checksum += (segment["ç¡®è®¤å·"] >> 16) + (segment["ç¡®è®¤å·"] & 0xFFFF) # å¤„ç†è¿›ä½ while checksum >> 16: checksum = (checksum & 0xFFFF) + (checksum >> 16) return ~checksum & 0xFFFF # TCPæŠ¥æ–‡æ®µç¤ºä¾‹ tcp_header = TCPHeader() # åˆ›å»ºSYNæŠ¥æ–‡æ®µ syn_segment = tcp_header.create_segment( src_port=12345, dst_port=80, seq_num=1000, ack_num=0, flags={"SYN": True, "ACK": False}, window_size=65535 ) print("SYNæŠ¥æ–‡æ®µ:", syn_segment) # è§£ææ ‡å¿—ä½ flags_byte = 0x02 # SYNæ ‡å¿— parsed_flags = tcp_header.parse_flags(flags_byte) print("è§£æçš„æ ‡å¿—ä½:", parsed_flags) TCPè¿æ¥ç®¡ç† ä¸‰æ¬¡æ¡æ‰‹ï¼ˆè¿æ¥å»ºç«‹ï¼‰ class TCPConnection: """TCPè¿æ¥ç®¡ç†""" def __init__(self): self.state = "CLOSED" self.seq_num = 0 self.ack_num = 0 self.connections = {} def three_way_handshake(self, client_id, server_id): """ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹æ¨¡æ‹Ÿ""" handshake_steps = [] # ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·ç«¯å‘é€SYN client_seq = 1000 step1 = { "æ­¥éª¤": 1, "å‘é€æ–¹": client_id, "æ¥æ”¶æ–¹": server_id, "æŠ¥æ–‡ç±»å‹": "SYN", "åºåˆ—å·": client_seq, "ç¡®è®¤å·": 0, "æ ‡å¿—ä½": {"SYN": True, "ACK": False}, "æè¿°": "å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥", "å®¢æˆ·ç«¯çŠ¶æ€": "SYN_SENT", "æœåŠ¡å™¨çŠ¶æ€": "LISTEN" } handshake_steps.append(step1) # ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨å‘é€SYN+ACK server_seq = 2000 step2 = { "æ­¥éª¤": 2, "å‘é€æ–¹": server_id, "æ¥æ”¶æ–¹": client_id, "æŠ¥æ–‡ç±»å‹": "SYN+ACK", "åºåˆ—å·": server_seq, "ç¡®è®¤å·": client_seq + 1, "æ ‡å¿—ä½": {"SYN": True, "ACK": True}, "æè¿°": "æœåŠ¡å™¨ç¡®è®¤è¿æ¥è¯·æ±‚å¹¶å‘é€è‡ªå·±çš„è¿æ¥è¯·æ±‚", "å®¢æˆ·ç«¯çŠ¶æ€": "SYN_SENT", "æœåŠ¡å™¨çŠ¶æ€": "SYN_RCVD" } handshake_steps.append(step2) # ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯å‘é€ACK step3 = { "æ­¥éª¤": 3, "å‘é€æ–¹": client_id, "æ¥æ”¶æ–¹": server_id, "æŠ¥æ–‡ç±»å‹": "ACK", "åºåˆ—å·": client_seq + 1, "ç¡®è®¤å·": server_seq + 1, "æ ‡å¿—ä½": {"SYN": False, "ACK": True}, "æè¿°": "å®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚", "å®¢æˆ·ç«¯çŠ¶æ€": "ESTABLISHED", "æœåŠ¡å™¨çŠ¶æ€": "ESTABLISHED" } handshake_steps.append(step3) # å»ºç«‹è¿æ¥ connection_id = f"{client_id}-{server_id}" self.connections[connection_id] = { "å®¢æˆ·ç«¯": client_id, "æœåŠ¡å™¨": server_id, "çŠ¶æ€": "ESTABLISHED", "å®¢æˆ·ç«¯åºåˆ—å·": client_seq + 1, "æœåŠ¡å™¨åºåˆ—å·": server_seq + 1, "å»ºç«‹æ—¶é—´": "2024-02-28T14:30:00Z" } return { "æ¡æ‰‹æ­¥éª¤": handshake_steps, "è¿æ¥ä¿¡æ¯": self.connections[connection_id], "è¿æ¥ID": connection_id } def four_way_handshake(self, connection_id): """å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹æ¨¡æ‹Ÿ""" if connection_id not in self.connections: return {"é”™è¯¯": "è¿æ¥ä¸å­˜åœ¨"} connection = self.connections[connection_id] client_id = connection["å®¢æˆ·ç«¯"] server_id = connection["æœåŠ¡å™¨"] handshake_steps = [] # ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·ç«¯å‘é€FIN step1 = { "æ­¥éª¤": 1, "å‘é€æ–¹": client_id, "æ¥æ”¶æ–¹": server_id, "æŠ¥æ–‡ç±»å‹": "FIN", "æ ‡å¿—ä½": {"FIN": True, "ACK": False}, "æè¿°": "å®¢æˆ·ç«¯è¯·æ±‚å…³é—­è¿æ¥", "å®¢æˆ·ç«¯çŠ¶æ€": "FIN_WAIT_1", "æœåŠ¡å™¨çŠ¶æ€": "ESTABLISHED" } handshake_steps.append(step1) # ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨å‘é€ACK step2 = { "æ­¥éª¤": 2, "å‘é€æ–¹": server_id, "æ¥æ”¶æ–¹": client_id, "æŠ¥æ–‡ç±»å‹": "ACK", "æ ‡å¿—ä½": {"FIN": False, "ACK": True}, "æè¿°": "æœåŠ¡å™¨ç¡®è®¤å®¢æˆ·ç«¯çš„å…³é—­è¯·æ±‚", "å®¢æˆ·ç«¯çŠ¶æ€": "FIN_WAIT_2", "æœåŠ¡å™¨çŠ¶æ€": "CLOSE_WAIT" } handshake_steps.append(step2) # ç¬¬ä¸‰æ­¥ï¼šæœåŠ¡å™¨å‘é€FIN step3 = { "æ­¥éª¤": 3, "å‘é€æ–¹": server_id, "æ¥æ”¶æ–¹": client_id, "æŠ¥æ–‡ç±»å‹": "FIN", "æ ‡å¿—ä½": {"FIN": True, "ACK": False}, "æè¿°": "æœåŠ¡å™¨è¯·æ±‚å…³é—­è¿æ¥", "å®¢æˆ·ç«¯çŠ¶æ€": "FIN_WAIT_2", "æœåŠ¡å™¨çŠ¶æ€": "LAST_ACK" } handshake_steps.append(step3) # ç¬¬å››æ­¥ï¼šå®¢æˆ·ç«¯å‘é€ACK step4 = { "æ­¥éª¤": 4, "å‘é€æ–¹": client_id, "æ¥æ”¶æ–¹": server_id, "æŠ¥æ–‡ç±»å‹": "ACK", "æ ‡å¿—ä½": {"FIN": False, "ACK": True}, "æè¿°": "å®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡å™¨çš„å…³é—­è¯·æ±‚", "å®¢æˆ·ç«¯çŠ¶æ€": "TIME_WAIT", "æœåŠ¡å™¨çŠ¶æ€": "CLOSED" } handshake_steps.append(step4) # åˆ é™¤è¿æ¥ del self.connections[connection_id] return { "æŒ¥æ‰‹æ­¥éª¤": handshake_steps, "è¿æ¥çŠ¶æ€": "å·²å…³é—­" } # è¿æ¥ç®¡ç†ç¤ºä¾‹ tcp_conn = TCPConnection() # å»ºç«‹è¿æ¥ connection_result = tcp_conn.three_way_handshake("Client_A", "Server_B") print("ä¸‰æ¬¡æ¡æ‰‹ç»“æœ:") for step in connection_result["æ¡æ‰‹æ­¥éª¤"]: print(f"æ­¥éª¤{step['æ­¥éª¤']}: {step['å‘é€æ–¹']} -> {step['æ¥æ”¶æ–¹']} ({step['æŠ¥æ–‡ç±»å‹']}) - {step['æè¿°']}") print(f"\nè¿æ¥å»ºç«‹æˆåŠŸ: {connection_result['è¿æ¥ID']}") # å…³é—­è¿æ¥ close_result = tcp_conn.four_way_handshake(connection_result['è¿æ¥ID']) print("\nå››æ¬¡æŒ¥æ‰‹ç»“æœ:") for step in close_result["æŒ¥æ‰‹æ­¥éª¤"]: print(f"æ­¥éª¤{step['æ­¥éª¤']}: {step['å‘é€æ–¹']} -> {step['æ¥æ”¶æ–¹']} ({step['æŠ¥æ–‡ç±»å‹']}) - {step['æè¿°']}") TCPçŠ¶æ€è½¬æ¢å›¾ class TCPStateMachine: """TCPçŠ¶æ€æœº""" def __init__(self): self.states = { "CLOSED": "å…³é—­çŠ¶æ€", "LISTEN": "ç›‘å¬çŠ¶æ€", "SYN_SENT": "å·²å‘é€SYN", "SYN_RCVD": "å·²æ¥æ”¶SYN", "ESTABLISHED": "è¿æ¥å·²å»ºç«‹", "FIN_WAIT_1": "ç­‰å¾…FINç¡®è®¤", "FIN_WAIT_2": "ç­‰å¾…å¯¹æ–¹FIN", "CLOSE_WAIT": "ç­‰å¾…å…³é—­", "CLOSING": "æ­£åœ¨å…³é—­", "LAST_ACK": "æœ€åç¡®è®¤", "TIME_WAIT": "æ—¶é—´ç­‰å¾…" } self.transitions = { ("CLOSED", "ä¸»åŠ¨æ‰“å¼€"): "SYN_SENT", ("CLOSED", "è¢«åŠ¨æ‰“å¼€"): "LISTEN", ("LISTEN", "æ”¶åˆ°SYN"): "SYN_RCVD", ("SYN_SENT", "æ”¶åˆ°SYN+ACK"): "ESTABLISHED", ("SYN_RCVD", "æ”¶åˆ°ACK"): "ESTABLISHED", ("ESTABLISHED", "ä¸»åŠ¨å…³é—­"): "FIN_WAIT_1", ("ESTABLISHED", "æ”¶åˆ°FIN"): "CLOSE_WAIT", ("FIN_WAIT_1", "æ”¶åˆ°ACK"): "FIN_WAIT_2", ("FIN_WAIT_1", "æ”¶åˆ°FIN"): "CLOSING", ("FIN_WAIT_2", "æ”¶åˆ°FIN"): "TIME_WAIT", ("CLOSE_WAIT", "ä¸»åŠ¨å…³é—­"): "LAST_ACK", ("CLOSING", "æ”¶åˆ°ACK"): "TIME_WAIT", ("LAST_ACK", "æ”¶åˆ°ACK"): "CLOSED", ("TIME_WAIT", "è¶…æ—¶"): "CLOSED" } def get_next_state(self, current_state, event): """è·å–ä¸‹ä¸€ä¸ªçŠ¶æ€""" transition = (current_state, event) return self.transitions.get(transition, current_state) def simulate_connection_lifecycle(self): """æ¨¡æ‹Ÿè¿æ¥ç”Ÿå‘½å‘¨æœŸ""" lifecycle = [] # å®¢æˆ·ç«¯çŠ¶æ€å˜åŒ– client_states = [ ("CLOSED", "ä¸»åŠ¨æ‰“å¼€", "SYN_SENT"), ("SYN_SENT", "æ”¶åˆ°SYN+ACK", "ESTABLISHED"), ("ESTABLISHED", "ä¸»åŠ¨å…³é—­", "FIN_WAIT_1"), ("FIN_WAIT_1", "æ”¶åˆ°ACK", "FIN_WAIT_2"), ("FIN_WAIT_2", "æ”¶åˆ°FIN", "TIME_WAIT"), ("TIME_WAIT", "è¶…æ—¶", "CLOSED") ] # æœåŠ¡å™¨çŠ¶æ€å˜åŒ– server_states = [ ("CLOSED", "è¢«åŠ¨æ‰“å¼€", "LISTEN"), ("LISTEN", "æ”¶åˆ°SYN", "SYN_RCVD"), ("SYN_RCVD", "æ”¶åˆ°ACK", "ESTABLISHED"), ("ESTABLISHED", "æ”¶åˆ°FIN", "CLOSE_WAIT"), ("CLOSE_WAIT", "ä¸»åŠ¨å…³é—­", "LAST_ACK"), ("LAST_ACK", "æ”¶åˆ°ACK", "CLOSED") ] return { "å®¢æˆ·ç«¯çŠ¶æ€å˜åŒ–": client_states, "æœåŠ¡å™¨çŠ¶æ€å˜åŒ–": server_states } # çŠ¶æ€æœºç¤ºä¾‹ state_machine = TCPStateMachine() lifecycle = state_machine.simulate_connection_lifecycle() print("TCPè¿æ¥ç”Ÿå‘½å‘¨æœŸ:") print("\nå®¢æˆ·ç«¯çŠ¶æ€å˜åŒ–:") for current, event, next_state in lifecycle["å®¢æˆ·ç«¯çŠ¶æ€å˜åŒ–"]: print(f" {current} --[{event}]--> {next_state}") print("\næœåŠ¡å™¨çŠ¶æ€å˜åŒ–:") for current, event, next_state in lifecycle["æœåŠ¡å™¨çŠ¶æ€å˜åŒ–"]: print(f" {current} --[{event}]--> {next_state}") TCPå¯é ä¼ è¾“æœºåˆ¶ åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶ class TCPReliableTransmission: """TCPå¯é ä¼ è¾“æœºåˆ¶""" def __init__(self, initial_seq=1000): self.seq_num = initial_seq self.ack_num = 0 self.send_buffer = {} self.receive_buffer = {} self.expected_seq = initial_seq self.rtt_samples = [] self.rto = 1.0 # é‡ä¼ è¶…æ—¶æ—¶é—´ def send_data(self, data, segment_size=1024): """å‘é€æ•°æ®""" segments = [] data_bytes = data.encode() if isinstance(data, str) else data # åˆ†æ®µå‘é€ for i in range(0, len(data_bytes), segment_size): segment_data = data_bytes[i:i + segment_size] segment = { "åºåˆ—å·": self.seq_num, "æ•°æ®": segment_data, "é•¿åº¦": len(segment_data), "å‘é€æ—¶é—´": time.time(), "é‡ä¼ æ¬¡æ•°": 0, "å·²ç¡®è®¤": False } segments.append(segment) self.send_buffer[self.seq_num] = segment self.seq_num += len(segment_data) return segments def receive_data(self, segment): """æ¥æ”¶æ•°æ®""" seq_num = segment["åºåˆ—å·"] data = segment["æ•°æ®"] data_len = len(data) # æ£€æŸ¥åºåˆ—å· if seq_num == self.expected_seq: # æŒ‰åºåˆ°è¾¾ self.receive_buffer[seq_num] = segment self.expected_seq += data_len # æ£€æŸ¥ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰è¿ç»­çš„æ•°æ® while self.expected_seq in self.receive_buffer: next_segment = self.receive_buffer[self.expected_seq] self.expected_seq += len(next_segment["æ•°æ®"]) return { "çŠ¶æ€": "æŒ‰åºæ¥æ”¶", "ç¡®è®¤å·": self.expected_seq, "æ¥æ”¶æ•°æ®": data.decode() if isinstance(data, bytes) else data } elif seq_num > self.expected_seq: # å¤±åºåˆ°è¾¾ï¼Œç¼“å­˜æ•°æ® self.receive_buffer[seq_num] = segment return { "çŠ¶æ€": "å¤±åºæ¥æ”¶", "ç¡®è®¤å·": self.expected_seq, # å‘é€æœŸæœ›çš„åºåˆ—å· "ç¼“å­˜æ•°æ®": data.decode() if isinstance(data, bytes) else data } else: # é‡å¤æ•°æ® return { "çŠ¶æ€": "é‡å¤æ•°æ®", "ç¡®è®¤å·": self.expected_seq, "ä¸¢å¼ƒæ•°æ®": data.decode() if isinstance(data, bytes) else data } def process_ack(self, ack_num): """å¤„ç†ç¡®è®¤""" confirmed_segments = [] # ç¡®è®¤æ‰€æœ‰åºåˆ—å·å°äºack_numçš„æ®µ for seq_num in list(self.send_buffer.keys()): if seq_num &lt; ack_num: segment = self.send_buffer[seq_num] segment["å·²ç¡®è®¤"] = True confirmed_segments.append(segment) # è®¡ç®—RTT if "å‘é€æ—¶é—´" in segment: rtt = time.time() - segment["å‘é€æ—¶é—´"] self.rtt_samples.append(rtt) self.update_rto() del self.send_buffer[seq_num] return { "ç¡®è®¤çš„æ®µæ•°": len(confirmed_segments), "å‰©ä½™æœªç¡®è®¤æ®µæ•°": len(self.send_buffer), "å½“å‰RTO": self.rto } def update_rto(self): """æ›´æ–°é‡ä¼ è¶…æ—¶æ—¶é—´""" if not self.rtt_samples: return # ç®€åŒ–çš„RTOè®¡ç®— avg_rtt = sum(self.rtt_samples[-10:]) / min(len(self.rtt_samples), 10) self.rto = max(1.0, avg_rtt * 2) # ç®€å•çš„RTOç®—æ³• def check_timeout(self): """æ£€æŸ¥è¶…æ—¶é‡ä¼ """ current_time = time.time() timeout_segments = [] for seq_num, segment in self.send_buffer.items(): if not segment["å·²ç¡®è®¤"]: elapsed = current_time - segment["å‘é€æ—¶é—´"] if elapsed > self.rto: segment["é‡ä¼ æ¬¡æ•°"] += 1 segment["å‘é€æ—¶é—´"] = current_time timeout_segments.append(segment) return timeout_segments # å¯é ä¼ è¾“ç¤ºä¾‹ import time sender = TCPReliableTransmission(initial_seq=1000) receiver = TCPReliableTransmission(initial_seq=1000) # å‘é€æ•°æ® message = "Hello, TCP World! This is a test message for reliable transmission." segments = sender.send_data(message, segment_size=10) print("å‘é€çš„æ•°æ®æ®µ:") for i, segment in enumerate(segments): print(f"æ®µ{i+1}: åºåˆ—å·={segment['åºåˆ—å·']}, é•¿åº¦={segment['é•¿åº¦']}, æ•°æ®='{segment['æ•°æ®'].decode()}'") print("\næ¥æ”¶è¿‡ç¨‹:") # æ¨¡æ‹ŸæŒ‰åºæ¥æ”¶ for segment in segments[:3]: result = receiver.receive_data(segment) print(f"æ¥æ”¶æ®µ {segment['åºåˆ—å·']}: {result['çŠ¶æ€']}, ç¡®è®¤å·={result['ç¡®è®¤å·']}") # æ¨¡æ‹Ÿå¤±åºæ¥æ”¶ï¼ˆè·³è¿‡ä¸€ä¸ªæ®µï¼‰ if len(segments) > 4: result = receiver.receive_data(segments[4]) print(f"æ¥æ”¶æ®µ {segments[4]['åºåˆ—å·']}: {result['çŠ¶æ€']}, ç¡®è®¤å·={result['ç¡®è®¤å·']}") # æ¥æ”¶ç¼ºå¤±çš„æ®µ if len(segments) > 3: result = receiver.receive_data(segments[3]) print(f"æ¥æ”¶æ®µ {segments[3]['åºåˆ—å·']}: {result['çŠ¶æ€']}, ç¡®è®¤å·={result['ç¡®è®¤å·']}") TCPæµé‡æ§åˆ¶ æ»‘åŠ¨çª—å£æœºåˆ¶ class TCPFlowControl: """TCPæµé‡æ§åˆ¶""" def __init__(self, window_size=65535): self.window_size = window_size self.send_window = { "base": 1000, # å‘é€çª—å£åŸºåºå· "next_seq": 1000, # ä¸‹ä¸€ä¸ªå‘é€åºå· "size": window_size, # çª—å£å¤§å° "used": 0 # å·²ä½¿ç”¨çª—å£å¤§å° } self.receive_window = { "base": 1000, # æ¥æ”¶çª—å£åŸºåºå· "size": window_size, # çª—å£å¤§å° "available": window_size, # å¯ç”¨çª—å£å¤§å° "buffer": {} # æ¥æ”¶ç¼“å†²åŒº } def can_send(self, data_size): """æ£€æŸ¥æ˜¯å¦å¯ä»¥å‘é€æ•°æ®""" available_window = self.send_window["size"] - self.send_window["used"] return data_size &lt;= available_window def send_segment(self, data_size): """å‘é€æ•°æ®æ®µ""" if not self.can_send(data_size): return { "çŠ¶æ€": "çª—å£å·²æ»¡", "å¯ç”¨çª—å£": self.send_window["size"] - self.send_window["used"], "è¯·æ±‚å¤§å°": data_size } # å‘é€æ•°æ® seq_num = self.send_window["next_seq"] self.send_window["next_seq"] += data_size self.send_window["used"] += data_size return { "çŠ¶æ€": "å‘é€æˆåŠŸ", "åºåˆ—å·": seq_num, "æ•°æ®å¤§å°": data_size, "å‰©ä½™çª—å£": self.send_window["size"] - self.send_window["used"] } def receive_ack(self, ack_num): """æ¥æ”¶ç¡®è®¤""" if ack_num > self.send_window["base"]: # æ»‘åŠ¨å‘é€çª—å£ acked_bytes = ack_num - self.send_window["base"] self.send_window["base"] = ack_num self.send_window["used"] -= acked_bytes return { "çŠ¶æ€": "çª—å£æ»‘åŠ¨", "ç¡®è®¤å­—èŠ‚æ•°": acked_bytes, "æ–°çª—å£åŸºåºå·": self.send_window["base"], "å¯ç”¨çª—å£": self.send_window["size"] - self.send_window["used"] } return {"çŠ¶æ€": "é‡å¤ç¡®è®¤", "ç¡®è®¤å·": ack_num} def receive_segment(self, seq_num, data_size): """æ¥æ”¶æ•°æ®æ®µ""" # æ£€æŸ¥æ˜¯å¦åœ¨æ¥æ”¶çª—å£å†… window_end = self.receive_window["base"] + self.receive_window["size"] if seq_num &lt; self.receive_window["base"]: return {"çŠ¶æ€": "é‡å¤æ•°æ®", "åºåˆ—å·": seq_num} if seq_num >= window_end: return {"çŠ¶æ€": "è¶…å‡ºçª—å£", "åºåˆ—å·": seq_num} # æ¥æ”¶æ•°æ® self.receive_window["buffer"][seq_num] = data_size # æ£€æŸ¥æ˜¯å¦å¯ä»¥æ»‘åŠ¨çª—å£ while self.receive_window["base"] in self.receive_window["buffer"]: data_size = self.receive_window["buffer"][self.receive_window["base"]] del self.receive_window["buffer"][self.receive_window["base"]] self.receive_window["base"] += data_size # æ›´æ–°å¯ç”¨çª—å£ self.receive_window["available"] = self.receive_window["size"] - len(self.receive_window["buffer"]) return { "çŠ¶æ€": "æ¥æ”¶æˆåŠŸ", "ç¡®è®¤å·": self.receive_window["base"], "çª—å£å¤§å°": self.receive_window["available"] } def update_window_size(self, new_size): """æ›´æ–°çª—å£å¤§å°""" old_size = self.receive_window["size"] self.receive_window["size"] = new_size self.receive_window["available"] = new_size - len(self.receive_window["buffer"]) return { "æ—§çª—å£å¤§å°": old_size, "æ–°çª—å£å¤§å°": new_size, "å¯ç”¨çª—å£": self.receive_window["available"] } # æµé‡æ§åˆ¶ç¤ºä¾‹ flow_control = TCPFlowControl(window_size=1000) print("TCPæµé‡æ§åˆ¶ç¤ºä¾‹:") print(f"åˆå§‹å‘é€çª—å£: {flow_control.send_window}") print(f"åˆå§‹æ¥æ”¶çª—å£: {flow_control.receive_window}") # å‘é€æ•°æ® print("\nå‘é€æ•°æ®:") for i, size in enumerate([300, 400, 200, 150], 1): result = flow_control.send_segment(size) print(f"å‘é€{i}: {result}") # æ¥æ”¶ç¡®è®¤ print("\næ¥æ”¶ç¡®è®¤:") ack_result = flow_control.receive_ack(1700) # ç¡®è®¤å‰700å­—èŠ‚ print(f"ç¡®è®¤ç»“æœ: {ack_result}") # ç»§ç»­å‘é€ print("\nç»§ç»­å‘é€:") result = flow_control.send_segment(500) print(f"å‘é€ç»“æœ: {result}") TCPæ‹¥å¡æ§åˆ¶ æ‹¥å¡æ§åˆ¶ç®—æ³• class TCPCongestionControl: """TCPæ‹¥å¡æ§åˆ¶""" def __init__(self): self.cwnd = 1 # æ‹¥å¡çª—å£ï¼ˆMSSå•ä½ï¼‰ self.ssthresh = 64 # æ…¢å¯åŠ¨é˜ˆå€¼ self.mss = 1460 # æœ€å¤§æ®µå¤§å° self.state = "slow_start" # æ‹¥å¡æ§åˆ¶çŠ¶æ€ self.dup_ack_count = 0 # é‡å¤ACKè®¡æ•° self.rtt_samples = [] self.rto = 1.0 self.algorithms = { "Reno": self.reno_algorithm, "Cubic": self.cubic_algorithm, "BBR": self.bbr_algorithm } def reno_algorithm(self, event, **kwargs): """TCP Renoç®—æ³•""" if event == "ack_received": if self.state == "slow_start": # æ…¢å¯åŠ¨ï¼šæ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwndå¢åŠ 1 self.cwnd += 1 if self.cwnd >= self.ssthresh: self.state = "congestion_avoidance" elif self.state == "congestion_avoidance": # æ‹¥å¡é¿å…ï¼šæ¯ä¸ªRTTï¼Œcwndå¢åŠ 1 self.cwnd += 1.0 / self.cwnd self.dup_ack_count = 0 elif event == "duplicate_ack": self.dup_ack_count += 1 if self.dup_ack_count == 3: # å¿«é€Ÿé‡ä¼  self.ssthresh = max(self.cwnd / 2, 2) self.cwnd = self.ssthresh + 3 self.state = "fast_recovery" elif self.state == "fast_recovery": self.cwnd += 1 elif event == "timeout": # è¶…æ—¶é‡ä¼  self.ssthresh = max(self.cwnd / 2, 2) self.cwnd = 1 self.state = "slow_start" self.dup_ack_count = 0 elif event == "new_ack" and self.state == "fast_recovery": # å¿«é€Ÿæ¢å¤ç»“æŸ self.cwnd = self.ssthresh self.state = "congestion_avoidance" self.dup_ack_count = 0 def cubic_algorithm(self, event, **kwargs): """TCP CUBICç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰""" if not hasattr(self, 'cubic_state'): self.cubic_state = { 'w_max': self.cwnd, 'k': 0, 'w_est': 0, 'epoch_start': time.time() } if event == "ack_received": current_time = time.time() t = current_time - self.cubic_state['epoch_start'] # CUBICå‡½æ•°ï¼šW(t) = C(t-K)Â³ + W_max C = 0.4 # CUBICå‚æ•° K = self.cubic_state['k'] W_max = self.cubic_state['w_max'] w_cubic = C * ((t - K) ** 3) + W_max # å‹å¥½æ€§æ£€æŸ¥ w_est = self.cubic_state['w_est'] w_est += (1.0 / w_est) * (1.0 / self.cwnd) # Reno-friendly if w_cubic &lt; w_est: self.cwnd = w_est else: self.cwnd = w_cubic self.cubic_state['w_est'] = w_est elif event == "congestion": # æ‹¥å¡äº‹ä»¶ self.cubic_state['w_max'] = self.cwnd self.cwnd = self.cwnd * 0.7 # CUBICçš„Î²å€¼ self.cubic_state['k'] = (self.cubic_state['w_max'] * 0.3 / 0.4) ** (1/3) self.cubic_state['epoch_start'] = time.time() def bbr_algorithm(self, event, **kwargs): """BBRç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰""" if not hasattr(self, 'bbr_state'): self.bbr_state = { 'mode': 'startup', 'pacing_rate': 0, 'bandwidth': 0, 'rtt_min': float('inf'), 'cycle_index': 0 } if event == "ack_received": rtt = kwargs.get('rtt', 0.1) delivered = kwargs.get('delivered', self.mss) # æ›´æ–°å¸¦å®½ä¼°è®¡ if rtt > 0: bw_sample = delivered / rtt self.bbr_state['bandwidth'] = max(self.bbr_state['bandwidth'], bw_sample) # æ›´æ–°æœ€å°RTT self.bbr_state['rtt_min'] = min(self.bbr_state['rtt_min'], rtt) # è®¡ç®—BDPï¼ˆå¸¦å®½æ—¶å»¶ç§¯ï¼‰ bdp = self.bbr_state['bandwidth'] * self.bbr_state['rtt_min'] if self.bbr_state['mode'] == 'startup': # å¯åŠ¨é˜¶æ®µï¼šå¿«é€Ÿæ¢æµ‹å¸¦å®½ self.cwnd = min(2 * bdp, self.cwnd * 2) if self.cwnd > 1000: # ç®€åŒ–çš„é€€å‡ºæ¡ä»¶ self.bbr_state['mode'] = 'drain' elif self.bbr_state['mode'] == 'drain': # æ’ç©ºé˜¶æ®µ self.cwnd = bdp self.bbr_state['mode'] = 'probe_bw' elif self.bbr_state['mode'] == 'probe_bw': # å¸¦å®½æ¢æµ‹é˜¶æ®µ gain_cycle = [1.25, 0.75, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0] gain = gain_cycle[self.bbr_state['cycle_index']] self.cwnd = gain * bdp self.bbr_state['cycle_index'] = (self.bbr_state['cycle_index'] + 1) % len(gain_cycle) def simulate_congestion_control(self, algorithm="Reno", events=None): """æ¨¡æ‹Ÿæ‹¥å¡æ§åˆ¶è¿‡ç¨‹""" if events is None: events = [ ("ack_received", {}), ("ack_received", {}), ("ack_received", {}), ("duplicate_ack", {}), ("duplicate_ack", {}), ("duplicate_ack", {}), # è§¦å‘å¿«é€Ÿé‡ä¼  ("new_ack", {}), ("timeout", {}), ("ack_received", {}), ("ack_received", {}) ] history = [] for event, params in events: old_cwnd = self.cwnd old_state = self.state # æ‰§è¡Œç®—æ³• if algorithm in self.algorithms: self.algorithms[algorithm](event, **params) history.append({ "äº‹ä»¶": event, "æ—§æ‹¥å¡çª—å£": old_cwnd, "æ–°æ‹¥å¡çª—å£": self.cwnd, "æ—§çŠ¶æ€": old_state, "æ–°çŠ¶æ€": self.state, "æ…¢å¯åŠ¨é˜ˆå€¼": self.ssthresh }) return history # æ‹¥å¡æ§åˆ¶ç¤ºä¾‹ import time congestion_control = TCPCongestionControl() print("TCPæ‹¥å¡æ§åˆ¶ç¤ºä¾‹ (Renoç®—æ³•):") history = congestion_control.simulate_congestion_control("Reno") for i, record in enumerate(history, 1): print(f"æ­¥éª¤{i}: {record['äº‹ä»¶']}") print(f" æ‹¥å¡çª—å£: {record['æ—§æ‹¥å¡çª—å£']:.2f} -> {record['æ–°æ‹¥å¡çª—å£']:.2f}") print(f" çŠ¶æ€: {record['æ—§çŠ¶æ€']} -> {record['æ–°çŠ¶æ€']}") print(f" æ…¢å¯åŠ¨é˜ˆå€¼: {record['æ…¢å¯åŠ¨é˜ˆå€¼']}") print() # æ¯”è¾ƒä¸åŒç®—æ³• print("ä¸åŒæ‹¥å¡æ§åˆ¶ç®—æ³•æ¯”è¾ƒ:") algorithms = ["Reno", "Cubic", "BBR"] for alg in algorithms: cc = TCPCongestionControl() if alg == "BBR": # BBRéœ€è¦ç‰¹æ®Šçš„äº‹ä»¶å‚æ•° events = [("ack_received", {"rtt": 0.1, "delivered": 1460}) for _ in range(10)] else: events = [("ack_received", {}) for _ in range(10)] history = cc.simulate_congestion_control(alg, events) final_cwnd = history[-1]["æ–°æ‹¥å¡çª—å£"] print(f"{alg}: æœ€ç»ˆæ‹¥å¡çª—å£ = {final_cwnd:.2f}") TCPæ€§èƒ½ä¼˜åŒ– æ€§èƒ½è°ƒä¼˜æŠ€æœ¯ class TCPPerformanceOptimization: """TCPæ€§èƒ½ä¼˜åŒ–""" def __init__(self): self.optimization_techniques = { "çª—å£ç¼©æ”¾": { "æè¿°": "æ”¯æŒå¤§äº64KBçš„çª—å£", "RFC": "RFC 7323", "é€‚ç”¨åœºæ™¯": "é«˜å¸¦å®½é•¿å»¶è¿Ÿç½‘ç»œ" }, "é€‰æ‹©æ€§ç¡®è®¤": { "æè¿°": "SACKé€‰é¡¹ï¼Œæé«˜é‡ä¼ æ•ˆç‡", "RFC": "RFC 2018", "é€‚ç”¨åœºæ™¯": "ä¸¢åŒ…ç‡è¾ƒé«˜çš„ç½‘ç»œ" }, "æ—¶é—´æˆ³é€‰é¡¹": { "æè¿°": "ç²¾ç¡®RTTæµ‹é‡å’ŒPAWS", "RFC": "RFC 7323", "é€‚ç”¨åœºæ™¯": "éœ€è¦ç²¾ç¡®RTTæµ‹é‡" }, "Nagleç®—æ³•": { "æè¿°": "å‡å°‘å°åŒ…å‘é€", "é€‚ç”¨åœºæ™¯": "æ‰¹é‡æ•°æ®ä¼ è¾“", "æ³¨æ„äº‹é¡¹": "å¯èƒ½å¢åŠ å»¶è¿Ÿ" }, "å»¶è¿Ÿç¡®è®¤": { "æè¿°": "åˆå¹¶ACKå‡å°‘ç½‘ç»œæµé‡", "é€‚ç”¨åœºæ™¯": "åŒå‘æ•°æ®æµ", "æ³¨æ„äº‹é¡¹": "å¯èƒ½å¢åŠ RTT" } } def calculate_bandwidth_delay_product(self, bandwidth_mbps, rtt_ms): """è®¡ç®—å¸¦å®½æ—¶å»¶ç§¯""" bandwidth_bps = bandwidth_mbps * 1_000_000 rtt_seconds = rtt_ms / 1000 bdp_bytes = bandwidth_bps * rtt_seconds / 8 return { "å¸¦å®½": f"{bandwidth_mbps} Mbps", "RTT": f"{rtt_ms} ms", "BDP": f"{bdp_bytes:.0f} bytes", "å»ºè®®çª—å£å¤§å°": f"{bdp_bytes * 2:.0f} bytes", "éœ€è¦çª—å£ç¼©æ”¾": bdp_bytes > 65535 } def analyze_tcp_performance(self, throughput_mbps, rtt_ms, loss_rate=0): """åˆ†æTCPæ€§èƒ½""" # Mathiså…¬å¼ï¼šThroughput â‰¤ (MSS / RTT) * sqrt(1.5 / p) mss = 1460 # å­—èŠ‚ rtt_seconds = rtt_ms / 1000 if loss_rate > 0: theoretical_max = (mss / rtt_seconds) * (1.5 / loss_rate) ** 0.5 / 1_000_000 * 8 else: theoretical_max = float('inf') # çª—å£é™åˆ¶çš„ååé‡ window_limited = (65535 / rtt_seconds) / 1_000_000 * 8 efficiency = (throughput_mbps / min(theoretical_max, window_limited)) * 100 if theoretical_max != float('inf') else 0 analysis = { "å®é™…ååé‡": f"{throughput_mbps} Mbps", "ç†è®ºæœ€å¤§ååé‡": f"{theoretical_max:.2f} Mbps" if theoretical_max != float('inf') else "æ— é™åˆ¶", "çª—å£é™åˆ¶ååé‡": f"{window_limited:.2f} Mbps", "æ•ˆç‡": f"{efficiency:.1f}%", "æ€§èƒ½ç“¶é¢ˆ": [] } # è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ if throughput_mbps &lt; window_limited * 0.8: analysis["æ€§èƒ½ç“¶é¢ˆ"].append("å¯èƒ½å—æ‹¥å¡æ§åˆ¶é™åˆ¶") if window_limited &lt; theoretical_max * 0.8: analysis["æ€§èƒ½ç“¶é¢ˆ"].append("å—æ¥æ”¶çª—å£é™åˆ¶ï¼Œå»ºè®®å¯ç”¨çª—å£ç¼©æ”¾") if loss_rate > 0.01: analysis["æ€§èƒ½ç“¶é¢ˆ"].append("ä¸¢åŒ…ç‡è¿‡é«˜ï¼Œå½±å“æ€§èƒ½") return analysis def recommend_optimizations(self, scenario): """æ¨èä¼˜åŒ–æ–¹æ¡ˆ""" recommendations = { "é«˜å¸¦å®½é•¿å»¶è¿Ÿ": [ "å¯ç”¨çª—å£ç¼©æ”¾é€‰é¡¹", "ä½¿ç”¨CUBICæˆ–BBRæ‹¥å¡æ§åˆ¶", "è°ƒæ•´æ¥æ”¶ç¼“å†²åŒºå¤§å°", "è€ƒè™‘ä½¿ç”¨å¤šè¿æ¥å¹¶è¡Œä¼ è¾“" ], "é«˜ä¸¢åŒ…ç‡": [ "å¯ç”¨SACKé€‰é¡¹", "ä½¿ç”¨æ›´æ¿€è¿›çš„æ‹¥å¡æ§åˆ¶ç®—æ³•", "è€ƒè™‘ä½¿ç”¨FECï¼ˆå‰å‘çº é”™ï¼‰", "ä¼˜åŒ–é‡ä¼ ç­–ç•¥" ], "ä½å»¶è¿Ÿè¦æ±‚": [ "ç¦ç”¨Nagleç®—æ³•", "å‡å°‘å»¶è¿Ÿç¡®è®¤æ—¶é—´", "ä½¿ç”¨ä¸“ç”¨ç½‘ç»œè·¯å¾„", "ä¼˜åŒ–åº”ç”¨å±‚åè®®" ], "ç§»åŠ¨ç½‘ç»œ": [ "ä½¿ç”¨BBRæ‹¥å¡æ§åˆ¶", "å¯ç”¨è¿æ¥è¿ç§»", "è€ƒè™‘ä½¿ç”¨MPTCP", "ä¼˜åŒ–é‡ä¼ è¶…æ—¶" ], "æ•°æ®ä¸­å¿ƒ": [ "ä½¿ç”¨DCTCPç®—æ³•", "å¯ç”¨ECNæ ‡è®°", "ä¼˜åŒ–ç¼“å†²åŒºç®¡ç†", "ä½¿ç”¨RDMAæŠ€æœ¯" ] } return recommendations.get(scenario, ["è¯·æä¾›å…·ä½“åœºæ™¯"]) # æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹ perf_optimizer = TCPPerformanceOptimization() # è®¡ç®—BDP print("å¸¦å®½æ—¶å»¶ç§¯è®¡ç®—:") scenarios = [ (100, 10), # 100Mbps, 10ms RTT (1000, 50), # 1Gbps, 50ms RTT (10, 200) # 10Mbps, 200ms RTT ] for bandwidth, rtt in scenarios: bdp = perf_optimizer.calculate_bandwidth_delay_product(bandwidth, rtt) print(f"\nåœºæ™¯: {bdp['å¸¦å®½']}, {bdp['RTT']}") print(f" BDP: {bdp['BDP']}") print(f" å»ºè®®çª—å£: {bdp['å»ºè®®çª—å£å¤§å°']}") print(f" éœ€è¦çª—å£ç¼©æ”¾: {bdp['éœ€è¦çª—å£ç¼©æ”¾']}") # æ€§èƒ½åˆ†æ print("\n\nTCPæ€§èƒ½åˆ†æ:") performance_cases = [ (50, 10, 0.001), # 50Mbpså®é™…ï¼Œ10ms RTTï¼Œ0.1%ä¸¢åŒ… (800, 50, 0.01), # 800Mbpså®é™…ï¼Œ50ms RTTï¼Œ1%ä¸¢åŒ… (5, 200, 0.05) # 5Mbpså®é™…ï¼Œ200ms RTTï¼Œ5%ä¸¢åŒ… ] for throughput, rtt, loss in performance_cases: analysis = perf_optimizer.analyze_tcp_performance(throughput, rtt, loss) print(f"\nåœºæ™¯: {throughput}Mbps, {rtt}ms RTT, {loss*100}%ä¸¢åŒ…") print(f" å®é™…ååé‡: {analysis['å®é™…ååé‡']}") print(f" ç†è®ºæœ€å¤§: {analysis['ç†è®ºæœ€å¤§ååé‡']}") print(f" æ•ˆç‡: {analysis['æ•ˆç‡']}") if analysis['æ€§èƒ½ç“¶é¢ˆ']: print(f" ç“¶é¢ˆ: {', '.join(analysis['æ€§èƒ½ç“¶é¢ˆ'])}") # ä¼˜åŒ–å»ºè®® print("\n\nä¼˜åŒ–å»ºè®®:") scenarios = ["é«˜å¸¦å®½é•¿å»¶è¿Ÿ", "é«˜ä¸¢åŒ…ç‡", "ä½å»¶è¿Ÿè¦æ±‚", "ç§»åŠ¨ç½‘ç»œ"] for scenario in scenarios: recommendations = perf_optimizer.recommend_optimizations(scenario) print(f"\n{scenario}åœºæ™¯:") for i, rec in enumerate(recommendations, 1): print(f" {i}. {rec}") TCPåœ¨ç°ä»£ç½‘ç»œä¸­çš„åº”ç”¨ TCPå˜ç§å’Œæ‰©å±• class ModernTCPVariants: """ç°ä»£TCPå˜ç§""" def __init__(self): self.variants = { "TCP Reno": { "å¹´ä»½": 1990, "ç‰¹ç‚¹": ["å¿«é€Ÿé‡ä¼ ", "å¿«é€Ÿæ¢å¤"], "é€‚ç”¨åœºæ™¯": "ä¼ ç»Ÿç½‘ç»œç¯å¢ƒ", "ä¼˜ç¼ºç‚¹": "ç®€å•å¯é ï¼Œä½†åœ¨é«˜BDPç½‘ç»œä¸­æ€§èƒ½ä¸ä½³" }, "TCP NewReno": { "å¹´ä»½": 1999, "ç‰¹ç‚¹": ["æ”¹è¿›çš„å¿«é€Ÿæ¢å¤", "éƒ¨åˆ†ç¡®è®¤å¤„ç†"], "é€‚ç”¨åœºæ™¯": "å¤šä¸¢åŒ…ç¯å¢ƒ", "ä¼˜ç¼ºç‚¹": "æ”¹å–„äº†å¤šä¸¢åŒ…å¤„ç†ï¼Œä½†ä»æœ‰é™åˆ¶" }, "TCP SACK": { "å¹´ä»½": 1996, "ç‰¹ç‚¹": ["é€‰æ‹©æ€§ç¡®è®¤", "ç²¾ç¡®é‡ä¼ "], "é€‚ç”¨åœºæ™¯": "ä¸¢åŒ…ç‡è¾ƒé«˜çš„ç½‘ç»œ", "ä¼˜ç¼ºç‚¹": "æé«˜é‡ä¼ æ•ˆç‡ï¼Œä½†å¢åŠ å¤æ‚æ€§" }, "TCP Vegas": { "å¹´ä»½": 1994, "ç‰¹ç‚¹": ["åŸºäºå»¶è¿Ÿçš„æ‹¥å¡æ§åˆ¶", "ä¸»åŠ¨é¿å…æ‹¥å¡"], "é€‚ç”¨åœºæ™¯": "å»¶è¿Ÿæ•æ„Ÿåº”ç”¨", "ä¼˜ç¼ºç‚¹": "ä½å»¶è¿Ÿï¼Œä½†ä¸å…¶ä»–ç®—æ³•å…±å­˜å›°éš¾" }, "TCP CUBIC": { "å¹´ä»½": 2008, "ç‰¹ç‚¹": ["ä¸‰æ¬¡å‡½æ•°å¢é•¿", "RTTæ— å…³"], "é€‚ç”¨åœºæ™¯": "é«˜é€Ÿé•¿è·ç¦»ç½‘ç»œ", "ä¼˜ç¼ºç‚¹": "é«˜å¸¦å®½åˆ©ç”¨ç‡ï¼ŒLinuxé»˜è®¤ç®—æ³•" }, "TCP BBR": { "å¹´ä»½": 2016, "ç‰¹ç‚¹": ["åŸºäºå¸¦å®½å’ŒRTT", "æ¨¡å‹é©±åŠ¨"], "é€‚ç”¨åœºæ™¯": "å„ç§ç½‘ç»œç¯å¢ƒ", "ä¼˜ç¼ºç‚¹": "ä¼˜ç§€çš„æ€§èƒ½ï¼Œä½†å¯èƒ½è¿‡äºæ¿€è¿›" }, "MPTCP": { "å¹´ä»½": 2013, "ç‰¹ç‚¹": ["å¤šè·¯å¾„ä¼ è¾“", "è¿æ¥èšåˆ"], "é€‚ç”¨åœºæ™¯": "ç§»åŠ¨è®¾å¤‡ã€æ•°æ®ä¸­å¿ƒ", "ä¼˜ç¼ºç‚¹": "æé«˜ååé‡å’Œå¯é æ€§ï¼Œä½†å¤æ‚åº¦é«˜" }, "QUIC": { "å¹´ä»½": 2021, "ç‰¹ç‚¹": ["åŸºäºUDP", "å†…ç½®åŠ å¯†", "0-RTT"], "é€‚ç”¨åœºæ™¯": "Webåº”ç”¨ã€å®æ—¶é€šä¿¡", "ä¼˜ç¼ºç‚¹": "ä½å»¶è¿Ÿï¼Œä½†éœ€è¦æ–°çš„åŸºç¡€è®¾æ–½" } } def compare_algorithms(self, metrics=None): """æ¯”è¾ƒä¸åŒç®—æ³•""" if metrics is None: metrics = ["ååé‡", "å»¶è¿Ÿ", "å…¬å¹³æ€§", "å¤æ‚åº¦"] comparison = { "TCP Reno": {"ååé‡": 6, "å»¶è¿Ÿ": 7, "å…¬å¹³æ€§": 8, "å¤æ‚åº¦": 3}, "TCP CUBIC": {"ååé‡": 9, "å»¶è¿Ÿ": 6, "å…¬å¹³æ€§": 7, "å¤æ‚åº¦": 5}, "TCP BBR": {"ååé‡": 9, "å»¶è¿Ÿ": 8, "å…¬å¹³æ€§": 6, "å¤æ‚åº¦": 7}, "MPTCP": {"ååé‡": 10, "å»¶è¿Ÿ": 7, "å…¬å¹³æ€§": 8, "å¤æ‚åº¦": 9}, "QUIC": {"ååé‡": 8, "å»¶è¿Ÿ": 10, "å…¬å¹³æ€§": 7, "å¤æ‚åº¦": 8} } return comparison def get_deployment_status(self): """è·å–éƒ¨ç½²çŠ¶æ€""" return { "TCP Reno/NewReno": "å¹¿æ³›éƒ¨ç½²ï¼Œä¼ ç»Ÿç³»ç»Ÿé»˜è®¤", "TCP CUBIC": "Linuxé»˜è®¤ï¼Œå¹¿æ³›ä½¿ç”¨", "TCP BBR": "GoogleæœåŠ¡å¤§è§„æ¨¡éƒ¨ç½²ï¼Œé€æ¸æ™®åŠ", "MPTCP": "ç§»åŠ¨è¿è¥å•†å’Œæ•°æ®ä¸­å¿ƒè¯•ç‚¹", "QUIC": "HTTP/3æ ‡å‡†ï¼Œä¸»è¦æµè§ˆå™¨æ”¯æŒ" } # TCPå®‰å…¨è€ƒè™‘ class TCPSecurity: """TCPå®‰å…¨æœºåˆ¶""" def __init__(self): self.security_issues = { "TCPåŠ«æŒ": { "æè¿°": "æ”»å‡»è€…ä¼ªé€ TCPæ®µæ¥ç®¡è¿æ¥", "é˜²æŠ¤æªæ–½": ["åºåˆ—å·éšæœºåŒ–", "ä½¿ç”¨TLS", "ç½‘ç»œåˆ†æ®µ"] }, "SYNæ´ªæ°´æ”»å‡»": { "æè¿°": "å¤§é‡SYNè¯·æ±‚è€—å°½æœåŠ¡å™¨èµ„æº", "é˜²æŠ¤æªæ–½": ["SYN Cookies", "è¿æ¥é™åˆ¶", "é˜²ç«å¢™è¿‡æ»¤"] }, "RSTæ”»å‡»": { "æè¿°": "ä¼ªé€ RSTæ®µå¼ºåˆ¶å…³é—­è¿æ¥", "é˜²æŠ¤æªæ–½": ["åºåˆ—å·éªŒè¯", "ä½¿ç”¨TLS", "ç½‘ç»œç›‘æ§"] }, "çª—å£æ”»å‡»": { "æè¿°": "æ“çºµæ¥æ”¶çª—å£å½±å“æ€§èƒ½", "é˜²æŠ¤æªæ–½": ["çª—å£å¤§å°é™åˆ¶", "æµé‡ç›‘æ§"] } } def implement_syn_cookies(self, client_ip, client_port, server_port): """å®ç°SYN Cookiesï¼ˆç®€åŒ–ç‰ˆï¼‰""" import hashlib # ç®€åŒ–çš„SYN Cookieç”Ÿæˆ secret_key = "tcp_secret_key_2024" timestamp = int(time.time()) // 64 # 64ç§’æ—¶é—´çª—å£ # æ„é€ Cookie cookie_data = f"{client_ip}:{client_port}:{server_port}:{timestamp}:{secret_key}" cookie_hash = hashlib.md5(cookie_data.encode()).hexdigest() # å–å‰24ä½ä½œä¸ºåºåˆ—å· syn_cookie = int(cookie_hash[:6], 16) return { "SYN_Cookie": syn_cookie, "æ—¶é—´æˆ³": timestamp, "æœ‰æ•ˆæœŸ": "64ç§’", "éªŒè¯æ–¹æ³•": "é‡æ–°è®¡ç®—å¹¶æ¯”è¾ƒ" } def validate_syn_cookie(self, client_ip, client_port, server_port, received_ack): """éªŒè¯SYN Cookie""" import hashlib secret_key = "tcp_secret_key_2024" current_time = int(time.time()) // 64 # æ£€æŸ¥å½“å‰å’Œå‰ä¸€ä¸ªæ—¶é—´çª—å£ for timestamp in [current_time, current_time - 1]: cookie_data = f"{client_ip}:{client_port}:{server_port}:{timestamp}:{secret_key}" cookie_hash = hashlib.md5(cookie_data.encode()).hexdigest() expected_cookie = int(cookie_hash[:6], 16) if received_ack - 1 == expected_cookie: return { "éªŒè¯ç»“æœ": "æˆåŠŸ", "æ—¶é—´æˆ³": timestamp, "Cookie": expected_cookie } return {"éªŒè¯ç»“æœ": "å¤±è´¥", "åŸå› ": "Cookieæ— æ•ˆæˆ–è¿‡æœŸ"} # ç¤ºä¾‹ä½¿ç”¨ print("ç°ä»£TCPå˜ç§æ¯”è¾ƒ:") variants = ModernTCPVariants() comparison = variants.compare_algorithms() print("\nç®—æ³•æ€§èƒ½å¯¹æ¯” (1-10åˆ†):") print(f"{'ç®—æ³•':&lt;12} {'ååé‡':&lt;8} {'å»¶è¿Ÿ':&lt;8} {'å…¬å¹³æ€§':&lt;8} {'å¤æ‚åº¦':&lt;8}") print("-" * 50) for alg, scores in comparison.items(): print(f"{alg:&lt;12} {scores['ååé‡']:&lt;8} {scores['å»¶è¿Ÿ']:&lt;8} {scores['å…¬å¹³æ€§']:&lt;8} {scores['å¤æ‚åº¦']:&lt;8}") print("\néƒ¨ç½²çŠ¶æ€:") deployment = variants.get_deployment_status() for alg, status in deployment.items(): print(f" {alg}: {status}") # TCPå®‰å…¨ç¤ºä¾‹ print("\n\nTCPå®‰å…¨æœºåˆ¶:") security = TCPSecurity() # SYN Cookiesç¤ºä¾‹ cookie_result = security.implement_syn_cookies("192.168.1.100", 12345, 80) print(f"SYN Cookieç”Ÿæˆ: {cookie_result}") validation_result = security.validate_syn_cookie("192.168.1.100", 12345, 80, cookie_result["SYN_Cookie"] + 1) print(f"CookieéªŒè¯: {validation_result}") å­¦ä¹ å»ºè®®å’Œæ€»ç»“ TCPå­¦ä¹ è·¯å¾„ åŸºç¡€æ¦‚å¿µï¼šç†è§£TCPçš„åŸºæœ¬ç‰¹æ€§å’Œå·¥ä½œåŸç† åè®®ç»†èŠ‚ï¼šæŒæ¡æŠ¥æ–‡æ ¼å¼ã€çŠ¶æ€æœºã€è¿æ¥ç®¡ç† å¯é ä¼ è¾“ï¼šå­¦ä¹ åºåˆ—å·ã€ç¡®è®¤ã€é‡ä¼ æœºåˆ¶ æµé‡æ§åˆ¶ï¼šç†è§£æ»‘åŠ¨çª—å£æœºåˆ¶ æ‹¥å¡æ§åˆ¶ï¼šæŒæ¡å„ç§æ‹¥å¡æ§åˆ¶ç®—æ³• æ€§èƒ½ä¼˜åŒ–ï¼šå­¦ä¹ TCPè°ƒä¼˜æŠ€æœ¯ ç°ä»£å‘å±•ï¼šäº†è§£æ–°çš„TCPå˜ç§å’Œæ›¿ä»£æ–¹æ¡ˆ å…³é”®è¦ç‚¹æ€»ç»“ æœºåˆ¶ ç›®çš„ å®ç°æ–¹å¼ é‡è¦æ€§ ä¸‰æ¬¡æ¡æ‰‹ å»ºç«‹å¯é è¿æ¥ SYN â†’ SYN+ACK â†’ ACK åŸºç¡€ åºåˆ—å· ä¿è¯æ•°æ®é¡ºåº 32ä½åºåˆ—å·ç©ºé—´ æ ¸å¿ƒ ç¡®è®¤æœºåˆ¶ ç¡®ä¿æ•°æ®åˆ°è¾¾ ç´¯ç§¯ç¡®è®¤ + é€‰æ‹©ç¡®è®¤ æ ¸å¿ƒ æµé‡æ§åˆ¶ é˜²æ­¢æ¥æ”¶æ–¹æº¢å‡º æ»‘åŠ¨çª—å£ é‡è¦ æ‹¥å¡æ§åˆ¶ é¿å…ç½‘ç»œæ‹¥å¡ æ…¢å¯åŠ¨ + æ‹¥å¡é¿å… å…³é”® å®é™…åº”ç”¨å»ºè®® æœåŠ¡å™¨é…ç½®ï¼šåˆç†è®¾ç½®TCPå‚æ•°ï¼Œå¦‚çª—å£å¤§å°ã€è¶…æ—¶æ—¶é—´ åº”ç”¨è®¾è®¡ï¼šè€ƒè™‘TCPçš„ç‰¹æ€§ï¼Œåˆç†ä½¿ç”¨è¿æ¥ ç½‘ç»œç›‘æ§ï¼šç›‘æ§TCPè¿æ¥çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡ å®‰å…¨é˜²æŠ¤ï¼šå®æ–½é€‚å½“çš„å®‰å…¨æªæ–½é˜²èŒƒTCPæ”»å‡» æ€§èƒ½è°ƒä¼˜ï¼šæ ¹æ®ç½‘ç»œç¯å¢ƒé€‰æ‹©åˆé€‚çš„æ‹¥å¡æ§åˆ¶ç®—æ³• æœªæ¥å‘å±•è¶‹åŠ¿ QUICåè®®ï¼šåŸºäºUDPçš„å¯é ä¼ è¾“ï¼ŒHTTP/3çš„åŸºç¡€ å¤šè·¯å¾„TCPï¼šåˆ©ç”¨å¤šä¸ªç½‘ç»œè·¯å¾„æé«˜æ€§èƒ½ æœºå™¨å­¦ä¹ ï¼šæ™ºèƒ½æ‹¥å¡æ§åˆ¶å’Œå‚æ•°è°ƒä¼˜ ç¡¬ä»¶åŠ é€Ÿï¼šç½‘å¡å’Œäº¤æ¢æœºçš„TCPå¤„ç†åŠ é€Ÿ äº‘åŸç”Ÿä¼˜åŒ–ï¼šé’ˆå¯¹å®¹å™¨å’Œå¾®æœåŠ¡çš„TCPä¼˜åŒ– TCPåè®®ä½œä¸ºäº’è”ç½‘çš„åŸºçŸ³ï¼Œå…¶æ·±å…¥ç†è§£å¯¹äºç½‘ç»œç¼–ç¨‹ã€ç³»ç»Ÿè®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–éƒ½è‡³å…³é‡è¦ã€‚éšç€ç½‘ç»œæŠ€æœ¯çš„å‘å±•ï¼ŒTCPä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œå­¦ä¹ å…¶åŸç†å’Œæœ€æ–°å‘å±•è¶‹åŠ¿å°†æœ‰åŠ©äºæ„å»ºæ›´é«˜æ•ˆã€æ›´å¯é çš„ç½‘ç»œåº”ç”¨ã€‚
...</p></div><footer class=entry-footer><span title='2024-02-28 14:30:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;14 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to TCPåè®®æ·±åº¦è§£æï¼šå¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶" href=https://tyhzxh.github.io/posts/tcp-protocol-guide/></a></article><article class=post-entry><header class=entry-header><h2>HTTPåè®®è¯¦è§£ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨</h2></header><div class=entry-meta><span title='2024-02-28 10:15:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;15 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>HTTPåè®®æ¦‚è¿° **HTTPï¼ˆHyperText Transfer Protocolï¼‰**æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€å¹¿æ³›çš„ç½‘ç»œåè®®ä¹‹ä¸€ï¼Œæ˜¯Webçš„åŸºç¡€ã€‚å®ƒå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Œæ˜¯ä¸€ä¸ªåŸºäºè¯·æ±‚-å“åº”æ¨¡å¼çš„ã€æ— çŠ¶æ€çš„åº”ç”¨å±‚åè®®ã€‚
HTTPçš„æ ¸å¿ƒç‰¹ç‚¹ ç‰¹ç‚¹ æè¿° å½±å“ æ— çŠ¶æ€ æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ éœ€è¦é¢å¤–æœºåˆ¶ä¿æŒçŠ¶æ€ æ— è¿æ¥ è¯·æ±‚å®Œæˆåæ–­å¼€è¿æ¥ HTTP/1.1å¼•å…¥æŒä¹…è¿æ¥ ç®€å•å¿«é€Ÿ åè®®ç®€å•ï¼Œå¤„ç†é€Ÿåº¦å¿« æ˜“äºå®ç°å’Œè°ƒè¯• çµæ´» æ”¯æŒå¤šç§æ•°æ®ç±»å‹ å¯ä¼ è¾“ä»»æ„ç±»å‹æ•°æ® HTTPåè®®ç‰ˆæœ¬æ¼”è¿› HTTP/1.0 vs HTTP/1.1 vs HTTP/2 vs HTTP/3 # HTTPç‰ˆæœ¬ç‰¹æ€§å¯¹æ¯” http_versions = { "HTTP/1.0": { "å‘å¸ƒå¹´ä»½": 1996, "ä¸»è¦ç‰¹æ€§": [ "åŸºæœ¬çš„è¯·æ±‚-å“åº”æœºåˆ¶", "æ”¯æŒGETã€POSTã€HEADæ–¹æ³•", "æ¯ä¸ªè¯·æ±‚å»ºç«‹æ–°è¿æ¥" ], "ç¼ºç‚¹": ["è¿æ¥å¼€é”€å¤§", "æ— æ³•å¤ç”¨è¿æ¥"] }, "HTTP/1.1": { "å‘å¸ƒå¹´ä»½": 1997, "ä¸»è¦ç‰¹æ€§": [ "æŒä¹…è¿æ¥ï¼ˆKeep-Aliveï¼‰", "ç®¡é“åŒ–ï¼ˆPipeliningï¼‰", "åˆ†å—ä¼ è¾“ç¼–ç ", "Hostå¤´å­—æ®µ", "æ›´å¤šHTTPæ–¹æ³•" ], "æ”¹è¿›": ["å‡å°‘è¿æ¥å¼€é”€", "æ”¯æŒè™šæ‹Ÿä¸»æœº"] }, "HTTP/2": { "å‘å¸ƒå¹´ä»½": 2015, "ä¸»è¦ç‰¹æ€§": [ "äºŒè¿›åˆ¶åˆ†å¸§", "å¤šè·¯å¤ç”¨", "å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰", "æœåŠ¡å™¨æ¨é€", "æµä¼˜å…ˆçº§" ], "æ€§èƒ½æå‡": ["è§£å†³é˜Ÿå¤´é˜»å¡", "å‡å°‘å»¶è¿Ÿ"] }, "HTTP/3": { "å‘å¸ƒå¹´ä»½": 2022, "ä¸»è¦ç‰¹æ€§": [ "åŸºäºQUICåè®®", "UDPä¼ è¾“", "å†…ç½®åŠ å¯†", "è¿æ¥è¿ç§»", "0-RTTè¿æ¥å»ºç«‹" ], "ä¼˜åŠ¿": ["æ›´å¿«çš„è¿æ¥å»ºç«‹", "æ›´å¥½çš„ç§»åŠ¨ç½‘ç»œæ”¯æŒ"] } } for version, details in http_versions.items(): print(f"\n{version} ({details['å‘å¸ƒå¹´ä»½']}å¹´):") for feature in details.get('ä¸»è¦ç‰¹æ€§', []): print(f" â€¢ {feature}") HTTPè¯·æ±‚å’Œå“åº”ç»“æ„ HTTPè¯·æ±‚ç»“æ„ GET /api/users/123 HTTP/1.1 Host: api.example.com User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 Accept: application/json Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... Content-Type: application/json Content-Length: 85 { "name": "å¼ ä¸‰", "email": "zhangsan@example.com" } è¯·æ±‚ç»“æ„è§£æ class HTTPRequest: """HTTPè¯·æ±‚ç»“æ„è§£æ""" def __init__(self, raw_request): self.raw_request = raw_request self.parse_request() def parse_request(self): """è§£æHTTPè¯·æ±‚""" lines = self.raw_request.strip().split('\n') # è§£æè¯·æ±‚è¡Œ request_line = lines[0] self.method, self.path, self.version = request_line.split(' ') # è§£æè¯·æ±‚å¤´ self.headers = {} body_start = 1 for i, line in enumerate(lines[1:], 1): if line.strip() == '': body_start = i + 1 break if ':' in line: key, value = line.split(':', 1) self.headers[key.strip()] = value.strip() # è§£æè¯·æ±‚ä½“ if body_start &lt; len(lines): self.body = '\n'.join(lines[body_start:]) else: self.body = '' def get_info(self): """è·å–è¯·æ±‚ä¿¡æ¯""" return { "method": self.method, "path": self.path, "version": self.version, "headers": self.headers, "body": self.body } # ç¤ºä¾‹ä½¿ç”¨ sample_request = """GET /api/users HTTP/1.1 Host: api.example.com User-Agent: Mozilla/5.0 Accept: application/json """ request = HTTPRequest(sample_request) print("è¯·æ±‚ä¿¡æ¯:", request.get_info()) HTTPå“åº”ç»“æ„ HTTP/1.1 200 OK Date: Mon, 27 Feb 2024 10:15:30 GMT Server: nginx/1.18.0 Content-Type: application/json; charset=utf-8 Content-Length: 156 Cache-Control: max-age=3600 ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4" Access-Control-Allow-Origin: * { "id": 123, "name": "å¼ ä¸‰", "email": "zhangsan@example.com", "created_at": "2024-02-27T10:15:30Z", "status": "active" } å“åº”ç»“æ„è§£æ class HTTPResponse: """HTTPå“åº”ç»“æ„è§£æ""" def __init__(self, raw_response): self.raw_response = raw_response self.parse_response() def parse_response(self): """è§£æHTTPå“åº”""" lines = self.raw_response.strip().split('\n') # è§£æçŠ¶æ€è¡Œ status_line = lines[0] parts = status_line.split(' ', 2) self.version = parts[0] self.status_code = int(parts[1]) self.reason_phrase = parts[2] if len(parts) > 2 else '' # è§£æå“åº”å¤´ self.headers = {} body_start = 1 for i, line in enumerate(lines[1:], 1): if line.strip() == '': body_start = i + 1 break if ':' in line: key, value = line.split(':', 1) self.headers[key.strip()] = value.strip() # è§£æå“åº”ä½“ if body_start &lt; len(lines): self.body = '\n'.join(lines[body_start:]) else: self.body = '' def is_success(self): """åˆ¤æ–­æ˜¯å¦æˆåŠŸå“åº”""" return 200 &lt;= self.status_code &lt; 300 def get_info(self): """è·å–å“åº”ä¿¡æ¯""" return { "version": self.version, "status_code": self.status_code, "reason_phrase": self.reason_phrase, "headers": self.headers, "body": self.body, "is_success": self.is_success() } HTTPæ–¹æ³•è¯¦è§£ å¸¸ç”¨HTTPæ–¹æ³• class HTTPMethods: """HTTPæ–¹æ³•è¯¦è§£å’Œç¤ºä¾‹""" @staticmethod def get_method_info(): """è·å–HTTPæ–¹æ³•ä¿¡æ¯""" methods = { "GET": { "ç”¨é€”": "è·å–èµ„æº", "ç‰¹ç‚¹": ["å®‰å…¨", "å¹‚ç­‰", "å¯ç¼“å­˜"], "ç¤ºä¾‹": "GET /api/users/123" }, "POST": { "ç”¨é€”": "åˆ›å»ºèµ„æºæˆ–æäº¤æ•°æ®", "ç‰¹ç‚¹": ["ä¸å®‰å…¨", "éå¹‚ç­‰", "ä¸å¯ç¼“å­˜"], "ç¤ºä¾‹": "POST /api/users" }, "PUT": { "ç”¨é€”": "æ›´æ–°æˆ–åˆ›å»ºèµ„æº", "ç‰¹ç‚¹": ["ä¸å®‰å…¨", "å¹‚ç­‰", "ä¸å¯ç¼“å­˜"], "ç¤ºä¾‹": "PUT /api/users/123" }, "DELETE": { "ç”¨é€”": "åˆ é™¤èµ„æº", "ç‰¹ç‚¹": ["ä¸å®‰å…¨", "å¹‚ç­‰", "ä¸å¯ç¼“å­˜"], "ç¤ºä¾‹": "DELETE /api/users/123" }, "PATCH": { "ç”¨é€”": "éƒ¨åˆ†æ›´æ–°èµ„æº", "ç‰¹ç‚¹": ["ä¸å®‰å…¨", "éå¹‚ç­‰", "ä¸å¯ç¼“å­˜"], "ç¤ºä¾‹": "PATCH /api/users/123" }, "HEAD": { "ç”¨é€”": "è·å–èµ„æºå¤´ä¿¡æ¯", "ç‰¹ç‚¹": ["å®‰å…¨", "å¹‚ç­‰", "å¯ç¼“å­˜"], "ç¤ºä¾‹": "HEAD /api/users/123" }, "OPTIONS": { "ç”¨é€”": "è·å–æœåŠ¡å™¨æ”¯æŒçš„æ–¹æ³•", "ç‰¹ç‚¹": ["å®‰å…¨", "å¹‚ç­‰", "ä¸å¯ç¼“å­˜"], "ç¤ºä¾‹": "OPTIONS /api/users" } } return methods # RESTful APIè®¾è®¡ç¤ºä¾‹ class RESTfulAPI: """RESTful APIè®¾è®¡ç¤ºä¾‹""" def __init__(self): self.users = {} self.next_id = 1 def handle_request(self, method, path, data=None): """å¤„ç†HTTPè¯·æ±‚""" if path.startswith('/api/users'): if method == 'GET': if path == '/api/users': return self.get_users() else: user_id = self.extract_id(path) return self.get_user(user_id) elif method == 'POST' and path == '/api/users': return self.create_user(data) elif method == 'PUT': user_id = self.extract_id(path) return self.update_user(user_id, data) elif method == 'DELETE': user_id = self.extract_id(path) return self.delete_user(user_id) elif method == 'PATCH': user_id = self.extract_id(path) return self.patch_user(user_id, data) return {"error": "Not Found", "status": 404} def extract_id(self, path): """ä»è·¯å¾„ä¸­æå–ID""" parts = path.split('/') return int(parts[-1]) if parts[-1].isdigit() else None def get_users(self): """è·å–æ‰€æœ‰ç”¨æˆ·""" return {"users": list(self.users.values()), "status": 200} def get_user(self, user_id): """è·å–å•ä¸ªç”¨æˆ·""" if user_id in self.users: return {"user": self.users[user_id], "status": 200} return {"error": "User not found", "status": 404} def create_user(self, data): """åˆ›å»ºç”¨æˆ·""" user_id = self.next_id self.next_id += 1 user = { "id": user_id, "name": data.get("name"), "email": data.get("email"), "created_at": "2024-02-27T10:15:30Z" } self.users[user_id] = user return {"user": user, "status": 201} def update_user(self, user_id, data): """æ›´æ–°ç”¨æˆ·ï¼ˆå®Œæ•´æ›¿æ¢ï¼‰""" user = { "id": user_id, "name": data.get("name"), "email": data.get("email"), "updated_at": "2024-02-27T10:15:30Z" } self.users[user_id] = user return {"user": user, "status": 200} def patch_user(self, user_id, data): """éƒ¨åˆ†æ›´æ–°ç”¨æˆ·""" if user_id not in self.users: return {"error": "User not found", "status": 404} user = self.users[user_id].copy() user.update(data) user["updated_at"] = "2024-02-27T10:15:30Z" self.users[user_id] = user return {"user": user, "status": 200} def delete_user(self, user_id): """åˆ é™¤ç”¨æˆ·""" if user_id in self.users: del self.users[user_id] return {"message": "User deleted", "status": 204} return {"error": "User not found", "status": 404} # ç¤ºä¾‹ä½¿ç”¨ api = RESTfulAPI() # åˆ›å»ºç”¨æˆ· result = api.handle_request('POST', '/api/users', { "name": "å¼ ä¸‰", "email": "zhangsan@example.com" }) print("åˆ›å»ºç”¨æˆ·:", result) # è·å–ç”¨æˆ· result = api.handle_request('GET', '/api/users/1') print("è·å–ç”¨æˆ·:", result) # æ›´æ–°ç”¨æˆ· result = api.handle_request('PATCH', '/api/users/1', { "name": "å¼ ä¸‰ä¸°" }) print("æ›´æ–°ç”¨æˆ·:", result) HTTPçŠ¶æ€ç è¯¦è§£ çŠ¶æ€ç åˆ†ç±»å’Œå«ä¹‰ class HTTPStatusCodes: """HTTPçŠ¶æ€ç è¯¦è§£""" def __init__(self): self.status_codes = { # 1xx ä¿¡æ¯æ€§çŠ¶æ€ç  100: {"name": "Continue", "description": "ç»§ç»­è¯·æ±‚"}, 101: {"name": "Switching Protocols", "description": "åˆ‡æ¢åè®®"}, 102: {"name": "Processing", "description": "å¤„ç†ä¸­"}, # 2xx æˆåŠŸçŠ¶æ€ç  200: {"name": "OK", "description": "è¯·æ±‚æˆåŠŸ"}, 201: {"name": "Created", "description": "èµ„æºå·²åˆ›å»º"}, 202: {"name": "Accepted", "description": "è¯·æ±‚å·²æ¥å—"}, 204: {"name": "No Content", "description": "æ— å†…å®¹"}, 206: {"name": "Partial Content", "description": "éƒ¨åˆ†å†…å®¹"}, # 3xx é‡å®šå‘çŠ¶æ€ç  301: {"name": "Moved Permanently", "description": "æ°¸ä¹…é‡å®šå‘"}, 302: {"name": "Found", "description": "ä¸´æ—¶é‡å®šå‘"}, 304: {"name": "Not Modified", "description": "æœªä¿®æ”¹"}, 307: {"name": "Temporary Redirect", "description": "ä¸´æ—¶é‡å®šå‘"}, 308: {"name": "Permanent Redirect", "description": "æ°¸ä¹…é‡å®šå‘"}, # 4xx å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç  400: {"name": "Bad Request", "description": "è¯·æ±‚é”™è¯¯"}, 401: {"name": "Unauthorized", "description": "æœªæˆæƒ"}, 403: {"name": "Forbidden", "description": "ç¦æ­¢è®¿é—®"}, 404: {"name": "Not Found", "description": "èµ„æºæœªæ‰¾åˆ°"}, 405: {"name": "Method Not Allowed", "description": "æ–¹æ³•ä¸å…è®¸"}, 409: {"name": "Conflict", "description": "å†²çª"}, 422: {"name": "Unprocessable Entity", "description": "æ— æ³•å¤„ç†çš„å®ä½“"}, 429: {"name": "Too Many Requests", "description": "è¯·æ±‚è¿‡å¤š"}, # 5xx æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç  500: {"name": "Internal Server Error", "description": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"}, 501: {"name": "Not Implemented", "description": "æœªå®ç°"}, 502: {"name": "Bad Gateway", "description": "ç½‘å…³é”™è¯¯"}, 503: {"name": "Service Unavailable", "description": "æœåŠ¡ä¸å¯ç”¨"}, 504: {"name": "Gateway Timeout", "description": "ç½‘å…³è¶…æ—¶"}, } def get_status_info(self, code): """è·å–çŠ¶æ€ç ä¿¡æ¯""" if code in self.status_codes: return self.status_codes[code] return {"name": "Unknown", "description": "æœªçŸ¥çŠ¶æ€ç "} def get_category(self, code): """è·å–çŠ¶æ€ç ç±»åˆ«""" if 100 &lt;= code &lt; 200: return "ä¿¡æ¯æ€§å“åº”" elif 200 &lt;= code &lt; 300: return "æˆåŠŸå“åº”" elif 300 &lt;= code &lt; 400: return "é‡å®šå‘" elif 400 &lt;= code &lt; 500: return "å®¢æˆ·ç«¯é”™è¯¯" elif 500 &lt;= code &lt; 600: return "æœåŠ¡å™¨é”™è¯¯" else: return "æœªçŸ¥ç±»åˆ«" def is_error(self, code): """åˆ¤æ–­æ˜¯å¦ä¸ºé”™è¯¯çŠ¶æ€ç """ return code >= 400 # çŠ¶æ€ç ä½¿ç”¨ç¤ºä¾‹ def handle_api_response(status_code, data=None): """å¤„ç†APIå“åº”""" status_handler = HTTPStatusCodes() info = status_handler.get_status_info(status_code) category = status_handler.get_category(status_code) response = { "status_code": status_code, "status_name": info["name"], "description": info["description"], "category": category, "is_error": status_handler.is_error(status_code) } if data: response["data"] = data return response # ç¤ºä¾‹ä½¿ç”¨ print("æˆåŠŸå“åº”:", handle_api_response(200, {"message": "æ“ä½œæˆåŠŸ"})) print("å®¢æˆ·ç«¯é”™è¯¯:", handle_api_response(404)) print("æœåŠ¡å™¨é”™è¯¯:", handle_api_response(500)) HTTPå¤´å­—æ®µè¯¦è§£ å¸¸ç”¨è¯·æ±‚å¤´ class HTTPHeaders: """HTTPå¤´å­—æ®µè¯¦è§£""" def __init__(self): self.request_headers = { "Accept": { "ç”¨é€”": "æŒ‡å®šå®¢æˆ·ç«¯èƒ½å¤Ÿæ¥æ”¶çš„å†…å®¹ç±»å‹", "ç¤ºä¾‹": "Accept: application/json, text/html", "é‡è¦æ€§": "é«˜" }, "Accept-Encoding": { "ç”¨é€”": "æŒ‡å®šå®¢æˆ·ç«¯æ”¯æŒçš„ç¼–ç æ ¼å¼", "ç¤ºä¾‹": "Accept-Encoding: gzip, deflate, br", "é‡è¦æ€§": "ä¸­" }, "Accept-Language": { "ç”¨é€”": "æŒ‡å®šå®¢æˆ·ç«¯åå¥½çš„è¯­è¨€", "ç¤ºä¾‹": "Accept-Language: zh-CN,zh;q=0.9,en;q=0.8", "é‡è¦æ€§": "ä¸­" }, "Authorization": { "ç”¨é€”": "åŒ…å«è®¤è¯å‡­æ®", "ç¤ºä¾‹": "Authorization: Bearer eyJhbGciOiJIUzI1NiIs...", "é‡è¦æ€§": "é«˜" }, "Cache-Control": { "ç”¨é€”": "æŒ‡å®šç¼“å­˜æœºåˆ¶", "ç¤ºä¾‹": "Cache-Control: no-cache, max-age=0", "é‡è¦æ€§": "é«˜" }, "Content-Type": { "ç”¨é€”": "æŒ‡å®šè¯·æ±‚ä½“çš„åª’ä½“ç±»å‹", "ç¤ºä¾‹": "Content-Type: application/json; charset=utf-8", "é‡è¦æ€§": "é«˜" }, "Cookie": { "ç”¨é€”": "å‘é€å­˜å‚¨çš„Cookie", "ç¤ºä¾‹": "Cookie: sessionid=abc123; csrftoken=xyz789", "é‡è¦æ€§": "é«˜" }, "Host": { "ç”¨é€”": "æŒ‡å®šæœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£", "ç¤ºä¾‹": "Host: api.example.com:443", "é‡è¦æ€§": "å¿…éœ€" }, "Referer": { "ç”¨é€”": "æŒ‡å®šè¯·æ±‚æ¥æºé¡µé¢", "ç¤ºä¾‹": "Referer: https://example.com/page", "é‡è¦æ€§": "ä¸­" }, "User-Agent": { "ç”¨é€”": "æ ‡è¯†å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº", "ç¤ºä¾‹": "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)", "é‡è¦æ€§": "ä¸­" } } self.response_headers = { "Access-Control-Allow-Origin": { "ç”¨é€”": "CORSè·¨åŸŸè®¿é—®æ§åˆ¶", "ç¤ºä¾‹": "Access-Control-Allow-Origin: *", "é‡è¦æ€§": "é«˜" }, "Cache-Control": { "ç”¨é€”": "æŒ‡å®šç¼“å­˜ç­–ç•¥", "ç¤ºä¾‹": "Cache-Control: public, max-age=3600", "é‡è¦æ€§": "é«˜" }, "Content-Encoding": { "ç”¨é€”": "æŒ‡å®šå†…å®¹ç¼–ç æ ¼å¼", "ç¤ºä¾‹": "Content-Encoding: gzip", "é‡è¦æ€§": "ä¸­" }, "Content-Length": { "ç”¨é€”": "æŒ‡å®šå“åº”ä½“é•¿åº¦", "ç¤ºä¾‹": "Content-Length: 1024", "é‡è¦æ€§": "é«˜" }, "Content-Type": { "ç”¨é€”": "æŒ‡å®šå“åº”ä½“çš„åª’ä½“ç±»å‹", "ç¤ºä¾‹": "Content-Type: application/json; charset=utf-8", "é‡è¦æ€§": "é«˜" }, "ETag": { "ç”¨é€”": "èµ„æºçš„å”¯ä¸€æ ‡è¯†ç¬¦", "ç¤ºä¾‹": "ETag: \"33a64df551425fcc55e4d42a148795d9f25f89d4\"", "é‡è¦æ€§": "ä¸­" }, "Expires": { "ç”¨é€”": "æŒ‡å®šèµ„æºè¿‡æœŸæ—¶é—´", "ç¤ºä¾‹": "Expires: Wed, 21 Oct 2024 07:28:00 GMT", "é‡è¦æ€§": "ä¸­" }, "Last-Modified": { "ç”¨é€”": "èµ„æºæœ€åä¿®æ”¹æ—¶é—´", "ç¤ºä¾‹": "Last-Modified: Wed, 21 Oct 2024 07:28:00 GMT", "é‡è¦æ€§": "ä¸­" }, "Location": { "ç”¨é€”": "é‡å®šå‘çš„ç›®æ ‡URL", "ç¤ºä¾‹": "Location: https://example.com/new-page", "é‡è¦æ€§": "é«˜" }, "Set-Cookie": { "ç”¨é€”": "è®¾ç½®Cookie", "ç¤ºä¾‹": "Set-Cookie: sessionid=abc123; HttpOnly; Secure", "é‡è¦æ€§": "é«˜" } } # å¤´å­—æ®µå¤„ç†ç¤ºä¾‹ class HeaderProcessor: """HTTPå¤´å­—æ®µå¤„ç†å™¨""" def __init__(self): self.headers = {} def add_header(self, name, value): """æ·»åŠ å¤´å­—æ®µ""" self.headers[name] = value def get_content_type(self): """è·å–å†…å®¹ç±»å‹""" content_type = self.headers.get('Content-Type', '') if ';' in content_type: return content_type.split(';')[0].strip() return content_type def get_charset(self): """è·å–å­—ç¬¦ç¼–ç """ content_type = self.headers.get('Content-Type', '') if 'charset=' in content_type: return content_type.split('charset=')[1].strip() return 'utf-8' def is_json(self): """åˆ¤æ–­æ˜¯å¦ä¸ºJSONæ ¼å¼""" return self.get_content_type() == 'application/json' def get_cache_control(self): """è§£æCache-Controlå¤´""" cache_control = self.headers.get('Cache-Control', '') directives = {} for directive in cache_control.split(','): directive = directive.strip() if '=' in directive: key, value = directive.split('=', 1) directives[key.strip()] = value.strip() else: directives[directive] = True return directives def get_authorization_type(self): """è·å–è®¤è¯ç±»å‹""" auth = self.headers.get('Authorization', '') if auth: return auth.split(' ')[0] return None # ç¤ºä¾‹ä½¿ç”¨ processor = HeaderProcessor() processor.add_header('Content-Type', 'application/json; charset=utf-8') processor.add_header('Cache-Control', 'public, max-age=3600, must-revalidate') processor.add_header('Authorization', 'Bearer eyJhbGciOiJIUzI1NiIs...') print("å†…å®¹ç±»å‹:", processor.get_content_type()) print("å­—ç¬¦ç¼–ç :", processor.get_charset()) print("æ˜¯å¦JSON:", processor.is_json()) print("ç¼“å­˜æ§åˆ¶:", processor.get_cache_control()) print("è®¤è¯ç±»å‹:", processor.get_authorization_type()) HTTPç¼“å­˜æœºåˆ¶ ç¼“å­˜ç­–ç•¥è¯¦è§£ import hashlib import time from datetime import datetime, timedelta class HTTPCache: """HTTPç¼“å­˜æœºåˆ¶å®ç°""" def __init__(self): self.cache = {} def generate_etag(self, content): """ç”ŸæˆETag""" return hashlib.md5(content.encode()).hexdigest() def is_fresh(self, cache_entry): """æ£€æŸ¥ç¼“å­˜æ˜¯å¦æ–°é²œ""" if 'expires' in cache_entry: return datetime.now() &lt; cache_entry['expires'] if 'max_age' in cache_entry: age = datetime.now() - cache_entry['cached_at'] return age.total_seconds() &lt; cache_entry['max_age'] return False def handle_cache_request(self, url, headers=None): """å¤„ç†ç¼“å­˜è¯·æ±‚""" if headers is None: headers = {} cache_entry = self.cache.get(url) # æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜ if not cache_entry: return {"cache_status": "MISS", "should_fetch": True} # æ£€æŸ¥ç¼“å­˜æ˜¯å¦æ–°é²œ if not self.is_fresh(cache_entry): return {"cache_status": "STALE", "should_fetch": True} # æ£€æŸ¥æ¡ä»¶è¯·æ±‚ if 'If-None-Match' in headers: if headers['If-None-Match'] == cache_entry.get('etag'): return {"cache_status": "NOT_MODIFIED", "should_fetch": False} if 'If-Modified-Since' in headers: if_modified = datetime.strptime(headers['If-Modified-Since'], '%a, %d %b %Y %H:%M:%S GMT') if cache_entry.get('last_modified') and if_modified >= cache_entry['last_modified']: return {"cache_status": "NOT_MODIFIED", "should_fetch": False} return {"cache_status": "HIT", "should_fetch": False, "data": cache_entry['data']} def store_response(self, url, response_data, headers): """å­˜å‚¨å“åº”åˆ°ç¼“å­˜""" cache_entry = { "data": response_data, "cached_at": datetime.now(), "headers": headers } # å¤„ç†ETag if 'ETag' in headers: cache_entry['etag'] = headers['ETag'] # å¤„ç†Last-Modified if 'Last-Modified' in headers: cache_entry['last_modified'] = datetime.strptime( headers['Last-Modified'], '%a, %d %b %Y %H:%M:%S GMT' ) # å¤„ç†Expires if 'Expires' in headers: cache_entry['expires'] = datetime.strptime( headers['Expires'], '%a, %d %b %Y %H:%M:%S GMT' ) # å¤„ç†Cache-Control if 'Cache-Control' in headers: cache_control = self.parse_cache_control(headers['Cache-Control']) if 'max-age' in cache_control: cache_entry['max_age'] = int(cache_control['max-age']) if 'no-cache' in cache_control or 'no-store' in cache_control: return # ä¸ç¼“å­˜ self.cache[url] = cache_entry def parse_cache_control(self, cache_control_header): """è§£æCache-Controlå¤´""" directives = {} for directive in cache_control_header.split(','): directive = directive.strip() if '=' in directive: key, value = directive.split('=', 1) directives[key.strip()] = value.strip() else: directives[directive] = True return directives # ç¼“å­˜ç­–ç•¥ç¤ºä¾‹ class CacheStrategy: """ç¼“å­˜ç­–ç•¥ç¤ºä¾‹""" @staticmethod def get_cache_headers(resource_type, max_age=3600): """æ ¹æ®èµ„æºç±»å‹è·å–ç¼“å­˜å¤´""" strategies = { "static": { "Cache-Control": f"public, max-age={max_age * 24 * 365}", # 1å¹´ "Expires": (datetime.now() + timedelta(days=365)).strftime( '%a, %d %b %Y %H:%M:%S GMT' ) }, "api": { "Cache-Control": f"private, max-age={max_age}", # 1å°æ—¶ "ETag": '"' + hashlib.md5(str(time.time()).encode()).hexdigest() + '"' }, "dynamic": { "Cache-Control": "no-cache, must-revalidate", "Pragma": "no-cache" }, "sensitive": { "Cache-Control": "no-store, no-cache, must-revalidate", "Pragma": "no-cache", "Expires": "0" } } return strategies.get(resource_type, strategies["dynamic"]) # ç¤ºä¾‹ä½¿ç”¨ cache = HTTPCache() # æ¨¡æ‹Ÿç¬¬ä¸€æ¬¡è¯·æ±‚ url = "https://api.example.com/users" result = cache.handle_cache_request(url) print("ç¬¬ä¸€æ¬¡è¯·æ±‚:", result) # å­˜å‚¨å“åº” response_data = {"users": [{"id": 1, "name": "å¼ ä¸‰"}]} response_headers = { "Cache-Control": "public, max-age=3600", "ETag": '"abc123"', "Last-Modified": "Mon, 27 Feb 2024 10:15:30 GMT" } cache.store_response(url, response_data, response_headers) # æ¨¡æ‹Ÿç¬¬äºŒæ¬¡è¯·æ±‚ result = cache.handle_cache_request(url) print("ç¬¬äºŒæ¬¡è¯·æ±‚:", result) # æ¨¡æ‹Ÿæ¡ä»¶è¯·æ±‚ conditional_headers = {"If-None-Match": '"abc123"'} result = cache.handle_cache_request(url, conditional_headers) print("æ¡ä»¶è¯·æ±‚:", result) HTTPå®‰å…¨æœºåˆ¶ HTTPSå’Œå®‰å…¨å¤´ class HTTPSecurity: """HTTPå®‰å…¨æœºåˆ¶""" def __init__(self): self.security_headers = { "Strict-Transport-Security": { "ç”¨é€”": "å¼ºåˆ¶ä½¿ç”¨HTTPS", "ç¤ºä¾‹": "Strict-Transport-Security: max-age=31536000; includeSubDomains", "é˜²æŠ¤": "ä¸­é—´äººæ”»å‡»" }, "Content-Security-Policy": { "ç”¨é€”": "é˜²æ­¢XSSæ”»å‡»", "ç¤ºä¾‹": "Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline'", "é˜²æŠ¤": "è·¨ç«™è„šæœ¬æ”»å‡»" }, "X-Frame-Options": { "ç”¨é€”": "é˜²æ­¢ç‚¹å‡»åŠ«æŒ", "ç¤ºä¾‹": "X-Frame-Options: DENY", "é˜²æŠ¤": "ç‚¹å‡»åŠ«æŒæ”»å‡»" }, "X-Content-Type-Options": { "ç”¨é€”": "é˜²æ­¢MIMEç±»å‹å—…æ¢", "ç¤ºä¾‹": "X-Content-Type-Options: nosniff", "é˜²æŠ¤": "MIMEå—…æ¢æ”»å‡»" }, "X-XSS-Protection": { "ç”¨é€”": "å¯ç”¨XSSè¿‡æ»¤å™¨", "ç¤ºä¾‹": "X-XSS-Protection: 1; mode=block", "é˜²æŠ¤": "åå°„å‹XSSæ”»å‡»" }, "Referrer-Policy": { "ç”¨é€”": "æ§åˆ¶Refererå¤´ä¿¡æ¯", "ç¤ºä¾‹": "Referrer-Policy: strict-origin-when-cross-origin", "é˜²æŠ¤": "ä¿¡æ¯æ³„éœ²" } } def get_security_headers(self, security_level="high"): """è·å–å®‰å…¨å¤´é…ç½®""" if security_level == "high": return { "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload", "Content-Security-Policy": "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'", "X-Frame-Options": "DENY", "X-Content-Type-Options": "nosniff", "X-XSS-Protection": "1; mode=block", "Referrer-Policy": "strict-origin-when-cross-origin" } elif security_level == "medium": return { "Strict-Transport-Security": "max-age=31536000", "Content-Security-Policy": "default-src 'self' 'unsafe-inline'", "X-Frame-Options": "SAMEORIGIN", "X-Content-Type-Options": "nosniff" } else: return { "X-Content-Type-Options": "nosniff" } def validate_request(self, headers, body=None): """éªŒè¯è¯·æ±‚å®‰å…¨æ€§""" issues = [] # æ£€æŸ¥Content-Type if body and 'Content-Type' not in headers: issues.append("ç¼ºå°‘Content-Typeå¤´") # æ£€æŸ¥CSRFä¿æŠ¤ if headers.get('Content-Type', '').startswith('application/json'): if 'X-Requested-With' not in headers and 'X-CSRF-Token' not in headers: issues.append("å¯èƒ½å­˜åœ¨CSRFé£é™©") # æ£€æŸ¥è®¤è¯ if 'Authorization' not in headers and 'Cookie' not in headers: issues.append("ç¼ºå°‘è®¤è¯ä¿¡æ¯") return { "is_secure": len(issues) == 0, "issues": issues } # CORSå¤„ç† class CORSHandler: """CORSè·¨åŸŸèµ„æºå…±äº«å¤„ç†""" def __init__(self, allowed_origins=None, allowed_methods=None, allowed_headers=None): self.allowed_origins = allowed_origins or ['*'] self.allowed_methods = allowed_methods or ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'] self.allowed_headers = allowed_headers or ['Content-Type', 'Authorization', 'X-Requested-With'] def handle_preflight(self, origin, method, headers): """å¤„ç†é¢„æ£€è¯·æ±‚""" response_headers = {} # æ£€æŸ¥æ¥æº if self.is_origin_allowed(origin): response_headers['Access-Control-Allow-Origin'] = origin # æ£€æŸ¥æ–¹æ³• if method in self.allowed_methods: response_headers['Access-Control-Allow-Methods'] = ', '.join(self.allowed_methods) # æ£€æŸ¥å¤´éƒ¨ if headers: requested_headers = [h.strip() for h in headers.split(',')] allowed = [h for h in requested_headers if h in self.allowed_headers] if allowed: response_headers['Access-Control-Allow-Headers'] = ', '.join(allowed) response_headers['Access-Control-Max-Age'] = '86400' # 24å°æ—¶ return response_headers def handle_actual_request(self, origin): """å¤„ç†å®é™…è¯·æ±‚""" response_headers = {} if self.is_origin_allowed(origin): response_headers['Access-Control-Allow-Origin'] = origin response_headers['Access-Control-Allow-Credentials'] = 'true' return response_headers def is_origin_allowed(self, origin): """æ£€æŸ¥æ¥æºæ˜¯å¦è¢«å…è®¸""" return '*' in self.allowed_origins or origin in self.allowed_origins # ç¤ºä¾‹ä½¿ç”¨ security = HTTPSecurity() print("é«˜å®‰å…¨çº§åˆ«å¤´éƒ¨:", security.get_security_headers("high")) # CORSç¤ºä¾‹ cors = CORSHandler( allowed_origins=['https://example.com', 'https://app.example.com'], allowed_methods=['GET', 'POST', 'PUT', 'DELETE'], allowed_headers=['Content-Type', 'Authorization'] ) preflight_headers = cors.handle_preflight( origin='https://example.com', method='POST', headers='Content-Type, Authorization' ) print("é¢„æ£€å“åº”å¤´:", preflight_headers) HTTP/2 å’Œ HTTP/3 æ–°ç‰¹æ€§ HTTP/2 ç‰¹æ€§ class HTTP2Features: """HTTP/2 ç‰¹æ€§æ¼”ç¤º""" def __init__(self): self.streams = {} self.next_stream_id = 1 def create_stream(self, method, path, headers=None): """åˆ›å»ºHTTP/2æµ""" stream_id = self.next_stream_id self.next_stream_id += 2 # å®¢æˆ·ç«¯æµIDä¸ºå¥‡æ•° stream = { "id": stream_id, "method": method, "path": path, "headers": headers or {}, "state": "open", "priority": 16, # é»˜è®¤ä¼˜å…ˆçº§ "dependency": 0 } self.streams[stream_id] = stream return stream_id def set_priority(self, stream_id, priority, dependency=0): """è®¾ç½®æµä¼˜å…ˆçº§""" if stream_id in self.streams: self.streams[stream_id]["priority"] = priority self.streams[stream_id]["dependency"] = dependency def server_push(self, parent_stream_id, path, headers=None): """æœåŠ¡å™¨æ¨é€""" push_stream_id = self.next_stream_id + 1 self.next_stream_id += 2 push_stream = { "id": push_stream_id, "method": "GET", "path": path, "headers": headers or {}, "state": "reserved_local", "parent": parent_stream_id, "pushed": True } self.streams[push_stream_id] = push_stream return push_stream_id def compress_headers(self, headers): """HPACKå¤´éƒ¨å‹ç¼©æ¨¡æ‹Ÿ""" # ç®€åŒ–çš„å¤´éƒ¨å‹ç¼©ç¤ºä¾‹ compressed_size = 0 static_table = { ":method": {"GET": 2, "POST": 3}, ":path": {"/": 4}, ":scheme": {"https": 7}, "content-type": {"application/json": 31} } for name, value in headers.items(): if name in static_table and value in static_table[name]: compressed_size += 1 # ç´¢å¼•å¼•ç”¨ else: compressed_size += len(name) + len(value) # å­—é¢é‡ original_size = sum(len(k) + len(v) for k, v in headers.items()) compression_ratio = compressed_size / original_size if original_size > 0 else 1 return { "original_size": original_size, "compressed_size": compressed_size, "compression_ratio": compression_ratio } # HTTP/3 ç‰¹æ€§ class HTTP3Features: """HTTP/3 ç‰¹æ€§æ¼”ç¤º""" def __init__(self): self.connections = {} self.connection_id = 0 def create_connection(self, server_name): """åˆ›å»ºQUICè¿æ¥""" self.connection_id += 1 connection = { "id": self.connection_id, "server_name": server_name, "state": "handshaking", "streams": {}, "rtt": 0, "congestion_window": 10, "migration_capable": True } self.connections[self.connection_id] = connection return self.connection_id def zero_rtt_request(self, connection_id, method, path, early_data=None): """0-RTTè¯·æ±‚""" if connection_id not in self.connections: return None connection = self.connections[connection_id] # æ¨¡æ‹Ÿ0-RTTè¯·æ±‚ request = { "method": method, "path": path, "early_data": early_data, "rtt": 0, # 0-RTT "timestamp": time.time() } return request def connection_migration(self, connection_id, new_address): """è¿æ¥è¿ç§»""" if connection_id not in self.connections: return False connection = self.connections[connection_id] if connection["migration_capable"]: connection["address"] = new_address connection["migrated"] = True return True return False def get_performance_comparison(self): """æ€§èƒ½å¯¹æ¯”""" return { "HTTP/1.1": { "è¿æ¥å»ºç«‹": "3-RTT (TCP + TLS)", "å¤šè·¯å¤ç”¨": "æ— ", "å¤´éƒ¨å‹ç¼©": "æ— ", "æœåŠ¡å™¨æ¨é€": "æ— " }, "HTTP/2": { "è¿æ¥å»ºç«‹": "3-RTT (TCP + TLS)", "å¤šè·¯å¤ç”¨": "æœ‰ (å•è¿æ¥)", "å¤´éƒ¨å‹ç¼©": "HPACK", "æœåŠ¡å™¨æ¨é€": "æœ‰" }, "HTTP/3": { "è¿æ¥å»ºç«‹": "1-RTT (QUIC)", "å¤šè·¯å¤ç”¨": "æœ‰ (æ— é˜Ÿå¤´é˜»å¡)", "å¤´éƒ¨å‹ç¼©": "QPACK", "æœåŠ¡å™¨æ¨é€": "æœ‰", "è¿æ¥è¿ç§»": "æœ‰", "0-RTT": "æœ‰" } } # ç¤ºä¾‹ä½¿ç”¨ http2 = HTTP2Features() # åˆ›å»ºå¤šä¸ªæµ stream1 = http2.create_stream("GET", "/api/users") stream2 = http2.create_stream("GET", "/api/posts") stream3 = http2.create_stream("GET", "/static/app.js") # è®¾ç½®ä¼˜å…ˆçº§ http2.set_priority(stream3, 8) # é™æ€èµ„æºä¼˜å…ˆçº§è¾ƒä½ # æœåŠ¡å™¨æ¨é€ push_stream = http2.server_push(stream1, "/static/style.css") # å¤´éƒ¨å‹ç¼© headers = { ":method": "GET", ":path": "/api/users", ":scheme": "https", "content-type": "application/json" } compression_result = http2.compress_headers(headers) print("å¤´éƒ¨å‹ç¼©ç»“æœ:", compression_result) # HTTP/3ç¤ºä¾‹ http3 = HTTP3Features() conn_id = http3.create_connection("api.example.com") # 0-RTTè¯·æ±‚ zero_rtt_req = http3.zero_rtt_request(conn_id, "GET", "/api/users") print("0-RTTè¯·æ±‚:", zero_rtt_req) # æ€§èƒ½å¯¹æ¯” comparison = http3.get_performance_comparison() for version, features in comparison.items(): print(f"\n{version}:") for feature, value in features.items(): print(f" {feature}: {value}") å®é™…åº”ç”¨å’Œæœ€ä½³å®è·µ Web APIè®¾è®¡æœ€ä½³å®è·µ class WebAPIBestPractices: """Web APIè®¾è®¡æœ€ä½³å®è·µ""" def __init__(self): self.api_guidelines = { "URLè®¾è®¡": [ "ä½¿ç”¨åè¯è€ŒéåŠ¨è¯", "ä½¿ç”¨å¤æ•°å½¢å¼", "ä¿æŒURLç®€æ´", "ä½¿ç”¨è¿å­—ç¬¦åˆ†éš”å•è¯" ], "HTTPæ–¹æ³•ä½¿ç”¨": [ "GET: è·å–èµ„æº", "POST: åˆ›å»ºèµ„æº", "PUT: å®Œæ•´æ›´æ–°èµ„æº", "PATCH: éƒ¨åˆ†æ›´æ–°èµ„æº", "DELETE: åˆ é™¤èµ„æº" ], "çŠ¶æ€ç ä½¿ç”¨": [ "200: æˆåŠŸ", "201: åˆ›å»ºæˆåŠŸ", "204: æ— å†…å®¹", "400: è¯·æ±‚é”™è¯¯", "401: æœªæˆæƒ", "403: ç¦æ­¢è®¿é—®", "404: èµ„æºæœªæ‰¾åˆ°", "500: æœåŠ¡å™¨é”™è¯¯" ], "å“åº”æ ¼å¼": [ "ä½¿ç”¨JSONæ ¼å¼", "ä¿æŒå“åº”ç»“æ„ä¸€è‡´", "åŒ…å«é€‚å½“çš„å…ƒæ•°æ®", "æä¾›é”™è¯¯è¯¦æƒ…" ] } def design_api_response(self, data=None, error=None, meta=None): """è®¾è®¡APIå“åº”æ ¼å¼""" response = {} if error: response["success"] = False response["error"] = { "code": error.get("code", "UNKNOWN_ERROR"), "message": error.get("message", "An error occurred"), "details": error.get("details") } else: response["success"] = True response["data"] = data if meta: response["meta"] = meta response["timestamp"] = datetime.now().isoformat() return response def paginate_response(self, items, page=1, per_page=20, total=None): """åˆ†é¡µå“åº”""" start = (page - 1) * per_page end = start + per_page paginated_items = items[start:end] if total is None: total = len(items) total_pages = (total + per_page - 1) // per_page return self.design_api_response( data=paginated_items, meta={ "pagination": { "page": page, "per_page": per_page, "total": total, "total_pages": total_pages, "has_next": page &lt; total_pages, "has_prev": page > 1 } } ) def validate_request(self, request_data, required_fields=None): """è¯·æ±‚éªŒè¯""" errors = [] if required_fields: for field in required_fields: if field not in request_data: errors.append(f"ç¼ºå°‘å¿…éœ€å­—æ®µ: {field}") elif not request_data[field]: errors.append(f"å­—æ®µä¸èƒ½ä¸ºç©º: {field}") return { "is_valid": len(errors) == 0, "errors": errors } # æ€§èƒ½ä¼˜åŒ–å»ºè®® class HTTPPerformanceOptimization: """HTTPæ€§èƒ½ä¼˜åŒ–""" def __init__(self): self.optimization_techniques = { "ç¼“å­˜ç­–ç•¥": [ "è®¾ç½®é€‚å½“çš„Cache-Controlå¤´", "ä½¿ç”¨ETagè¿›è¡Œæ¡ä»¶è¯·æ±‚", "å®æ–½CDNç¼“å­˜", "ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜" ], "å‹ç¼©æŠ€æœ¯": [ "å¯ç”¨Gzip/Brotliå‹ç¼©", "å‹ç¼©é™æ€èµ„æº", "ä¼˜åŒ–å›¾ç‰‡æ ¼å¼", "ä½¿ç”¨WebPæ ¼å¼" ], "è¿æ¥ä¼˜åŒ–": [ "ä½¿ç”¨HTTP/2æˆ–HTTP/3", "å¯ç”¨Keep-Alive", "å‡å°‘DNSæŸ¥è¯¢", "ä½¿ç”¨è¿æ¥æ± " ], "è¯·æ±‚ä¼˜åŒ–": [ "å‡å°‘HTTPè¯·æ±‚æ•°é‡", "åˆå¹¶CSSå’ŒJavaScriptæ–‡ä»¶", "ä½¿ç”¨é›ªç¢§å›¾", "å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº" ] } def analyze_performance(self, response_time, response_size, cache_hit_ratio): """æ€§èƒ½åˆ†æ""" analysis = { "response_time": { "value": response_time, "status": "good" if response_time &lt; 200 else "needs_improvement" }, "response_size": { "value": response_size, "status": "good" if response_size &lt; 1024 * 1024 else "large" }, "cache_efficiency": { "hit_ratio": cache_hit_ratio, "status": "good" if cache_hit_ratio > 0.8 else "needs_improvement" } } recommendations = [] if response_time > 200: recommendations.append("è€ƒè™‘ä½¿ç”¨CDNæˆ–ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´") if response_size > 1024 * 1024: recommendations.append("å¯ç”¨å‹ç¼©æˆ–ä¼˜åŒ–å“åº”å†…å®¹") if cache_hit_ratio &lt; 0.8: recommendations.append("ä¼˜åŒ–ç¼“å­˜ç­–ç•¥") analysis["recommendations"] = recommendations return analysis # ç¤ºä¾‹ä½¿ç”¨ api = WebAPIBestPractices() # è®¾è®¡æˆåŠŸå“åº” success_response = api.design_api_response( data={"id": 1, "name": "å¼ ä¸‰", "email": "zhangsan@example.com"} ) print("æˆåŠŸå“åº”:", success_response) # è®¾è®¡é”™è¯¯å“åº” error_response = api.design_api_response( error={ "code": "VALIDATION_ERROR", "message": "è¯·æ±‚æ•°æ®éªŒè¯å¤±è´¥", "details": ["é‚®ç®±æ ¼å¼ä¸æ­£ç¡®", "å¯†ç é•¿åº¦ä¸è¶³"] } ) print("é”™è¯¯å“åº”:", error_response) # åˆ†é¡µå“åº” users = [{"id": i, "name": f"ç”¨æˆ·{i}"} for i in range(1, 101)] paginated = api.paginate_response(users, page=2, per_page=10) print("åˆ†é¡µå“åº”:", paginated) # æ€§èƒ½åˆ†æ perf = HTTPPerformanceOptimization() analysis = perf.analyze_performance( response_time=150, # ms response_size=512 * 1024, # bytes cache_hit_ratio=0.75 ) print("æ€§èƒ½åˆ†æ:", analysis) å­¦ä¹ å»ºè®®å’Œæ€»ç»“ HTTPå­¦ä¹ è·¯å¾„ åŸºç¡€æ¦‚å¿µï¼šç†è§£HTTPçš„å·¥ä½œåŸç†å’Œç‰¹ç‚¹ åè®®ç»†èŠ‚ï¼šæŒæ¡è¯·æ±‚å“åº”æ ¼å¼ã€çŠ¶æ€ç ã€å¤´å­—æ®µ ç¼“å­˜æœºåˆ¶ï¼šå­¦ä¹ HTTPç¼“å­˜ç­–ç•¥å’Œå®ç° å®‰å…¨æœºåˆ¶ï¼šäº†è§£HTTPSã€CORSã€å®‰å…¨å¤´ç­‰ æ€§èƒ½ä¼˜åŒ–ï¼šæŒæ¡HTTPæ€§èƒ½ä¼˜åŒ–æŠ€å·§ æ–°ç‰ˆæœ¬ç‰¹æ€§ï¼šå­¦ä¹ HTTP/2å’ŒHTTP/3çš„æ–°ç‰¹æ€§ å…³é”®è¦ç‚¹æ€»ç»“ æ–¹é¢ è¦ç‚¹ å®è·µå»ºè®® è¯·æ±‚æ–¹æ³• æ­£ç¡®ä½¿ç”¨GETã€POSTã€PUTã€DELETEç­‰ éµå¾ªRESTfulè®¾è®¡åŸåˆ™ çŠ¶æ€ç  è¿”å›åˆé€‚çš„HTTPçŠ¶æ€ç  æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ ç¼“å­˜ åˆç†è®¾ç½®ç¼“å­˜ç­–ç•¥ å¹³è¡¡æ€§èƒ½å’Œæ•°æ®æ–°é²œåº¦ å®‰å…¨ å®æ–½é€‚å½“çš„å®‰å…¨æªæ–½ ä½¿ç”¨HTTPSå’Œå®‰å…¨å¤´ æ€§èƒ½ ä¼˜åŒ–è¯·æ±‚å’Œå“åº” ä½¿ç”¨å‹ç¼©å’ŒCDN å®é™…åº”ç”¨å»ºè®® APIè®¾è®¡ï¼šéµå¾ªRESTfulåŸåˆ™ï¼Œä¿æŒæ¥å£ä¸€è‡´æ€§ é”™è¯¯å¤„ç†ï¼šæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤„ç†å»ºè®® æ–‡æ¡£åŒ–ï¼šç»´æŠ¤å®Œæ•´çš„APIæ–‡æ¡£ ç›‘æ§ï¼šå®æ–½æ€§èƒ½ç›‘æ§å’Œæ—¥å¿—è®°å½• ç‰ˆæœ¬æ§åˆ¶ï¼šåˆç†ç®¡ç†APIç‰ˆæœ¬ HTTPåè®®æ˜¯Webå¼€å‘çš„åŸºç¡€ï¼Œæ·±å…¥ç†è§£å…¶å·¥ä½œåŸç†å’Œæœ€ä½³å®è·µå¯¹äºæ„å»ºé«˜è´¨é‡çš„Webåº”ç”¨è‡³å…³é‡è¦ã€‚éšç€HTTP/2å’ŒHTTP/3çš„æ™®åŠï¼ŒæŒæ¡æ–°ç‰¹æ€§å°†æœ‰åŠ©äºè¿›ä¸€æ­¥æå‡åº”ç”¨æ€§èƒ½ã€‚
...</p></div><footer class=entry-footer><span title='2024-02-28 10:15:00 +0800 CST'>February 28, 2024</span>&nbsp;Â·&nbsp;15 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to HTTPåè®®è¯¦è§£ï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨" href=https://tyhzxh.github.io/posts/http-protocol-guide/></a></article><article class=post-entry><header class=entry-header><h2>ç»å…¸æ’åºç®—æ³•å®ç°ä¸åˆ†æ</h2></header><div class=entry-meta><span title='2024-02-27 22:11:13 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>å‰è¨€ è¿™æ˜¯æŸæ¬¡å­¦æ ¡æ•°æ®ç»“æ„å®éªŒä¸­å®ç°çš„åŸºæœ¬æ’åºç®—æ³•ã€‚æ•°æ®ç»“æ„è¿™é—¨è¯¾çš„éš¾ç‚¹åœ¨äºå®ç°çš„å¤æ‚æ€§ï¼Œæ¯æ¬¡å®éªŒéƒ½éœ€è¦å°è£…æ•°æ®ç»“æ„ï¼Œç¼–å†™æµ‹è¯•ç¨‹åºï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ç¡®å®æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚
é€šè¿‡è¿™æ¬¡å®éªŒï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†ä»£ç è´¨é‡çš„é‡è¦æ€§ã€‚è™½ç„¶å½“æ—¶çš„ä»£ç å¯èƒ½ä¸å¤Ÿä¼˜é›…ï¼Œä½†è¿™æ­£æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­çš„å®è´µç»å†ã€‚
åŸºæœ¬æ•°æ®ç»“æ„å°è£… é¦–å…ˆå®šä¹‰åŸºæœ¬çš„æ•°æ®ç»“æ„å’Œå·¥å…·å‡½æ•°ï¼š
#include "stdio.h" #include &lt;iostream> #include &lt;ctime> #include &lt;cstdlib> #define ERROR 0 #define OK 1 #define Overflow 2 #define Underflow 3 #define NotPresent 4 // å…ƒç´ ä¸å­˜åœ¨ #define Duplicate 5 // å…ƒç´ é‡å¤å­˜åœ¨ #define MaxSize 100001 typedef int KeyType; typedef int Status; typedef int DataType; typedef struct Entry { KeyType key; DataType data; } entry; typedef struct list { int n; Entry D[MaxSize]; } List; // è¾“å‡ºå‡½æ•° Status printlist(list* l) { for(int i = 0; i &lt; l->n; i++) { printf("%d ", l->D[i].key); } return OK; } // äº¤æ¢å‡½æ•° void swap(Entry* a, Entry* b) { Entry temp = *a; *a = *b; *b = temp; } æ’åºç®—æ³•å®ç° 1. ç®€å•é€‰æ‹©æ’åº é€‰æ‹©æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯æ¯æ¬¡ä»æœªæ’åºçš„å…ƒç´ ä¸­é€‰æ‹©æœ€å°çš„å…ƒç´ ï¼Œæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚
...</p></div><footer class=entry-footer><span title='2024-02-27 22:11:13 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to ç»å…¸æ’åºç®—æ³•å®ç°ä¸åˆ†æ" href=https://tyhzxh.github.io/posts/sorting-algorithms-implementation/></a></article><article class=post-entry><header class=entry-header><h2>åŠ¨æ€è§„åˆ’å®Œå…¨æ”»ç•¥ï¼šä»å…¥é—¨åˆ°ç²¾é€š</h2></header><div class=entry-meta><span title='2024-02-27 22:05:43 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>ä»Šå¤©å¼€å§‹ï¼DPï¼é’ˆå¯¹åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰çš„ç³»ç»Ÿè®­ç»ƒï¼Œè¿™æ˜¯ä¸€å¥—å®Œæ•´çš„è®­ç»ƒæ–¹æ¡ˆï¼Œä»æ ¸å¿ƒæ€ç»´åˆ°é«˜é¢‘é¢˜å‹å†åˆ°å®æˆ˜æŠ€å·§å…¨é¢è¦†ç›–ã€‚
ä¸€ã€åŠ¨æ€è§„åˆ’æ ¸å¿ƒæ€ç»´è®­ç»ƒ 1. ç ´é™¤ä¸¤å¤§è¯¯åŒº âŒ è¯¯åŒº1ï¼šå¿…é¡»æ‰¾åˆ°æœ€ä¼˜å­ç»“æ„æ‰èƒ½ç”¨DP
âœ… æ­£ç¡®å§¿åŠ¿ï¼šå…ˆæš´åŠ›é€’å½’ â†’ å‘ç°é‡å å­é—®é¢˜ â†’ æ”¹è®°å¿†åŒ–æœç´¢ â†’ å†æ¨å¯¼DPæ–¹ç¨‹
âŒ è¯¯åŒº2ï¼šDPå¿…é¡»ç”¨æ•°ç»„å­˜å‚¨çŠ¶æ€
âœ… æ­£ç¡®å§¿åŠ¿ï¼šå­¦ä¼šçŠ¶æ€å‹ç¼©ï¼ˆå¦‚æ‰“å®¶åŠ«èˆç”¨ä¸¤ä¸ªå˜é‡ä»£æ›¿æ•°ç»„ï¼‰
2. å››æ­¥è§£é¢˜æ³•ï¼ˆç”¨çˆ¬æ¥¼æ¢¯é—®é¢˜å®è·µï¼‰ # åŸé¢˜ï¼šæ¯æ¬¡çˆ¬1æˆ–2é˜¶ï¼Œåˆ°né˜¶æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Ÿ # 1. å®šä¹‰çŠ¶æ€ï¼šdp[i]è¡¨ç¤ºåˆ°ié˜¶çš„æ–¹æ³•æ•° # 2. åˆå§‹çŠ¶æ€ï¼šdp[0]=1, dp[1]=1ï¼ˆæ³¨æ„ä¸æ˜¯å¸¸è§„çš„dp[0]=0ï¼‰ # 3. çŠ¶æ€è½¬ç§»ï¼šdp[i] = dp[i-1] + dp[i-2] # 4. ä¼˜åŒ–ç©ºé—´ï¼šåªéœ€prevå’Œcurrä¸¤ä¸ªå˜é‡æ»šåŠ¨è®¡ç®— def climbStairs(n): if n &lt;= 1: return 1 prev, curr = 1, 1 for i in range(2, n+1): prev, curr = curr, prev + curr return curr 3. é«˜é¢‘çŠ¶æ€è½¬ç§»ç±»å‹ ç±»å‹ ç»å…¸ä¾‹é¢˜ çŠ¶æ€è½¬ç§»å…³é”®ç‚¹ å•åºåˆ—çº¿æ€§DP æ‰“å®¶åŠ«èˆ(198) dp[i] = max(dp[i-1], dp[i-2]+nums[i]) åŒåºåˆ—åŒ¹é…DP æœ€é•¿å…¬å…±å­åºåˆ—(1143) dp[i][j] = 1+dp[i-1][j-1] if s[i]==t[j] åŒºé—´DP æœ€é•¿å›æ–‡å­ä¸²(5) dp[i][j] = (s[i]==s[j]) and dp[i+1][j-1] èƒŒåŒ…DP åˆ†å‰²ç­‰å’Œå­é›†(416) dp[j] = dp[j] or dp[j-num] çŠ¶æ€æœºDP ä¹°å–è‚¡ç¥¨æœ€ä½³æ—¶æœº(121/122) æŒæœ‰/æœªæŒæœ‰ä¸¤ç§çŠ¶æ€è½¬æ¢ äºŒã€é˜¶æ¢¯å¼è®­ç»ƒè·¯çº¿ é˜¶æ®µ1ï¼šåŸºç¡€æ¨¡å‹æ­å»ºï¼ˆ1-2å‘¨ï¼‰ é¢˜ç›® è®­ç»ƒé‡ç‚¹ çªç ´æŠ€å·§ 70. çˆ¬æ¥¼æ¢¯ æ–æ³¢é‚£å¥‘å‹DP ç©ºé—´å‹ç¼©åˆ°O(1) 118. æ¨è¾‰ä¸‰è§’ äºŒç»´DPå¡«è¡¨é€»è¾‘ è§‚å¯Ÿè¡Œåˆ—å…³ç³» 121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº çŠ¶æ€æœºæ¨¡å‹ ç»´æŠ¤min_priceå’Œmax_profit 53. æœ€å¤§å­æ•°ç»„å’Œ å†³ç­–å‹DPï¼ˆé€‰æˆ–ä¸é€‰ï¼‰ ç”¨curr_maxä»£æ›¿dpæ•°ç»„ 746. ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯ è·¯å¾„æˆæœ¬è®¡ç®— é€†å‘æ¨å¯¼æ›´ç®€å• é˜¶æ®µ2ï¼šç»å…¸é¢˜å‹çªç ´ï¼ˆ2-3å‘¨ï¼‰ é¢˜ç›® éš¾ç‚¹è§£æ ä»£ç æ¨¡æ¿ç‰‡æ®µ 198. æ‰“å®¶åŠ«èˆ ç›¸é‚»ä¸èƒ½é€‰ max(dp[i-1], dp[i-2]+nums[i]) 322. é›¶é’±å…‘æ¢ å®Œå…¨èƒŒåŒ…æœ€å°å€¼ dp[amt] = min(dp[amt], dp[amt-coin]+1) 300. æœ€é•¿é€’å¢å­åºåˆ— O(nÂ²)ä¸O(nlogn)ä¸¤ç§è§£æ³• äºŒåˆ†æŸ¥æ‰¾ç»´æŠ¤tailsæ•°ç»„ 1143. æœ€é•¿å…¬å…±å­åºåˆ— åŒåºåˆ—åŒ¹é… if s[i]==t[j]: dp[i][j]=dp[i-1][j-1]+1 139. å•è¯æ‹†åˆ† å­—ç¬¦ä¸²åˆ†æ®µåˆ¤æ–­ dp[i] = any(dp[j] and s[j:i] in dict) é˜¶æ®µ3ï¼šé«˜éš¾åº¦æŒ‘æˆ˜ï¼ˆ3-4å‘¨ï¼‰ é¢˜ç›® ç ´é¢˜å…³é”®ç‚¹ ä¼˜åŒ–æŠ€å·§ 72. ç¼–è¾‘è·ç¦» ä¸‰ç§æ“ä½œçš„çŠ¶æ€è½¬ç§» ç©ºé—´å‹ç¼©åˆ°ä¸€ç»´æ•°ç»„ 152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ å¤„ç†è´Ÿæ•°ä¹˜ç§¯ åŒæ—¶ç»´æŠ¤maxå’Œmin 312. æˆ³æ°”çƒ åŒºé—´DPé€†å‘æ€ç»´ ä»æœ€åæˆ³ç ´çš„æ°”çƒå€’æ¨ 10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… æ˜Ÿå·åŒ¹é…çš„ç‰¹æ®Šå¤„ç† åˆ†æƒ…å†µè®¨è®ºpatternçš„ç¬¬äºŒä¸ªå­—ç¬¦ 887. é¸¡è›‹æ‰è½ å†³ç­–æœ€ä¼˜åŒ–çš„æ•°å­¦æ¨å¯¼ é€†å‘æ€ç»´+äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ– ä¸‰ã€é¿å‘æŒ‡å—ä¸å®æˆ˜æŠ€å·§ 1. äº”å¤§å¸¸è§é”™è¯¯ç±»å‹ ğŸš« åˆå§‹åŒ–é”™è¯¯ï¼šæ¯”å¦‚èƒŒåŒ…é—®é¢˜ä¸­dp[0]åº”è¯¥åˆå§‹åŒ–ä¸ºTrue ğŸš« éå†é¡ºåºé”™è¯¯ï¼šå®Œå…¨èƒŒåŒ…è¦æ­£åºå¾ªç¯ï¼Œ01èƒŒåŒ…è¦å€’åºå¾ªç¯ ğŸš« çŠ¶æ€è½¬ç§»é—æ¼ï¼šå¦‚ç¼–è¾‘è·ç¦»å¿˜è®°è€ƒè™‘replaceæ“ä½œ ğŸš« äºŒç»´DPè¡Œåˆ—æ··æ·†ï¼šæŠŠsçš„é•¿åº¦å½“ä½œè¡Œè¿˜æ˜¯åˆ—è¦ç»Ÿä¸€ ğŸš« ç©ºé—´å‹ç¼©é™·é˜±ï¼šè¦†ç›–æœªä½¿ç”¨çš„æ—§å€¼å¯¼è‡´é”™è¯¯ 2. ä¸‰æ­¥ä¼˜åŒ–æ–¹æ³•è®º 1. **æš´åŠ›é€’å½’** â†’ å†™å‡ºåŸºæœ¬çŠ¶æ€è½¬ç§» - æ–æ³¢é‚£å¥‘æ•°åˆ—é€’å½’ç‰ˆ 2. **è®°å¿†åŒ–æœç´¢** â†’ æ·»åŠ ç¼“å­˜ï¼ˆ@lru_cacheï¼‰ - ç”¨è£…é¥°å™¨è‡ªåŠ¨ç¼“å­˜å‚æ•° 3. **æ¨å¯¼DPæ–¹ç¨‹** â†’ ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ - è§‚å¯ŸçŠ¶æ€ä¾èµ–å…³ç³»ï¼Œå‹ç¼©ç»´åº¦ 3. é¢è¯•åº”ç­”æŠ€å·§ ğŸ’¡ å…ˆè¯´å‡ºæš´åŠ›è§£çš„æ—¶é—´å¤æ‚åº¦ ğŸ’¡ æ˜ç¡®è¯´å‡ºDPæ•°ç»„çš„å®šä¹‰å’Œç»´åº¦ ğŸ’¡ åœ¨ç™½æ¿ä¸Šå…ˆå†™çŠ¶æ€è½¬ç§»æ–¹ç¨‹å†ç¼–ç  ğŸ’¡ ä¸»åŠ¨è®¨è®ºç©ºé—´ä¼˜åŒ–å¯èƒ½æ€§ å››ã€é…å¥—è®­ç»ƒèµ„æº 1. å¯è§†åŒ–å­¦ä¹  DPV ç®—æ³•å¯è§†åŒ–ç½‘ç«™ - åŠ¨æ€å±•ç¤ºDPæ‰§è¡Œè¿‡ç¨‹ VisuAlgo åŠ¨æ€è§„åˆ’ä¸“é¢˜ - åŒ…å«LCSã€èƒŒåŒ…ç­‰é—®é¢˜åŠ¨ç”» 2. ä¸“é¡¹é¢˜å• LeetCodeåŠ¨æ€è§„åˆ’åˆ†ç±» â†’ æŒ‰é€šè¿‡ç‡æ’åºç»ƒä¹  ç»å…¸DPé—®é¢˜Top 50 â†’ æ¶µç›–æ‰€æœ‰DPç±»å‹ 3. é”™é¢˜æœ¬æ¨¡æ¿ ## 72. ç¼–è¾‘è·ç¦» ### é”™è¯¯è®°å½• - åˆå§‹ç‰ˆæœ¬å¿˜è®°å¤„ç†ç©ºå­—ç¬¦ä¸²æƒ…å†µ - è¯¯å°†æ›¿æ¢æ“ä½œçš„æˆæœ¬è®¡ç®—ä¸º2ï¼ˆæ­£ç¡®æ˜¯1ï¼‰ ### çŠ¶æ€è½¬ç§»è¡¨ | | "" | r | o | s | |-------|----|---|---|---| | "" | 0 | 1 | 2 | 3 | | h | 1 | 1 | 2 | 3 | | o | 2 | 2 | 1 | 2 | | r | 3 | 2 | 2 | 2 | | s | 4 | 3 | 3 | 2 | äº”ã€è®­ç»ƒè®¡åˆ’å»ºè®® æ¯æ—¥ä»»åŠ¡ ä¸Šåˆï¼šç²¾åš1é“æ–°DPé¢˜ï¼ˆæŒ‰é˜¶æ®µé€‰æ‹©éš¾åº¦ï¼‰ ä¸‹åˆï¼šå¤ä¹ 2é“æ—§é¢˜ï¼Œå†™å‡ºç©ºé—´ä¼˜åŒ–ç‰ˆæœ¬ æ™šä¸Šï¼šè§‚çœ‹å¯¹åº”é¢˜ç›®çš„è®²è§£è§†é¢‘ æ¯å‘¨æ£€éªŒ å‘¨èµ›è‡³å°‘å®Œæˆ2é“DPç›¸å…³é¢˜ç›® æ•´ç†æœ¬å‘¨çš„DPç±»å‹æ€ç»´å¯¼å›¾ é¢„æœŸæ•ˆæœ åšæŒæŒ‰ç…§è¿™ä¸ªæ–¹æ¡ˆè®­ç»ƒ2ä¸ªæœˆåï¼Œä½ ä¼šæ˜æ˜¾å‘ç°ï¼š
...</p></div><footer class=entry-footer><span title='2024-02-27 22:05:43 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to åŠ¨æ€è§„åˆ’å®Œå…¨æ”»ç•¥ï¼šä»å…¥é—¨åˆ°ç²¾é€š" href=https://tyhzxh.github.io/posts/dynamic-programming-guide/></a></article><article class=post-entry><header class=entry-header><h2>æœç´¢ç®—æ³•è¯¦è§£ï¼šBFSä¸DFSçš„åŸç†å’Œåº”ç”¨</h2></header><div class=entry-meta><span title='2024-02-27 22:05:13 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>æœç´¢ç®—æ³•æ¦‚è¿° æœç´¢ç®—æ³•æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„åŸºç¡€ç®—æ³•ï¼Œç”¨äºåœ¨æ•°æ®ç»“æ„ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´ æˆ–è·¯å¾„ã€‚åœ¨å›¾è®ºå’Œæ ‘ç»“æ„ä¸­ï¼Œæœ€é‡è¦çš„ä¸¤ç§æœç´¢ç®—æ³•æ˜¯å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€‚
å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ BFSåŸºæœ¬åŸç† **å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Searchï¼‰**æ˜¯ä¸€ç§å›¾éå†ç®—æ³•ï¼Œå®ƒä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚å‘å¤–æ‰©å±•ï¼Œå…ˆè®¿é—®è·ç¦»èµ·å§‹èŠ‚ç‚¹æœ€è¿‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå†è®¿é—®è·ç¦»æ›´è¿œçš„èŠ‚ç‚¹ã€‚
BFSæ ¸å¿ƒç‰¹ç‚¹ ç‰¹ç‚¹ æè¿° åº”ç”¨åœºæ™¯ å±‚æ¬¡éå† æŒ‰è·ç¦»èµ·å§‹ç‚¹çš„å±‚æ¬¡é€å±‚è®¿é—® æœ€çŸ­è·¯å¾„é—®é¢˜ é˜Ÿåˆ—å®ç° ä½¿ç”¨é˜Ÿåˆ—ï¼ˆFIFOï¼‰å­˜å‚¨å¾…è®¿é—®èŠ‚ç‚¹ ä¿è¯è®¿é—®é¡ºåº å®Œå¤‡æ€§ å¦‚æœè§£å­˜åœ¨ï¼Œä¸€å®šèƒ½æ‰¾åˆ° çŠ¶æ€ç©ºé—´æœç´¢ æœ€ä¼˜æ€§ åœ¨æ— æƒå›¾ä¸­èƒ½æ‰¾åˆ°æœ€çŸ­è·¯å¾„ æœ€çŸ­è·¯å¾„ç®—æ³• BFSç®—æ³•å®ç° 1. åŸºç¡€BFSæ¨¡æ¿ from collections import deque def bfs_template(graph, start): """ BFSç®—æ³•é€šç”¨æ¨¡æ¿ Args: graph: å›¾çš„é‚»æ¥è¡¨è¡¨ç¤º {node: [neighbors]} start: èµ·å§‹èŠ‚ç‚¹ Returns: visited: è®¿é—®è¿‡çš„èŠ‚ç‚¹é›†åˆ """ visited = set() queue = deque([start]) visited.add(start) while queue: current = queue.popleft() print(f"è®¿é—®èŠ‚ç‚¹: {current}") # éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±… for neighbor in graph.get(current, []): if neighbor not in visited: visited.add(neighbor) queue.append(neighbor) return visited # ç¤ºä¾‹å›¾ graph = { 'A': ['B', 'C'], 'B': ['A', 'D', 'E'], 'C': ['A', 'F'], 'D': ['B'], 'E': ['B', 'F'], 'F': ['C', 'E'] } visited_nodes = bfs_template(graph, 'A') print("BFSè®¿é—®çš„èŠ‚ç‚¹:", visited_nodes) 2. BFSæ±‚æœ€çŸ­è·¯å¾„ def bfs_shortest_path(graph, start, target): """ ä½¿ç”¨BFSæ±‚æ— æƒå›¾ä¸­çš„æœ€çŸ­è·¯å¾„ Args: graph: å›¾çš„é‚»æ¥è¡¨ start: èµ·å§‹èŠ‚ç‚¹ target: ç›®æ ‡èŠ‚ç‚¹ Returns: (distance, path): æœ€çŸ­è·ç¦»å’Œè·¯å¾„ """ if start == target: return 0, [start] visited = set([start]) queue = deque([(start, 0, [start])]) # (èŠ‚ç‚¹, è·ç¦», è·¯å¾„) while queue: current, distance, path = queue.popleft() for neighbor in graph.get(current, []): if neighbor == target: return distance + 1, path + [neighbor] if neighbor not in visited: visited.add(neighbor) queue.append((neighbor, distance + 1, path + [neighbor])) return -1, [] # æ— æ³•åˆ°è¾¾ # ç¤ºä¾‹ä½¿ç”¨ distance, path = bfs_shortest_path(graph, 'A', 'F') print(f"ä»Aåˆ°Fçš„æœ€çŸ­è·ç¦»: {distance}") print(f"æœ€çŸ­è·¯å¾„: {' -> '.join(path)}") 3. BFSå±‚æ¬¡éå† def bfs_level_order(graph, start): """ BFSå±‚æ¬¡éå†ï¼Œè¿”å›æ¯ä¸€å±‚çš„èŠ‚ç‚¹ Args: graph: å›¾çš„é‚»æ¥è¡¨ start: èµ·å§‹èŠ‚ç‚¹ Returns: levels: æ¯ä¸€å±‚çš„èŠ‚ç‚¹åˆ—è¡¨ """ visited = set([start]) current_level = [start] levels = [] while current_level: levels.append(current_level[:]) # å¤åˆ¶å½“å‰å±‚ next_level = [] for node in current_level: for neighbor in graph.get(node, []): if neighbor not in visited: visited.add(neighbor) next_level.append(neighbor) current_level = next_level return levels # ç¤ºä¾‹ä½¿ç”¨ levels = bfs_level_order(graph, 'A') for i, level in enumerate(levels): print(f"ç¬¬{i}å±‚: {level}") BFSåœ¨äºŒå‰æ ‘ä¸­çš„åº”ç”¨ class TreeNode: def __init__(self, val=0, left=None, right=None): self.val = val self.left = left self.right = right def bfs_tree_traversal(root): """ äºŒå‰æ ‘çš„BFSéå†ï¼ˆå±‚åºéå†ï¼‰ Args: root: äºŒå‰æ ‘æ ¹èŠ‚ç‚¹ Returns: result: å±‚åºéå†ç»“æœ """ if not root: return [] result = [] queue = deque([root]) while queue: node = queue.popleft() result.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) return result def bfs_tree_level_order(root): """ äºŒå‰æ ‘çš„åˆ†å±‚éå† Args: root: äºŒå‰æ ‘æ ¹èŠ‚ç‚¹ Returns: levels: æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼åˆ—è¡¨ """ if not root: return [] levels = [] queue = deque([root]) while queue: level_size = len(queue) current_level = [] for _ in range(level_size): node = queue.popleft() current_level.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) levels.append(current_level) return levels # æ„å»ºç¤ºä¾‹äºŒå‰æ ‘ # 3 # / \ # 9 20 # / \ # 15 7 root = TreeNode(3) root.left = TreeNode(9) root.right = TreeNode(20) root.right.left = TreeNode(15) root.right.right = TreeNode(7) print("BFSéå†:", bfs_tree_traversal(root)) print("åˆ†å±‚éå†:", bfs_tree_level_order(root)) æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ DFSåŸºæœ¬åŸç† **æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDepth-First Searchï¼‰**æ˜¯ä¸€ç§å›¾éå†ç®—æ³•ï¼Œå®ƒä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹ï¼Œæ²¿ç€ä¸€æ¡è·¯å¾„å°½å¯èƒ½æ·±å…¥ï¼Œç›´åˆ°æ— æ³•ç»§ç»­ä¸ºæ­¢ï¼Œç„¶åå›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»§ç»­æ¢ç´¢å…¶ä»–è·¯å¾„ã€‚
...</p></div><footer class=entry-footer><span title='2024-02-27 22:05:13 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to æœç´¢ç®—æ³•è¯¦è§£ï¼šBFSä¸DFSçš„åŸç†å’Œåº”ç”¨" href=https://tyhzxh.github.io/posts/search-algorithms-guide/></a></article><article class=post-entry><header class=entry-header><h2>é€’å½’ä¸åˆ†æ²»ç®—æ³•è¯¦è§£</h2></header><div class=entry-meta><span title='2024-02-27 22:03:04 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>é€’å½’ç®—æ³•æ¦‚è¿° é€’å½’æ˜¯ä¸€ç§é‡è¦çš„ç®—æ³•è®¾è®¡æ€æƒ³ï¼Œå®ƒå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºè§„æ¨¡æ›´å°çš„åŒç±»å­é—®é¢˜æ¥è§£å†³ã€‚é€’å½’ç®—æ³•çš„æ ¸å¿ƒåœ¨äºæ‰¾åˆ°é—®é¢˜çš„é€’å½’å…³ç³»å’Œè¾¹ç•Œæ¡ä»¶ã€‚
ç»å…¸æ±‰è¯ºå¡”é—®é¢˜ æ±‰è¯ºå¡”æ˜¯å­¦ä¹ é€’å½’ç®—æ³•çš„ç»å…¸é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†è•´å«ç€æ·±åˆ»çš„é€’å½’æ€æƒ³ã€‚
é—®é¢˜æè¿° æœ‰ä¸‰æ ¹æŸ±å­Aã€Bã€Cï¼Œnä¸ªåœ†ç›˜ä»ä¸‹é¢å¼€å§‹æŒ‰å¤§å°é¡ºåºæ‘†æ”¾åœ¨AæŸ±å­ä¸Šã€‚è§„åˆ™å¦‚ä¸‹ï¼š
ä»»ä½•æ—¶å€™ï¼Œå°åœ†ç›˜ä¸Šéƒ½ä¸èƒ½æ”¾å¤§åœ†ç›˜ ä¸‰æ ¹æŸ±å­ä¹‹é—´ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜ æ±‚å°†æ‰€æœ‰åœ†ç›˜ä»AæŸ±ç§»åŠ¨åˆ°CæŸ±çš„æœ€å°‘ç§»åŠ¨æ­¥éª¤ é€’å½’è§£æ³• æ ¸å¿ƒæ€æƒ³ è¦å°†nä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°Cï¼Œå¯ä»¥åˆ†è§£ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š
å°†ä¸Šé¢çš„n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°Bï¼ˆä»¥Cä¸ºè¾…åŠ©ï¼‰ å°†æœ€å¤§çš„ç›˜å­ä»Aç§»åŠ¨åˆ°C å°†n-1ä¸ªç›˜å­ä»Bç§»åŠ¨åˆ°Cï¼ˆä»¥Aä¸ºè¾…åŠ©ï¼‰ é€’å½’å…¬å¼ Hanoi(A, C, B, n) = Hanoi(A, B, C, n-1) + move(A, C, n) + Hanoi(B, C, A, n-1) å…¶ä¸­ï¼š
Hanoi(A, C, B, n) è¡¨ç¤ºå°†nä¸ªç›˜å­ä»AæŸ±ç§»åŠ¨åˆ°CæŸ±ï¼ŒBæŸ±ä½œä¸ºè¾…åŠ© move(A, C, n) è¡¨ç¤ºå°†ç¼–å·ä¸ºnçš„ç›˜å­ä»Aç§»åŠ¨åˆ°C ä»£ç å®ç° #include &lt;iostream> using namespace std; void move(char from, char to, int disk) { cout &lt;&lt; "ç§»åŠ¨ç›˜å­ " &lt;&lt; disk &lt;&lt; ": " &lt;&lt; from &lt;&lt; " --> " &lt;&lt; to &lt;&lt; endl; } void hanoi(char from, char to, char aux, int n) { if (n == 1) { // è¾¹ç•Œæ¡ä»¶ï¼šåªæœ‰ä¸€ä¸ªç›˜å­æ—¶ï¼Œç›´æ¥ç§»åŠ¨ move(from, to, n); } else { // é€’å½’æ­¥éª¤1ï¼šå°†ä¸Šé¢n-1ä¸ªç›˜å­ç§»åŠ¨åˆ°è¾…åŠ©æŸ± hanoi(from, aux, to, n - 1); // é€’å½’æ­¥éª¤2ï¼šç§»åŠ¨æœ€å¤§çš„ç›˜å­ move(from, to, n); // é€’å½’æ­¥éª¤3ï¼šå°†n-1ä¸ªç›˜å­ä»è¾…åŠ©æŸ±ç§»åŠ¨åˆ°ç›®æ ‡æŸ± hanoi(aux, to, from, n - 1); } } int main() { int n; cout &lt;&lt; "è¯·è¾“å…¥ç›˜å­æ•°é‡: "; cin >> n; cout &lt;&lt; "æ±‰è¯ºå¡”ç§»åŠ¨æ­¥éª¤ï¼š" &lt;&lt; endl; hanoi('A', 'C', 'B', n); return 0; } Pythonç‰ˆæœ¬å®ç° def move(from_pole, to_pole, disk): """ç§»åŠ¨å•ä¸ªç›˜å­""" print(f"ç§»åŠ¨ç›˜å­ {disk}: {from_pole} --> {to_pole}") def hanoi(from_pole, to_pole, aux_pole, n): """ æ±‰è¯ºå¡”é€’å½’è§£æ³• from_pole: èµ·å§‹æŸ± to_pole: ç›®æ ‡æŸ± aux_pole: è¾…åŠ©æŸ± n: ç›˜å­æ•°é‡ """ if n == 1: # è¾¹ç•Œæ¡ä»¶ï¼šåªæœ‰ä¸€ä¸ªç›˜å­æ—¶ï¼Œç›´æ¥ç§»åŠ¨ move(from_pole, to_pole, n) else: # æ­¥éª¤1ï¼šå°†ä¸Šé¢n-1ä¸ªç›˜å­ç§»åŠ¨åˆ°è¾…åŠ©æŸ± hanoi(from_pole, aux_pole, to_pole, n - 1) # æ­¥éª¤2ï¼šç§»åŠ¨æœ€å¤§çš„ç›˜å­åˆ°ç›®æ ‡æŸ± move(from_pole, to_pole, n) # æ­¥éª¤3ï¼šå°†n-1ä¸ªç›˜å­ä»è¾…åŠ©æŸ±ç§»åŠ¨åˆ°ç›®æ ‡æŸ± hanoi(aux_pole, to_pole, from_pole, n - 1) def count_moves(n): """è®¡ç®—ç§»åŠ¨æ¬¡æ•°""" return 2**n - 1 # ç¤ºä¾‹ä½¿ç”¨ if __name__ == "__main__": n = int(input("è¯·è¾“å…¥ç›˜å­æ•°é‡: ")) print(f"\n{n}ä¸ªç›˜å­çš„æ±‰è¯ºå¡”ç§»åŠ¨æ­¥éª¤ï¼š") hanoi('A', 'C', 'B', n) print(f"\næ€»ç§»åŠ¨æ¬¡æ•°: {count_moves(n)}") é€’å½’çš„æœ¬è´¨ç†è§£ 1. é€’å½’æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ é€’å½’ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ï¼š
...</p></div><footer class=entry-footer><span title='2024-02-27 22:03:04 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to é€’å½’ä¸åˆ†æ²»ç®—æ³•è¯¦è§£" href=https://tyhzxh.github.io/posts/recursion-and-divide-conquer/></a></article><article class=post-entry><header class=entry-header><h2>è´ªå¿ƒç®—æ³•è¯¦è§£ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°ç»å…¸é—®é¢˜</h2></header><div class=entry-meta><span title='2024-02-27 22:02:23 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;8 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>è´ªå¿ƒç®—æ³•æ¦‚è¿° **è´ªå¿ƒç®—æ³•ï¼ˆGreedy Algorithmï¼‰**æ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯æœ€å¥½æˆ–æœ€ä¼˜çš„ç®—æ³•ã€‚è´ªå¿ƒç®—æ³•åœ¨ç®—æ³•ç«èµ›å’Œå®é™…å·¥ç¨‹ä¸­éƒ½æœ‰ç€é‡è¦çš„åœ°ä½ã€‚
è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ åŸºæœ¬åŸç† è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
å±€éƒ¨æœ€ä¼˜é€‰æ‹©ï¼šåœ¨æ¯ä¸€æ­¥éƒ½åšå‡ºå½“å‰çœ‹èµ·æ¥æœ€ä¼˜çš„é€‰æ‹© ä¸å›æº¯ï¼šä¸€æ—¦åšå‡ºé€‰æ‹©ï¼Œå°±ä¸å†æ”¹å˜ å¸Œæœ›å…¨å±€æœ€ä¼˜ï¼šé€šè¿‡å±€éƒ¨æœ€ä¼˜é€‰æ‹©è¾¾åˆ°å…¨å±€æœ€ä¼˜è§£ è´ªå¿ƒé€‰æ‹©æ€§è´¨ ä¸€ä¸ªé—®é¢˜èƒ½å¤Ÿç”¨è´ªå¿ƒç®—æ³•è§£å†³ï¼Œå¿…é¡»å…·å¤‡ä»¥ä¸‹æ€§è´¨ï¼š
æ€§è´¨ æè¿° é‡è¦æ€§ è´ªå¿ƒé€‰æ‹©æ€§è´¨ é€šè¿‡å±€éƒ¨æœ€ä¼˜é€‰æ‹©èƒ½è¾¾åˆ°å…¨å±€æœ€ä¼˜ æ ¸å¿ƒæ€§è´¨ æœ€ä¼˜å­ç»“æ„ é—®é¢˜çš„æœ€ä¼˜è§£åŒ…å«å­é—®é¢˜çš„æœ€ä¼˜è§£ å¿…è¦æ¡ä»¶ æ— åæ•ˆæ€§ å½“å‰é€‰æ‹©ä¸å½±å“ä¹‹å‰çš„é€‰æ‹© ä¿è¯æ­£ç¡®æ€§ è´ªå¿ƒç®—æ³•è®¾è®¡æ­¥éª¤ 1. é—®é¢˜åˆ†æ def greedy_algorithm_template(problem_input): """ è´ªå¿ƒç®—æ³•é€šç”¨æ¨¡æ¿ """ # æ­¥éª¤1ï¼šå°†é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ subproblems = decompose_problem(problem_input) # æ­¥éª¤2ï¼šç¡®å®šè´ªå¿ƒç­–ç•¥ strategy = define_greedy_strategy() # æ­¥éª¤3ï¼šæŒ‰è´ªå¿ƒç­–ç•¥æ’åº sorted_items = sort_by_strategy(subproblems, strategy) # æ­¥éª¤4ï¼šé€æ­¥æ„é€ è§£ solution = [] for item in sorted_items: if is_feasible(solution, item): solution.append(item) return solution 2. è´ªå¿ƒç­–ç•¥é€‰æ‹© å¸¸è§çš„è´ªå¿ƒç­–ç•¥åŒ…æ‹¬ï¼š
ç­–ç•¥ç±»å‹ æè¿° é€‚ç”¨åœºæ™¯ æœ€å¤§ä¼˜å…ˆ ä¼˜å…ˆé€‰æ‹©æœ€å¤§å€¼ æœ€å¤§æ”¶ç›Šé—®é¢˜ æœ€å°ä¼˜å…ˆ ä¼˜å…ˆé€‰æ‹©æœ€å°å€¼ æœ€å°æˆæœ¬é—®é¢˜ æ¯”å€¼ä¼˜å…ˆ æŒ‰æŸç§æ¯”å€¼æ’åº æ•ˆç‡ä¼˜åŒ–é—®é¢˜ æˆªæ­¢æ—¶é—´ä¼˜å…ˆ æŒ‰æ—¶é—´æ’åº è°ƒåº¦é—®é¢˜ ç»å…¸è´ªå¿ƒç®—æ³•é—®é¢˜ 1. æ´»åŠ¨é€‰æ‹©é—®é¢˜ é—®é¢˜æè¿° ç»™å®šnä¸ªæ´»åŠ¨ï¼Œæ¯ä¸ªæ´»åŠ¨éƒ½æœ‰å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œé€‰æ‹©æœ€å¤šçš„æ´»åŠ¨ä½¿å¾—å®ƒä»¬ä¸å†²çªã€‚
...</p></div><footer class=entry-footer><span title='2024-02-27 22:02:23 +0800 CST'>February 27, 2024</span>&nbsp;Â·&nbsp;8 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to è´ªå¿ƒç®—æ³•è¯¦è§£ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°ç»å…¸é—®é¢˜" href=https://tyhzxh.github.io/posts/greedy-algorithm-guide/></a></article><article class=post-entry><header class=entry-header><h2>å‰ç¼€å’Œç®—æ³•è¯¦è§£ä¸åº”ç”¨</h2></header><div class=entry-meta><span title='2024-02-23 13:34:50 +0800 CST'>February 23, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>å‰ç¼€å’Œç®—æ³•æ¦‚è¿° å‰ç¼€å’Œæ˜¯ä¸€ç§é‡è¦çš„ç®—æ³•æŠ€å·§ï¼Œä¸»è¦ç”¨äºå¿«é€Ÿè®¡ç®—æ•°ç»„åŒºé—´å†…çš„å„ç§ç»Ÿè®¡ä¿¡æ¯ã€‚é€šè¿‡é¢„å¤„ç†æ„å»ºå‰ç¼€æ•°ç»„ï¼Œå¯ä»¥å°†åŸæœ¬éœ€è¦O(n)æ—¶é—´å¤æ‚åº¦çš„åŒºé—´æŸ¥è¯¢ä¼˜åŒ–åˆ°O(1)ã€‚
å‰ç¼€å’Œç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåˆ©ç”¨å‰é¢å·²ç»è®¡ç®—è¿‡çš„ç»“æœæ¥å¿«é€Ÿå¾—å‡ºå½“å‰çš„ç»“æœã€‚
å‰ç¼€å’Œçš„åŸºæœ¬ç±»å‹ 1. ç´¯è®¡å€¼å‰ç¼€æ•°ç»„ï¼ˆç”¨äºåŒºé—´æ±‚å’Œï¼‰ è¿™æ˜¯æœ€å¸¸è§çš„å‰ç¼€å’Œåº”ç”¨ï¼Œç”¨äºå¿«é€Ÿè®¡ç®—æ•°ç»„ä¸­ä»»æ„åŒºé—´çš„å…ƒç´ å’Œã€‚
def build_prefix_sum(arr): """æ„å»ºå‰ç¼€å’Œæ•°ç»„""" prefix_sum = [0] # åˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸º0 for num in arr: prefix_sum.append(prefix_sum[-1] + num) # å°†å½“å‰å…ƒç´ åŠ åˆ°å‰ä¸€ä¸ªå‰ç¼€å’Œä¸Š return prefix_sum def range_sum(prefix_sum, start, end): """è®¡ç®—åŒºé—´å’Œ""" return prefix_sum[end + 1] - prefix_sum[start] # ç¤ºä¾‹ä½¿ç”¨ arr = [1, 2, 3, 4, 5] prefix_sum = build_prefix_sum(arr) print(f"åŸæ•°ç»„: {arr}") print(f"å‰ç¼€å’Œæ•°ç»„: {prefix_sum}") # æŸ¥è¯¢åŒºé—´ [1, 3] çš„å’Œ (ç´¢å¼•1åˆ°3ï¼Œå³å…ƒç´ 2, 3, 4) result = range_sum(prefix_sum, 1, 3) print(f"åŒºé—´ [1, 3] çš„å’Œ: {result}") # è¾“å‡º 9 (2 + 3 + 4) ç®—æ³•è§£é‡Šï¼š
build_prefix_sum å‡½æ•°é€šè¿‡éå†è¾“å…¥æ•°ç»„å¹¶ç´¯åŠ æ¯ä¸ªå…ƒç´ æ¥æ„å»ºå‰ç¼€å’Œæ•°ç»„ å‰ç¼€å’Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºç©ºåŒºé—´çš„å’Œ range_sum å‡½æ•°åˆ©ç”¨å‰ç¼€å’Œçš„æ€§è´¨ï¼šåŒºé—´[start, end]çš„å’Œ = prefix_sum[end+1] - prefix_sum[start] 2. ç´¯è®¡å‡ºç°æ¬¡æ•°å‰ç¼€æ•°ç»„ ç”¨äºå¿«é€ŸæŸ¥è¯¢æŸä¸ªç‰¹å®šå€¼åœ¨æŒ‡å®šåŒºé—´å†…çš„å‡ºç°æ¬¡æ•°ã€‚
def build_prefix_count(arr, target): """æ„å»ºç›®æ ‡å€¼çš„å‰ç¼€è®¡æ•°æ•°ç»„""" prefix_count = [0] # åˆå§‹åŒ–å‰ç¼€è®¡æ•°æ•°ç»„ for num in arr: if num == target: prefix_count.append(prefix_count[-1] + 1) # å¦‚æœæ˜¯ç›®æ ‡å€¼ï¼Œè®¡æ•°åŠ 1 else: prefix_count.append(prefix_count[-1]) # å¦åˆ™ï¼Œè®¡æ•°ä¸å˜ return prefix_count def count_range_occurrences(prefix_count, start, end): """è®¡ç®—åŒºé—´å†…ç›®æ ‡å€¼çš„å‡ºç°æ¬¡æ•°""" return prefix_count[end + 1] - prefix_count[start] # ç¤ºä¾‹ä½¿ç”¨ arr = [1, 3, 2, 3, 3, 4] target = 3 prefix_count = build_prefix_count(arr, target) print(f"åŸæ•°ç»„: {arr}") print(f"ç›®æ ‡å€¼ {target} çš„å‰ç¼€è®¡æ•°æ•°ç»„: {prefix_count}") # æŸ¥è¯¢åŒºé—´ [1, 4] ä¸­ç›®æ ‡å€¼çš„å‡ºç°æ¬¡æ•° result = count_range_occurrences(prefix_count, 1, 4) print(f"åŒºé—´ [1, 4] ä¸­å€¼ {target} çš„å‡ºç°æ¬¡æ•°: {result}") # è¾“å‡º 3 ç®—æ³•è§£é‡Šï¼š
...</p></div><footer class=entry-footer><span title='2024-02-23 13:34:50 +0800 CST'>February 23, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to å‰ç¼€å’Œç®—æ³•è¯¦è§£ä¸åº”ç”¨" href=https://tyhzxh.github.io/posts/prefix-sum-algorithm/></a></article><article class=post-entry><header class=entry-header><h2>SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h2></header><div class=entry-meta><span title='2024-02-23 02:36:48 +0800 CST'>February 23, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>SpringBootæ˜¯Javaæœ€æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œå®ƒé€šè¿‡è§£è€¦ä»£ç æ¥æå‡å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSpringBootçš„æ ¸å¿ƒæ¦‚å¿µã€‚
æ¡†æ¶æ¦‚è¿° SpringBoot æ˜¯åŸºäºSpringæ¡†æ¶çš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶ï¼Œå®ƒç®€åŒ–äº†Springåº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºç”Ÿäº§çº§åˆ«çš„åº”ç”¨ç¨‹åºã€‚
ä¸»è¦ä¼˜åŠ¿ ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼šæä¾›å¼€ç®±å³ç”¨çš„é…ç½® ğŸ”§ è‡ªåŠ¨é…ç½®ï¼šæ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨ ğŸ“¦ å†…åµŒæœåŠ¡å™¨ï¼šæ— éœ€å¤–éƒ¨å®¹å™¨å³å¯è¿è¡Œ ğŸ¯ ç®€åŒ–é…ç½®ï¼šçº¦å®šä¼˜äºé…ç½®çš„ç†å¿µ Spring æ ¸å¿ƒæ¦‚å¿µ Springæ¡†æ¶æœ‰ä¸‰ä¸ªæœ€å…³é”®çš„æ ¸å¿ƒæ¦‚å¿µï¼šIoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥(DI)ã€é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ã€‚
ä¸€ã€IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰ ä»€ä¹ˆæ˜¯IoCï¼Ÿ IoC (Inversion of Control) æ§åˆ¶åè½¬ï¼Œæ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ã€‚ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ç”±ç¨‹åºä»£ç ç›´æ¥æ§åˆ¶ï¼Œè€ŒIoCå°†è¿™ç§æ§åˆ¶æƒäº¤ç»™äº†æ¡†æ¶ã€‚
ä¼ ç»Ÿæ–¹å¼ vs IoCæ–¹å¼ ä¼ ç»Ÿæ–¹å¼ï¼š
public class UserService { private UserDao userDao = new UserDao(); // æ‰‹åŠ¨åˆ›å»ºä¾èµ– public void saveUser(User user) { userDao.save(user); } } IoCæ–¹å¼ï¼š
@Service public class UserService { @Autowired private UserDao userDao; // æ¡†æ¶è‡ªåŠ¨æ³¨å…¥ public void saveUser(User user) { userDao.save(user); } } IoCçš„ä¼˜åŠ¿ é™ä½è€¦åˆåº¦ï¼šå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±æ¡†æ¶ç®¡ç† æé«˜å¯æµ‹è¯•æ€§ï¼šä¾¿äºè¿›è¡Œå•å…ƒæµ‹è¯•å’ŒMock å¢å¼ºå¯ç»´æŠ¤æ€§ï¼šä¿®æ”¹ä¾èµ–å…³ç³»æ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç  æ”¯æŒé…ç½®åŒ–ï¼šå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†å¯¹è±¡å…³ç³» äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ DI (Dependency Injection) ä¾èµ–æ³¨å…¥ï¼Œæ˜¯IoCå®¹å™¨çš„å…·ä½“å®ç°æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆã€‚
...</p></div><footer class=entry-footer><span title='2024-02-23 02:36:48 +0800 CST'>February 23, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£" href=https://tyhzxh.github.io/posts/springboot-fundamentals/></a></article><article class=post-entry><header class=entry-header><h2>Git ç‰ˆæœ¬æ§åˆ¶å­¦ä¹ ç¬”è®°</h2></header><div class=entry-meta><span title='2024-02-09 17:44:43 +0800 CST'>February 9, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>æœ¬æ–‡æ˜¯å­¦ä¹ å»–é›ªå³°Gitæ•™ç¨‹çš„å­¦ä¹ ç¬”è®°ï¼Œæ•´ç†äº†Gitçš„åŸºç¡€æ¦‚å¿µå’Œå¸¸ç”¨æ“ä½œã€‚
åŸºç¡€æ¦‚å¿µ åœ¨.gitæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹è¿›è¡Œæ“ä½œ
Gitæœ‰ä¸‰ä¸ªé‡è¦çš„åŒºåŸŸï¼š
å·¥ä½œåŒº(Working Directory) - æ‰€å¤„çš„æ–‡ä»¶ç›®å½• æš‚å­˜åŒº(Stage) - é‡ç‚¹æ¦‚å¿µï¼Œä¸´æ—¶å­˜å‚¨ä¿®æ”¹çš„åœ°æ–¹ ç‰ˆæœ¬åº“(Repository) - å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½• .gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ é‡è¦æç¤ºï¼šåˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ªmaster(main)åˆ†æ”¯ï¼Œæ‰€ä»¥git commitå°±æ˜¯å¾€master(main)åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚
åŸºç¡€æ“ä½œ(Windowsä¸‹) æ ¸å¿ƒç†å¿µï¼šgit addå‘½ä»¤å®é™…ä¸Šå°±æ˜¯æŠŠè¦æäº¤çš„æ‰€æœ‰ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒºï¼ˆStageï¼‰ï¼Œç„¶åï¼Œæ‰§è¡Œgit commitå°±å¯ä»¥ä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ã€‚
æ¨èç¯å¢ƒï¼šåœ¨PowerShellæˆ–Git Bashä¸‹è¾“å…¥å‘½ä»¤ å»ºè®®ä½¿ç”¨Git Bash - æ”¯æŒå¾ˆå¤šLinuxä¸‹çš„å‘½ä»¤
åˆå§‹åŒ–å’Œæ·»åŠ æ–‡ä»¶ åˆå§‹åŒ–Gitä»“åº“ï¼šä½¿ç”¨git initå‘½ä»¤ æ·»åŠ æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œåˆ†ä¸¤æ­¥ï¼š ä½¿ç”¨å‘½ä»¤git add &lt;file>ï¼Œæ³¨æ„ï¼Œå¯åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œæ·»åŠ å¤šä¸ªå·¥ä½œåŒºæ–‡ä»¶åˆ°æš‚å­˜åŒº ä½¿ç”¨å‘½ä»¤git commit -m &lt;message>æ·»åŠ æš‚å­˜åŒºæ‰€æœ‰æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œå®Œæˆ ğŸ’¡ å®ç”¨æŠ€å·§ # ä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰æ”¹åŠ¨ git add . æ£€æŸ¥æ“ä½œ æŸ¥çœ‹çŠ¶æ€ æ£€æŸ¥ å·¥ä½œåŒº+æš‚å­˜åŒº çš„çŠ¶æ€ï¼Œä½¿ç”¨git statuså‘½ä»¤ï¼š
Changes to be committed: (use "git restore --staged &lt;file>..." to unstage) modified: 1.md Changes not staged for commit: (use "git add &lt;file>..." to update what will be committed) (use "git restore &lt;file>..." to discard changes in working directory) modified: 1.md æŸ¥çœ‹ä¿®æ”¹å†…å®¹ å¦‚æœgit statuså‘Šè¯‰ä½ æœ‰æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œç”¨git diffå¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ï¼š
...</p></div><footer class=entry-footer><span title='2024-02-09 17:44:43 +0800 CST'>February 9, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Git ç‰ˆæœ¬æ§åˆ¶å­¦ä¹ ç¬”è®°" href=https://tyhzxh.github.io/posts/git-notes/></a></article><article class=post-entry><header class=entry-header><h2>Gitç‰ˆæœ¬æ§åˆ¶åŸºç¡€æŒ‡å—</h2></header><div class=entry-meta><span title='2024-02-09 17:44:43 +0800 CST'>February 9, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>å‰è¨€ æœ¬æ–‡æ˜¯å­¦ä¹ å»–é›ªå³°Gitæ•™ç¨‹çš„å­¦ä¹ ç¬”è®°ï¼Œæ¶µç›–äº†Gitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„åŸºç¡€æ¦‚å¿µå’Œå¸¸ç”¨æ“ä½œã€‚Gitæ˜¯ç›®å‰æœ€æµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ŒæŒæ¡Gitå¯¹äºè½¯ä»¶å¼€å‘è‡³å…³é‡è¦ã€‚
æ³¨æ„ï¼šæ‰€æœ‰Gitæ“ä½œéƒ½éœ€è¦åœ¨.gitæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹è¿›è¡Œ
åŸºç¡€æ¦‚å¿µ Gitçš„ä¸‰ä¸ªåŒºåŸŸ Gitå°†æ–‡ä»¶ç®¡ç†åˆ†ä¸ºä¸‰ä¸ªä¸»è¦åŒºåŸŸï¼š
å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰
å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½• å­˜æ”¾é¡¹ç›®æ–‡ä»¶çš„åœ°æ–¹ æš‚å­˜åŒºï¼ˆStage/Indexï¼‰ â­ é‡ç‚¹
ä¸´æ—¶å­˜æ”¾æ–‡ä»¶ä¿®æ”¹çš„åœ°æ–¹ ä½äº.gitç›®å½•ä¸­çš„indexæ–‡ä»¶ ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰
å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™å°±æ˜¯Gitçš„ç‰ˆæœ¬åº“ åŒ…å«æš‚å­˜åŒºå’Œåˆ†æ”¯ä¿¡æ¯ Gitè‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯æ˜¯masterï¼ˆæˆ–mainï¼‰ å·¥ä½œæµç¨‹ graph LR A[å·¥ä½œåŒº] -->|git add| B[æš‚å­˜åŒº] B -->|git commit| C[ç‰ˆæœ¬åº“] C -->|git checkout| A æ ¸å¿ƒç†å¿µï¼š
git addå‘½ä»¤æŠŠè¦æäº¤çš„æ‰€æœ‰ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒº git commitä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ åŸºç¡€æ“ä½œ ç¯å¢ƒå‡†å¤‡ æ¨èä½¿ç”¨Git Bashï¼Œå› ä¸ºå®ƒæ”¯æŒå¾ˆå¤šLinuxå‘½ä»¤ï¼Œåœ¨Windowsä¸‹æä¾›æ›´å¥½çš„ä½“éªŒã€‚
ä»“åº“åˆå§‹åŒ– # åˆå§‹åŒ–Gitä»“åº“ git init æ–‡ä»¶æ·»åŠ å’Œæäº¤ # æ·»åŠ å•ä¸ªæ–‡ä»¶åˆ°æš‚å­˜åŒº git add &lt;file> # æ·»åŠ æ‰€æœ‰ä¿®æ”¹åˆ°æš‚å­˜åŒº â­ å¸¸ç”¨ git add . # æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“ git commit -m "æäº¤è¯´æ˜" å®Œæ•´æµç¨‹ç¤ºä¾‹ï¼š
...</p></div><footer class=entry-footer><span title='2024-02-09 17:44:43 +0800 CST'>February 9, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to Gitç‰ˆæœ¬æ§åˆ¶åŸºç¡€æŒ‡å—" href=https://tyhzxh.github.io/posts/git-fundamentals-guide/></a></article><article class=post-entry><header class=entry-header><h2>ä½¿ç”¨Hugoå’ŒPaperModä¸»é¢˜æ­å»ºä¸ªäººåšå®¢</h2></header><div class=entry-meta><span title='2024-01-02 14:30:00 +0800 CST'>January 2, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>ä½¿ç”¨Hugoå’ŒPaperModä¸»é¢˜æ­å»ºä¸ªäººåšå®¢ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Hugoé™æ€ç«™ç‚¹ç”Ÿæˆå™¨å’ŒPaperModä¸»é¢˜æ¥æ­å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€è®¾è®¡ç¾è§‚çš„ä¸ªäººåšå®¢ã€‚
ä¸ºä»€ä¹ˆé€‰æ‹©Hugoï¼Ÿ Hugoæ˜¯ä¸€ä¸ªç”¨Goè¯­è¨€ç¼–å†™çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
âš¡ æ„å»ºé€Ÿåº¦æå¿« - å‡ ç§’é’Ÿå°±èƒ½ç”Ÿæˆæ•´ä¸ªç½‘ç«™ ğŸ¨ ä¸»é¢˜ä¸°å¯Œ - æœ‰å¤§é‡ç²¾ç¾çš„ä¸»é¢˜å¯ä¾›é€‰æ‹© ğŸ“ Markdownæ”¯æŒ - ä½¿ç”¨Markdownç¼–å†™å†…å®¹ ğŸ”§ é…ç½®ç®€å• - é…ç½®æ–‡ä»¶ç®€æ´æ˜äº† ğŸš€ éƒ¨ç½²æ–¹ä¾¿ - å¯ä»¥è½»æ¾éƒ¨ç½²åˆ°å„ç§å¹³å° ç¯å¢ƒå‡†å¤‡ 1. å®‰è£…Hugo Windowsç”¨æˆ·ï¼š
# ä½¿ç”¨Chocolateyå®‰è£… choco install hugo-extended # æˆ–è€…ä½¿ç”¨Scoopå®‰è£… scoop install hugo-extended macOSç”¨æˆ·ï¼š
# ä½¿ç”¨Homebrewå®‰è£… brew install hugo Linuxç”¨æˆ·ï¼š
# Ubuntu/Debian sudo apt install hugo # æˆ–è€…ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ wget https://github.com/gohugoio/hugo/releases/download/v0.xxx.x/hugo_extended_0.xxx.x_Linux-64bit.tar.gz 2. éªŒè¯å®‰è£… hugo version åˆ›å»ºHugoç«™ç‚¹ 1. åˆ›å»ºæ–°ç«™ç‚¹ hugo new site my-blog cd my-blog 2. åˆå§‹åŒ–Gitä»“åº“ git init å®‰è£…PaperModä¸»é¢˜ PaperModæ˜¯ä¸€ä¸ªç®€æ´ã€åŠŸèƒ½ä¸°å¯Œçš„Hugoä¸»é¢˜ï¼Œç‰¹åˆ«é€‚åˆæŠ€æœ¯åšå®¢ã€‚
...</p></div><footer class=entry-footer><span title='2024-01-02 14:30:00 +0800 CST'>January 2, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to ä½¿ç”¨Hugoå’ŒPaperModä¸»é¢˜æ­å»ºä¸ªäººåšå®¢" href=https://tyhzxh.github.io/posts/hugo-blog-setup/></a></article><article class=post-entry><header class=entry-header><h2>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼</h2></header><div class=entry-meta><span title='2024-01-01 10:00:00 +0800 CST'>January 1, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;tyhzxh</div><div class=entry-content><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼ğŸ‰ å¤§å®¶å¥½ï¼æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢ã€‚è¿™æ˜¯æˆ‘åœ¨è¿™é‡Œå‘å¸ƒçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³å€Ÿæ­¤æœºä¼šå‘å¤§å®¶ä»‹ç»ä¸€ä¸‹è¿™ä¸ªåšå®¢çš„ç›®çš„å’Œå†…å®¹ã€‚
ä¸ºä»€ä¹ˆè¦å†™åšå®¢ï¼Ÿ å†™åšå®¢å¯¹æˆ‘æ¥è¯´æœ‰å‡ ä¸ªé‡è¦çš„æ„ä¹‰ï¼š
çŸ¥è¯†åˆ†äº« ğŸ“š
å°†æˆ‘åœ¨å­¦ä¹ å’Œå·¥ä½œä¸­ç§¯ç´¯çš„ç»éªŒåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°æœ‰éœ€è¦çš„äººã€‚
å­¦ä¹ è®°å½• âœï¸
é€šè¿‡å†™ä½œæ¥æ•´ç†å’Œå·©å›ºè‡ªå·±çš„çŸ¥è¯†ï¼Œâ€œæ•™å­¦ç›¸é•¿"æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ä¹‹ä¸€ã€‚
æ€è€ƒæ²‰æ·€ ğŸ¤”
è®°å½•è‡ªå·±çš„æ€è€ƒè¿‡ç¨‹å’Œæ„Ÿæ‚Ÿï¼Œå½¢æˆè‡ªå·±çš„çŸ¥è¯†ä½“ç³»ã€‚
æŠ€æœ¯äº¤æµ ğŸ’¬
ä¸åŒè¡Œä»¬äº¤æµæŠ€æœ¯å¿ƒå¾—ï¼Œå…±åŒè¿›æ­¥ã€‚
åšå®¢å†…å®¹è§„åˆ’ è¿™ä¸ªåšå®¢ä¸»è¦ä¼šåŒ…å«ä»¥ä¸‹å‡ ç±»å†…å®¹ï¼š
æŠ€æœ¯æ–‡ç«  ğŸ’» ç¼–ç¨‹è¯­è¨€å­¦ä¹ å¿ƒå¾— æ¡†æ¶å’Œå·¥å…·ä½¿ç”¨ç»éªŒ é¡¹ç›®å¼€å‘æ€»ç»“ é—®é¢˜è§£å†³æ–¹æ¡ˆ å­¦ä¹ ç¬”è®° ğŸ“– è¯»ä¹¦ç¬”è®°å’Œå¿ƒå¾— åœ¨çº¿è¯¾ç¨‹å­¦ä¹ æ€»ç»“ æŠ€æœ¯æ–‡æ¡£ç¿»è¯‘å’Œè§£è¯» ç”Ÿæ´»æ„Ÿæ‚Ÿ ğŸŒŸ å·¥ä½œå’Œå­¦ä¹ çš„æ€è€ƒ ä¸ªäººæˆé•¿ç»å† ç”Ÿæ´»ä¸­çš„æœ‰è¶£å‘ç° æŠ€æœ¯æ ˆä»‹ç» è¿™ä¸ªåšå®¢ä½¿ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ï¼š
é™æ€ç«™ç‚¹ç”Ÿæˆå™¨: Hugo ä¸»é¢˜: PaperMod æ‰˜ç®¡å¹³å°: GitHub Pages åŸŸå: GitHubæä¾›çš„å…è´¹åŸŸå é€‰æ‹©Hugoæ˜¯å› ä¸ºå®ƒæ„å»ºé€Ÿåº¦å¿«ï¼Œé…ç½®ç®€å•ï¼Œè€ŒPaperModä¸»é¢˜ç®€æ´ç¾è§‚ï¼ŒåŠŸèƒ½é½å…¨ã€‚
æœªæ¥è®¡åˆ’ æ¥ä¸‹æ¥æˆ‘è®¡åˆ’ï¼š
å®šæœŸæ›´æ–°æŠ€æœ¯æ–‡ç«  åˆ†äº«é¡¹ç›®å¼€å‘ç»éªŒ è®°å½•å­¦ä¹ æ–°æŠ€æœ¯çš„è¿‡ç¨‹ ä¸è¯»è€…äº’åŠ¨äº¤æµ ç»“è¯­ æ„Ÿè°¢ä½ èŠ±æ—¶é—´é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼å¦‚æœä½ å¯¹æŸä¸ªè¯é¢˜ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ–è€…æœ‰ä»»ä½•å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ï¼š
GitHub: https://github.com/tyhzxh Email: your-email@example.com è®©æˆ‘ä»¬ä¸€èµ·åœ¨æŠ€æœ¯çš„é“è·¯ä¸Šä¸æ–­å‰è¿›ï¼ğŸš€
è¿™ç¯‡æ–‡ç« æ ‡å¿—ç€æˆ‘åšå®¢ä¹‹æ—…çš„å¼€å§‹ï¼ŒæœŸå¾…ä¸å¤§å®¶åˆ†äº«æ›´å¤šæœ‰ä»·å€¼çš„å†…å®¹ï¼</p></div><footer class=entry-footer><span title='2024-01-01 10:00:00 +0800 CST'>January 1, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;tyhzxh</footer><a class=entry-link aria-label="post link to æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼" href=https://tyhzxh.github.io/posts/welcome/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://tyhzxh.github.io/>tyhzxhçš„ä¸ªäººåšå®¢</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>