<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ | tyhzxhçš„ä¸ªäººåšå®¢</title><meta name=keywords content="SpringBoot,Java,æ¡†æ¶,IoC,AOP,ä¾èµ–æ³¨å…¥"><meta name=description content="SpringBootæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µçš„æ·±å…¥è§£æ"><meta name=author content="tyhzxh"><link rel=canonical href=https://tyhzxh.github.io/posts/springboot-fundamentals/><link crossorigin=anonymous href=/assets/css/stylesheet.8ee78296343cf29844826f6d943ca1b6638fc5059dcdf673ace996a7617f1b69.css integrity="sha256-jueCljQ88phEgm9tlDyhtmOPxQWdzfZzrOmWp2F/G2k=" rel="preload stylesheet" as=style><link rel=icon href=https://tyhzxh.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tyhzxh.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tyhzxh.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tyhzxh.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tyhzxh.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://tyhzxh.github.io/posts/springboot-fundamentals/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>.archive-summary{margin-bottom:2rem;padding:1rem;background:var(--theme);border-radius:8px;border:1px solid var(--border);text-align:center;color:var(--secondary);font-size:.9rem}.pagination{display:flex !important;justify-content:center;align-items:center;gap:1rem;margin:3rem 0;padding:2rem 0;border-top:1px solid var(--border)}.pagination a.pagination-prev,.pagination a.pagination-next{padding:.75rem 1.5rem !important;background:var(--entry) !important;border:1px solid var(--border) !important;border-radius:6px !important;text-decoration:none !important;color:var(--primary) !important;font-weight:500 !important;transition:all .3s ease !important;box-shadow:0 2px 4px rgba(0,0,0,5%) !important;font-size:14px !important;line-height:normal !important}.pagination a.pagination-prev:hover,.pagination a.pagination-next:hover{background:var(--hljs-bg) !important;color:var(--primary) !important;transform:translateY(-2px) !important;box-shadow:0 4px 12px rgba(0,0,0,.1) !important;border-color:var(--tertiary) !important}.pagination-numbers{display:flex;gap:.5rem;align-items:center}.pagination a.pagination-number,.pagination-current{display:inline-flex !important;align-items:center !important;justify-content:center !important;width:2.5rem !important;height:2.5rem !important;border-radius:50% !important;text-decoration:none !important;font-weight:500 !important;transition:all .3s ease !important;font-size:14px !important;line-height:normal !important;padding:0 !important}.pagination a.pagination-number{background:var(--entry) !important;border:1px solid var(--border) !important;color:var(--primary) !important;box-shadow:0 2px 4px rgba(0,0,0,5%) !important}.pagination a.pagination-number:hover{background:var(--hljs-bg) !important;color:var(--primary) !important;transform:scale(1.1) !important;border-color:var(--tertiary) !important}.pagination-current{background:var(--tertiary) !important;color:var(--primary) !important;border:1px solid var(--tertiary) !important;font-weight:600 !important;box-shadow:0 2px 4px rgba(0,0,0,.1) !important}@media(max-width:768px){.pagination{flex-direction:column;gap:1rem}.pagination-prev,.pagination-next{width:100%;text-align:center}.pagination-numbers{order:-1}.archive-summary{font-size:.8rem;padding:.75rem}}[data-theme=dark] .archive-summary{background:var(--entry)}[data-theme=dark] .pagination-prev,[data-theme=dark] .pagination-next,[data-theme=dark] .pagination-number{background:var(--entry);border-color:var(--border);box-shadow:0 2px 4px rgba(0,0,0,.2)}[data-theme=dark] .pagination-prev:hover,[data-theme=dark] .pagination-next:hover,[data-theme=dark] .pagination-number:hover{background:var(--hljs-bg);border-color:var(--tertiary)}[data-theme=dark] .pagination-current{background:var(--tertiary);border-color:var(--tertiary);box-shadow:0 2px 4px rgba(0,0,0,.3)}</style><meta property="og:url" content="https://tyhzxh.github.io/posts/springboot-fundamentals/"><meta property="og:site_name" content="tyhzxhçš„ä¸ªäººåšå®¢"><meta property="og:title" content="SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"><meta property="og:description" content="SpringBootæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µçš„æ·±å…¥è§£æ"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-23T02:36:48+08:00"><meta property="article:modified_time" content="2025-08-06T08:51:21+08:00"><meta property="article:tag" content="SpringBoot"><meta property="article:tag" content="Java"><meta property="article:tag" content="æ¡†æ¶"><meta property="article:tag" content="IoC"><meta property="article:tag" content="AOP"><meta property="article:tag" content="ä¾èµ–æ³¨å…¥"><meta name=twitter:card content="summary"><meta name=twitter:title content="SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"><meta name=twitter:description content="SpringBootæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µçš„æ·±å…¥è§£æ"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tyhzxh.github.io/posts/"},{"@type":"ListItem","position":2,"name":"SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£","item":"https://tyhzxh.github.io/posts/springboot-fundamentals/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£","name":"SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£","description":"SpringBootæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µçš„æ·±å…¥è§£æ","keywords":["SpringBoot","Java","æ¡†æ¶","IoC","AOP","ä¾èµ–æ³¨å…¥"],"articleBody":" SpringBootæ˜¯Javaæœ€æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œå®ƒé€šè¿‡è§£è€¦ä»£ç æ¥æå‡å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSpringBootçš„æ ¸å¿ƒæ¦‚å¿µã€‚\næ¡†æ¶æ¦‚è¿° SpringBoot æ˜¯åŸºäºSpringæ¡†æ¶çš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶ï¼Œå®ƒç®€åŒ–äº†Springåº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºç”Ÿäº§çº§åˆ«çš„åº”ç”¨ç¨‹åºã€‚\nä¸»è¦ä¼˜åŠ¿ ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼šæä¾›å¼€ç®±å³ç”¨çš„é…ç½® ğŸ”§ è‡ªåŠ¨é…ç½®ï¼šæ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨ ğŸ“¦ å†…åµŒæœåŠ¡å™¨ï¼šæ— éœ€å¤–éƒ¨å®¹å™¨å³å¯è¿è¡Œ ğŸ¯ ç®€åŒ–é…ç½®ï¼šçº¦å®šä¼˜äºé…ç½®çš„ç†å¿µ Spring æ ¸å¿ƒæ¦‚å¿µ Springæ¡†æ¶æœ‰ä¸‰ä¸ªæœ€å…³é”®çš„æ ¸å¿ƒæ¦‚å¿µï¼šIoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥(DI)ã€é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ã€‚\nä¸€ã€IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰ ä»€ä¹ˆæ˜¯IoCï¼Ÿ IoC (Inversion of Control) æ§åˆ¶åè½¬ï¼Œæ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ã€‚ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ç”±ç¨‹åºä»£ç ç›´æ¥æ§åˆ¶ï¼Œè€ŒIoCå°†è¿™ç§æ§åˆ¶æƒäº¤ç»™äº†æ¡†æ¶ã€‚\nä¼ ç»Ÿæ–¹å¼ vs IoCæ–¹å¼ ä¼ ç»Ÿæ–¹å¼ï¼š\npublic class UserService { private UserDao userDao = new UserDao(); // æ‰‹åŠ¨åˆ›å»ºä¾èµ– public void saveUser(User user) { userDao.save(user); } } IoCæ–¹å¼ï¼š\n@Service public class UserService { @Autowired private UserDao userDao; // æ¡†æ¶è‡ªåŠ¨æ³¨å…¥ public void saveUser(User user) { userDao.save(user); } } IoCçš„ä¼˜åŠ¿ é™ä½è€¦åˆåº¦ï¼šå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±æ¡†æ¶ç®¡ç† æé«˜å¯æµ‹è¯•æ€§ï¼šä¾¿äºè¿›è¡Œå•å…ƒæµ‹è¯•å’ŒMock å¢å¼ºå¯ç»´æŠ¤æ€§ï¼šä¿®æ”¹ä¾èµ–å…³ç³»æ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç  æ”¯æŒé…ç½®åŒ–ï¼šå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†å¯¹è±¡å…³ç³» äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ DI (Dependency Injection) ä¾èµ–æ³¨å…¥ï¼Œæ˜¯IoCå®¹å™¨çš„å…·ä½“å®ç°æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆã€‚\nä¸‰ç§æ³¨å…¥æ–¹å¼ 1. å­—æ®µæ³¨å…¥ï¼ˆField Injectionï¼‰ @Service public class UserService { @Autowired private UserDao userDao; @Autowired private EmailService emailService; } ç‰¹ç‚¹ï¼š\nâœ… ä»£ç ç®€æ´ âŒ éš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯• âŒ è¿åäº†å°è£…åŸåˆ™ 2. æ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰â­ æ¨è @Service public class UserService { private final UserDao userDao; private final EmailService emailService; @Autowired public UserService(UserDao userDao, EmailService emailService) { this.userDao = userDao; this.emailService = emailService; } } ç‰¹ç‚¹ï¼š\nâœ… ä¿è¯ä¾èµ–ä¸å¯å˜ï¼ˆfinalï¼‰ âœ… ä¾¿äºå•å…ƒæµ‹è¯• âœ… åœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±ç¡®ä¿ä¾èµ–å®Œæ•´ âœ… ç¬¦åˆé¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ 3. Setteræ³¨å…¥ï¼ˆSetter Injectionï¼‰ @Service public class UserService { private UserDao userDao; private EmailService emailService; @Autowired public void setUserDao(UserDao userDao) { this.userDao = userDao; } @Autowired public void setEmailService(EmailService emailService) { this.emailService = emailService; } } ç‰¹ç‚¹ï¼š\nâœ… æ”¯æŒå¯é€‰ä¾èµ– âœ… æ”¯æŒé‡æ–°é…ç½® âŒ ä¾èµ–å¯èƒ½ä¸ºnull Beançš„ç”Ÿå‘½å‘¨æœŸ Springå®¹å™¨ä¸­Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š\n@Component public class MyBean implements InitializingBean, DisposableBean { @PostConstruct public void init() { System.out.println(\"Beanåˆå§‹åŒ–\"); } @Override public void afterPropertiesSet() throws Exception { System.out.println(\"å±æ€§è®¾ç½®å®Œæˆå\"); } @PreDestroy public void cleanup() { System.out.println(\"Beané”€æ¯å‰\"); } @Override public void destroy() throws Exception { System.out.println(\"Beané”€æ¯\"); } } ä¸‰ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ ä»€ä¹ˆæ˜¯AOPï¼Ÿ AOP (Aspect-Oriented Programming) é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œç”¨äºå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€å®‰å…¨ã€äº‹åŠ¡ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ã€‚\nAOPçš„æ ¸å¿ƒæ¦‚å¿µ åˆ‡é¢(Aspect)ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ– è¿æ¥ç‚¹(Join Point)ï¼šç¨‹åºæ‰§è¡Œçš„æŸä¸ªç‰¹å®šä½ç½® åˆ‡ç‚¹(Pointcut)ï¼šè¿æ¥ç‚¹çš„é›†åˆ é€šçŸ¥(Advice)ï¼šåœ¨åˆ‡ç‚¹æ‰§è¡Œçš„ä»£ç  ç»‡å…¥(Weaving)ï¼šå°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹ AOPå®ç°åŸç† AOPä¸»è¦é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°ï¼š\nJDKåŠ¨æ€ä»£ç†ï¼šåŸºäºæ¥å£çš„ä»£ç† CGLIBä»£ç†ï¼šåŸºäºç±»çš„ä»£ç† AOPå®é™…åº”ç”¨ 1. æ—¥å¿—åˆ‡é¢ @Aspect @Component public class LoggingAspect { @Around(\"@annotation(org.springframework.web.bind.annotation.RequestMapping)\") public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable { long start = System.currentTimeMillis(); Object proceed = joinPoint.proceed(); long executionTime = System.currentTimeMillis() - start; System.out.println(joinPoint.getSignature() + \" executed in \" + executionTime + \" ms\"); return proceed; } } 2. äº‹åŠ¡ç®¡ç† @Service @Transactional public class UserService { @Transactional(rollbackFor = Exception.class) public void transferMoney(Long fromId, Long toId, BigDecimal amount) { // ä¸šåŠ¡é€»è¾‘ï¼Œäº‹åŠ¡ç”±AOPè‡ªåŠ¨ç®¡ç† accountService.debit(fromId, amount); accountService.credit(toId, amount); } } 3. æƒé™æ§åˆ¶ @Aspect @Component public class SecurityAspect { @Before(\"@annotation(RequireRole)\") public void checkPermission(JoinPoint joinPoint) { // æƒé™æ£€æŸ¥é€»è¾‘ RequireRole requireRole = getAnnotation(joinPoint, RequireRole.class); if (!hasRole(requireRole.value())) { throw new SecurityException(\"æƒé™ä¸è¶³\"); } } } AOPçš„ä¼˜åŠ¿ å…³æ³¨ç‚¹åˆ†ç¦»ï¼šä¸šåŠ¡é€»è¾‘ä¸æ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦» ä»£ç å¤ç”¨ï¼šæ¨ªåˆ‡é€»è¾‘å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹å¤ç”¨ æ˜“äºç»´æŠ¤ï¼šä¿®æ”¹æ¨ªåˆ‡é€»è¾‘ä¸å½±å“ä¸šåŠ¡ä»£ç  åŠ¨æ€æ€§ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤åˆ‡é¢ SpringBootè‡ªåŠ¨é…ç½® è‡ªåŠ¨é…ç½®åŸç† SpringBooté€šè¿‡@EnableAutoConfigurationæ³¨è§£å®ç°è‡ªåŠ¨é…ç½®ï¼š\n@SpringBootApplication public class Application { public static void main(String[] args) { SpringApplication.run(Application.class, args); } } @SpringBootApplicationåŒ…å«äº†ï¼š\n@SpringBootConfiguration @EnableAutoConfiguration @ComponentScan æ¡ä»¶æ³¨è§£ SpringBootä½¿ç”¨æ¡ä»¶æ³¨è§£æ¥å†³å®šæ˜¯å¦å¯ç”¨æŸä¸ªé…ç½®ï¼š\n@Configuration @ConditionalOnClass(DataSource.class) @ConditionalOnProperty(name = \"spring.datasource.url\") public class DataSourceAutoConfiguration { @Bean @ConditionalOnMissingBean public DataSource dataSource() { return new HikariDataSource(); } } æœ€ä½³å®è·µ 1. ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ @Service public class UserService { private final UserRepository userRepository; private final EmailService emailService; // æ¨èï¼šæ„é€ å™¨æ³¨å…¥ public UserService(UserRepository userRepository, EmailService emailService) { this.userRepository = userRepository; this.emailService = emailService; } } 2. é…ç½®ç±»çš„ä½¿ç”¨ @Configuration @EnableConfigurationProperties(AppProperties.class) public class AppConfig { @Bean @ConditionalOnMissingBean public RestTemplate restTemplate() { return new RestTemplate(); } } 3. å±æ€§é…ç½® # application.yml app: name: MyApplication version: 1.0.0 features: - feature1 - feature2 spring: datasource: url: jdbc:mysql://localhost:3306/mydb username: ${DB_USERNAME:root} password: ${DB_PASSWORD:password} æ€»ç»“ SpringBooté€šè¿‡IoCã€DIå’ŒAOPä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼Œå®ç°äº†ï¼š\nIoCå®¹å™¨ï¼šç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³» ä¾èµ–æ³¨å…¥ï¼šå®ç°æ¾è€¦åˆçš„å¯¹è±¡å…³ç³» é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼šåˆ†ç¦»æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œæé«˜ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦ è¿™äº›æ¦‚å¿µçš„ç»“åˆä½¿ç”¨ï¼Œè®©SpringBootæˆä¸ºäº†Javaå¼€å‘ä¸­æœ€å—æ¬¢è¿çš„æ¡†æ¶ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚\nç†è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µæ˜¯æŒæ¡SpringBootçš„å…³é”®ï¼Œå»ºè®®é€šè¿‡å®é™…é¡¹ç›®æ¥åŠ æ·±ç†è§£ã€‚\n","wordCount":"479","inLanguage":"en","datePublished":"2024-02-23T02:36:48+08:00","dateModified":"2025-08-06T08:51:21+08:00","author":{"@type":"Person","name":"tyhzxh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tyhzxh.github.io/posts/springboot-fundamentals/"},"publisher":{"@type":"Organization","name":"tyhzxhçš„ä¸ªäººåšå®¢","logo":{"@type":"ImageObject","url":"https://tyhzxh.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tyhzxh.github.io/ accesskey=h title="tyhzxhçš„ä¸ªäººåšå®¢ (Alt + H)">tyhzxhçš„ä¸ªäººåšå®¢</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tyhzxh.github.io/ title=é¦–é¡µ><span>é¦–é¡µ</span></a></li><li><a href=https://tyhzxh.github.io/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://tyhzxh.github.io/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://tyhzxh.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://tyhzxh.github.io/search/ title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li><li><a href=https://tyhzxh.github.io/about/ title=å…³äº><span>å…³äº</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tyhzxh.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://tyhzxh.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">SpringBoot æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h1><div class=post-description>SpringBootæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µè¯¦è§£ï¼ŒåŒ…æ‹¬IoCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰é‡è¦æ¦‚å¿µçš„æ·±å…¥è§£æ</div><div class=post-meta><span title='2024-02-23 02:36:48 +0800 CST'>February 23, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;tyhzxh</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%a1%86%e6%9e%b6%e6%a6%82%e8%bf%b0 aria-label=æ¡†æ¶æ¦‚è¿°>æ¡†æ¶æ¦‚è¿°</a><ul><li><a href=#%e4%b8%bb%e8%a6%81%e4%bc%98%e5%8a%bf aria-label=ä¸»è¦ä¼˜åŠ¿>ä¸»è¦ä¼˜åŠ¿</a></li></ul></li><li><a href=#spring-%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5 aria-label="Spring æ ¸å¿ƒæ¦‚å¿µ">Spring æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href=#%e4%b8%80ioc%e5%ae%b9%e5%99%a8%e6%8e%a7%e5%88%b6%e5%8f%8d%e8%bd%ac aria-label=ä¸€ã€IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰>ä¸€ã€IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰</a><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afioc aria-label=ä»€ä¹ˆæ˜¯IoCï¼Ÿ>ä»€ä¹ˆæ˜¯IoCï¼Ÿ</a></li><li><a href=#%e4%bc%a0%e7%bb%9f%e6%96%b9%e5%bc%8f-vs-ioc%e6%96%b9%e5%bc%8f aria-label="ä¼ ç»Ÿæ–¹å¼ vs IoCæ–¹å¼">ä¼ ç»Ÿæ–¹å¼ vs IoCæ–¹å¼</a></li><li><a href=#ioc%e7%9a%84%e4%bc%98%e5%8a%bf aria-label=IoCçš„ä¼˜åŠ¿>IoCçš„ä¼˜åŠ¿</a></li></ul></li><li><a href=#%e4%ba%8c%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5di aria-label=äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰>äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</a><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%af%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5 aria-label=ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</a></li><li><a href=#%e4%b8%89%e7%a7%8d%e6%b3%a8%e5%85%a5%e6%96%b9%e5%bc%8f aria-label=ä¸‰ç§æ³¨å…¥æ–¹å¼>ä¸‰ç§æ³¨å…¥æ–¹å¼</a><ul><li><a href=#1-%e5%ad%97%e6%ae%b5%e6%b3%a8%e5%85%a5field-injection aria-label="1. å­—æ®µæ³¨å…¥ï¼ˆField Injectionï¼‰">1. å­—æ®µæ³¨å…¥ï¼ˆField Injectionï¼‰</a></li><li><a href=#2-%e6%9e%84%e9%80%a0%e5%99%a8%e6%b3%a8%e5%85%a5constructor-injection-%e6%8e%a8%e8%8d%90 aria-label="2. æ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰â­ æ¨è">2. æ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰â­ æ¨è</a></li><li><a href=#3-setter%e6%b3%a8%e5%85%a5setter-injection aria-label="3. Setteræ³¨å…¥ï¼ˆSetter Injectionï¼‰">3. Setteræ³¨å…¥ï¼ˆSetter Injectionï¼‰</a></li></ul></li><li><a href=#bean%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f aria-label=Beançš„ç”Ÿå‘½å‘¨æœŸ>Beançš„ç”Ÿå‘½å‘¨æœŸ</a></li></ul></li><li><a href=#%e4%b8%89aop%e9%9d%a2%e5%90%91%e5%88%87%e9%9d%a2%e7%bc%96%e7%a8%8b aria-label=ä¸‰ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰>ä¸‰ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</a><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afaop aria-label=ä»€ä¹ˆæ˜¯AOPï¼Ÿ>ä»€ä¹ˆæ˜¯AOPï¼Ÿ</a></li><li><a href=#aop%e7%9a%84%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5 aria-label=AOPçš„æ ¸å¿ƒæ¦‚å¿µ>AOPçš„æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href=#aop%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86 aria-label=AOPå®ç°åŸç†>AOPå®ç°åŸç†</a></li><li><a href=#aop%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8 aria-label=AOPå®é™…åº”ç”¨>AOPå®é™…åº”ç”¨</a><ul><li><a href=#1-%e6%97%a5%e5%bf%97%e5%88%87%e9%9d%a2 aria-label="1. æ—¥å¿—åˆ‡é¢">1. æ—¥å¿—åˆ‡é¢</a></li><li><a href=#2-%e4%ba%8b%e5%8a%a1%e7%ae%a1%e7%90%86 aria-label="2. äº‹åŠ¡ç®¡ç†">2. äº‹åŠ¡ç®¡ç†</a></li><li><a href=#3-%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6 aria-label="3. æƒé™æ§åˆ¶">3. æƒé™æ§åˆ¶</a></li></ul></li><li><a href=#aop%e7%9a%84%e4%bc%98%e5%8a%bf aria-label=AOPçš„ä¼˜åŠ¿>AOPçš„ä¼˜åŠ¿</a></li></ul></li><li><a href=#springboot%e8%87%aa%e5%8a%a8%e9%85%8d%e7%bd%ae aria-label=SpringBootè‡ªåŠ¨é…ç½®>SpringBootè‡ªåŠ¨é…ç½®</a><ul><li><a href=#%e8%87%aa%e5%8a%a8%e9%85%8d%e7%bd%ae%e5%8e%9f%e7%90%86 aria-label=è‡ªåŠ¨é…ç½®åŸç†>è‡ªåŠ¨é…ç½®åŸç†</a></li><li><a href=#%e6%9d%a1%e4%bb%b6%e6%b3%a8%e8%a7%a3 aria-label=æ¡ä»¶æ³¨è§£>æ¡ä»¶æ³¨è§£</a></li></ul></li><li><a href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label=æœ€ä½³å®è·µ>æœ€ä½³å®è·µ</a><ul><li><a href=#1-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="1. ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ">1. ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ</a></li><li><a href=#2-%e9%85%8d%e7%bd%ae%e7%b1%bb%e7%9a%84%e4%bd%bf%e7%94%a8 aria-label="2. é…ç½®ç±»çš„ä½¿ç”¨">2. é…ç½®ç±»çš„ä½¿ç”¨</a></li><li><a href=#3-%e5%b1%9e%e6%80%a7%e9%85%8d%e7%bd%ae aria-label="3. å±æ€§é…ç½®">3. å±æ€§é…ç½®</a></li></ul></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=æ€»ç»“>æ€»ç»“</a></li></ul></div></details></div><div class=post-content><blockquote><p>SpringBootæ˜¯Javaæœ€æµè¡Œçš„å¼€å‘æ¡†æ¶ï¼Œå®ƒé€šè¿‡è§£è€¦ä»£ç æ¥æå‡å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSpringBootçš„æ ¸å¿ƒæ¦‚å¿µã€‚</p></blockquote><h2 id=æ¡†æ¶æ¦‚è¿°>æ¡†æ¶æ¦‚è¿°<a hidden class=anchor aria-hidden=true href=#æ¡†æ¶æ¦‚è¿°>#</a></h2><p><strong>SpringBoot</strong> æ˜¯åŸºäºSpringæ¡†æ¶çš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶ï¼Œå®ƒç®€åŒ–äº†Springåº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºç”Ÿäº§çº§åˆ«çš„åº”ç”¨ç¨‹åºã€‚</p><h3 id=ä¸»è¦ä¼˜åŠ¿>ä¸»è¦ä¼˜åŠ¿<a hidden class=anchor aria-hidden=true href=#ä¸»è¦ä¼˜åŠ¿>#</a></h3><ul><li>ğŸš€ <strong>å¿«é€Ÿå¯åŠ¨</strong>ï¼šæä¾›å¼€ç®±å³ç”¨çš„é…ç½®</li><li>ğŸ”§ <strong>è‡ªåŠ¨é…ç½®</strong>ï¼šæ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨</li><li>ğŸ“¦ <strong>å†…åµŒæœåŠ¡å™¨</strong>ï¼šæ— éœ€å¤–éƒ¨å®¹å™¨å³å¯è¿è¡Œ</li><li>ğŸ¯ <strong>ç®€åŒ–é…ç½®</strong>ï¼šçº¦å®šä¼˜äºé…ç½®çš„ç†å¿µ</li></ul><h2 id=spring-æ ¸å¿ƒæ¦‚å¿µ>Spring æ ¸å¿ƒæ¦‚å¿µ<a hidden class=anchor aria-hidden=true href=#spring-æ ¸å¿ƒæ¦‚å¿µ>#</a></h2><p>Springæ¡†æ¶æœ‰ä¸‰ä¸ªæœ€å…³é”®çš„æ ¸å¿ƒæ¦‚å¿µï¼š<strong>IoCå®¹å™¨</strong>ã€<strong>ä¾èµ–æ³¨å…¥(DI)</strong>ã€<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)</strong>ã€‚</p><h2 id=ä¸€iocå®¹å™¨æ§åˆ¶åè½¬>ä¸€ã€IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰<a hidden class=anchor aria-hidden=true href=#ä¸€iocå®¹å™¨æ§åˆ¶åè½¬>#</a></h2><h3 id=ä»€ä¹ˆæ˜¯ioc>ä»€ä¹ˆæ˜¯IoCï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä»€ä¹ˆæ˜¯ioc>#</a></h3><p><strong>IoC (Inversion of Control)</strong> æ§åˆ¶åè½¬ï¼Œæ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ã€‚ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ç”±ç¨‹åºä»£ç ç›´æ¥æ§åˆ¶ï¼Œè€ŒIoCå°†è¿™ç§æ§åˆ¶æƒäº¤ç»™äº†æ¡†æ¶ã€‚</p><h3 id=ä¼ ç»Ÿæ–¹å¼-vs-iocæ–¹å¼>ä¼ ç»Ÿæ–¹å¼ vs IoCæ–¹å¼<a hidden class=anchor aria-hidden=true href=#ä¼ ç»Ÿæ–¹å¼-vs-iocæ–¹å¼>#</a></h3><p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserDao</span><span class=p>();</span><span class=w> </span><span class=c1>// æ‰‹åŠ¨åˆ›å»ºä¾èµ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>saveUser</span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>userDao</span><span class=p>.</span><span class=na>save</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>IoCæ–¹å¼</strong>ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w> </span><span class=c1>// æ¡†æ¶è‡ªåŠ¨æ³¨å…¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>saveUser</span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>userDao</span><span class=p>.</span><span class=na>save</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=iocçš„ä¼˜åŠ¿>IoCçš„ä¼˜åŠ¿<a hidden class=anchor aria-hidden=true href=#iocçš„ä¼˜åŠ¿>#</a></h3><ol><li><strong>é™ä½è€¦åˆåº¦</strong>ï¼šå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±æ¡†æ¶ç®¡ç†</li><li><strong>æé«˜å¯æµ‹è¯•æ€§</strong>ï¼šä¾¿äºè¿›è¡Œå•å…ƒæµ‹è¯•å’ŒMock</li><li><strong>å¢å¼ºå¯ç»´æŠ¤æ€§</strong>ï¼šä¿®æ”¹ä¾èµ–å…³ç³»æ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç </li><li><strong>æ”¯æŒé…ç½®åŒ–</strong>ï¼šå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†å¯¹è±¡å…³ç³»</li></ol><h2 id=äºŒä¾èµ–æ³¨å…¥di>äºŒã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰<a hidden class=anchor aria-hidden=true href=#äºŒä¾èµ–æ³¨å…¥di>#</a></h2><h3 id=ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥>#</a></h3><p><strong>DI (Dependency Injection)</strong> ä¾èµ–æ³¨å…¥ï¼Œæ˜¯IoCå®¹å™¨çš„å…·ä½“å®ç°æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆã€‚</p><h3 id=ä¸‰ç§æ³¨å…¥æ–¹å¼>ä¸‰ç§æ³¨å…¥æ–¹å¼<a hidden class=anchor aria-hidden=true href=#ä¸‰ç§æ³¨å…¥æ–¹å¼>#</a></h3><h4 id=1-å­—æ®µæ³¨å…¥field-injection>1. å­—æ®µæ³¨å…¥ï¼ˆField Injectionï¼‰<a hidden class=anchor aria-hidden=true href=#1-å­—æ®µæ³¨å…¥field-injection>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä»£ç ç®€æ´</li><li>âŒ éš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•</li><li>âŒ è¿åäº†å°è£…åŸåˆ™</li></ul><h4 id=2-æ„é€ å™¨æ³¨å…¥constructor-injection-æ¨è>2. æ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰â­ æ¨è<a hidden class=anchor aria-hidden=true href=#2-æ„é€ å™¨æ³¨å…¥constructor-injection-æ¨è>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>UserService</span><span class=p>(</span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>,</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>userDao</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>emailService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… ä¿è¯ä¾èµ–ä¸å¯å˜ï¼ˆfinalï¼‰</li><li>âœ… ä¾¿äºå•å…ƒæµ‹è¯•</li><li>âœ… åœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±ç¡®ä¿ä¾èµ–å®Œæ•´</li><li>âœ… ç¬¦åˆé¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</li></ul><h4 id=3-setteræ³¨å…¥setter-injection>3. Setteræ³¨å…¥ï¼ˆSetter Injectionï¼‰<a hidden class=anchor aria-hidden=true href=#3-setteræ³¨å…¥setter-injection>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setUserDao</span><span class=p>(</span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>userDao</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setEmailService</span><span class=p>(</span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>emailService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… æ”¯æŒå¯é€‰ä¾èµ–</li><li>âœ… æ”¯æŒé‡æ–°é…ç½®</li><li>âŒ ä¾èµ–å¯èƒ½ä¸ºnull</li></ul><h3 id=beançš„ç”Ÿå‘½å‘¨æœŸ>Beançš„ç”Ÿå‘½å‘¨æœŸ<a hidden class=anchor aria-hidden=true href=#beançš„ç”Ÿå‘½å‘¨æœŸ>#</a></h3><p>Springå®¹å™¨ä¸­Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MyBean</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>InitializingBean</span><span class=p>,</span><span class=w> </span><span class=n>DisposableBean</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostConstruct</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>init</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Beanåˆå§‹åŒ–&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>afterPropertiesSet</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;å±æ€§è®¾ç½®å®Œæˆå&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PreDestroy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>cleanup</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Beané”€æ¯å‰&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>destroy</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Beané”€æ¯&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=ä¸‰aopé¢å‘åˆ‡é¢ç¼–ç¨‹>ä¸‰ã€AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰<a hidden class=anchor aria-hidden=true href=#ä¸‰aopé¢å‘åˆ‡é¢ç¼–ç¨‹>#</a></h2><h3 id=ä»€ä¹ˆæ˜¯aop>ä»€ä¹ˆæ˜¯AOPï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä»€ä¹ˆæ˜¯aop>#</a></h3><p><strong>AOP (Aspect-Oriented Programming)</strong> é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œç”¨äºå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€å®‰å…¨ã€äº‹åŠ¡ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p><h3 id=aopçš„æ ¸å¿ƒæ¦‚å¿µ>AOPçš„æ ¸å¿ƒæ¦‚å¿µ<a hidden class=anchor aria-hidden=true href=#aopçš„æ ¸å¿ƒæ¦‚å¿µ>#</a></h3><ul><li><strong>åˆ‡é¢(Aspect)</strong>ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–</li><li><strong>è¿æ¥ç‚¹(Join Point)</strong>ï¼šç¨‹åºæ‰§è¡Œçš„æŸä¸ªç‰¹å®šä½ç½®</li><li><strong>åˆ‡ç‚¹(Pointcut)</strong>ï¼šè¿æ¥ç‚¹çš„é›†åˆ</li><li><strong>é€šçŸ¥(Advice)</strong>ï¼šåœ¨åˆ‡ç‚¹æ‰§è¡Œçš„ä»£ç </li><li><strong>ç»‡å…¥(Weaving)</strong>ï¼šå°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹</li></ul><h3 id=aopå®ç°åŸç†>AOPå®ç°åŸç†<a hidden class=anchor aria-hidden=true href=#aopå®ç°åŸç†>#</a></h3><p>AOPä¸»è¦é€šè¿‡<strong>åŠ¨æ€ä»£ç†</strong>æ¥å®ç°ï¼š</p><ol><li><strong>JDKåŠ¨æ€ä»£ç†</strong>ï¼šåŸºäºæ¥å£çš„ä»£ç†</li><li><strong>CGLIBä»£ç†</strong>ï¼šåŸºäºç±»çš„ä»£ç†</li></ol><h3 id=aopå®é™…åº”ç”¨>AOPå®é™…åº”ç”¨<a hidden class=anchor aria-hidden=true href=#aopå®é™…åº”ç”¨>#</a></h3><h4 id=1-æ—¥å¿—åˆ‡é¢>1. æ—¥å¿—åˆ‡é¢<a hidden class=anchor aria-hidden=true href=#1-æ—¥å¿—åˆ‡é¢>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Aspect</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LoggingAspect</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Around</span><span class=p>(</span><span class=s>&#34;@annotation(org.springframework.web.bind.annotation.RequestMapping)&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=nf>logExecutionTime</span><span class=p>(</span><span class=n>ProceedingJoinPoint</span><span class=w> </span><span class=n>joinPoint</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Throwable</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=n>start</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>System</span><span class=p>.</span><span class=na>currentTimeMillis</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Object</span><span class=w> </span><span class=n>proceed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>joinPoint</span><span class=p>.</span><span class=na>proceed</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=n>executionTime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>System</span><span class=p>.</span><span class=na>currentTimeMillis</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>start</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>joinPoint</span><span class=p>.</span><span class=na>getSignature</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; executed in &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>executionTime</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; ms&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>proceed</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=2-äº‹åŠ¡ç®¡ç†>2. äº‹åŠ¡ç®¡ç†<a hidden class=anchor aria-hidden=true href=#2-äº‹åŠ¡ç®¡ç†>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Transactional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Transactional</span><span class=p>(</span><span class=n>rollbackFor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Exception</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>transferMoney</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>fromId</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>toId</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ä¸šåŠ¡é€»è¾‘ï¼Œäº‹åŠ¡ç”±AOPè‡ªåŠ¨ç®¡ç†</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>accountService</span><span class=p>.</span><span class=na>debit</span><span class=p>(</span><span class=n>fromId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>accountService</span><span class=p>.</span><span class=na>credit</span><span class=p>(</span><span class=n>toId</span><span class=p>,</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=3-æƒé™æ§åˆ¶>3. æƒé™æ§åˆ¶<a hidden class=anchor aria-hidden=true href=#3-æƒé™æ§åˆ¶>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Aspect</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SecurityAspect</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Before</span><span class=p>(</span><span class=s>&#34;@annotation(RequireRole)&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>checkPermission</span><span class=p>(</span><span class=n>JoinPoint</span><span class=w> </span><span class=n>joinPoint</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æƒé™æ£€æŸ¥é€»è¾‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RequireRole</span><span class=w> </span><span class=n>requireRole</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getAnnotation</span><span class=p>(</span><span class=n>joinPoint</span><span class=p>,</span><span class=w> </span><span class=n>RequireRole</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>hasRole</span><span class=p>(</span><span class=n>requireRole</span><span class=p>.</span><span class=na>value</span><span class=p>()))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SecurityException</span><span class=p>(</span><span class=s>&#34;æƒé™ä¸è¶³&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=aopçš„ä¼˜åŠ¿>AOPçš„ä¼˜åŠ¿<a hidden class=anchor aria-hidden=true href=#aopçš„ä¼˜åŠ¿>#</a></h3><ol><li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šä¸šåŠ¡é€»è¾‘ä¸æ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»</li><li><strong>ä»£ç å¤ç”¨</strong>ï¼šæ¨ªåˆ‡é€»è¾‘å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹å¤ç”¨</li><li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šä¿®æ”¹æ¨ªåˆ‡é€»è¾‘ä¸å½±å“ä¸šåŠ¡ä»£ç </li><li><strong>åŠ¨æ€æ€§</strong>ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤åˆ‡é¢</li></ol><h2 id=springbootè‡ªåŠ¨é…ç½®>SpringBootè‡ªåŠ¨é…ç½®<a hidden class=anchor aria-hidden=true href=#springbootè‡ªåŠ¨é…ç½®>#</a></h2><h3 id=è‡ªåŠ¨é…ç½®åŸç†>è‡ªåŠ¨é…ç½®åŸç†<a hidden class=anchor aria-hidden=true href=#è‡ªåŠ¨é…ç½®åŸç†>#</a></h3><p>SpringBooté€šè¿‡<code>@EnableAutoConfiguration</code>æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@SpringBootApplication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Application</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SpringApplication</span><span class=p>.</span><span class=na>run</span><span class=p>(</span><span class=n>Application</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><code>@SpringBootApplication</code>åŒ…å«äº†ï¼š</p><ul><li><code>@SpringBootConfiguration</code></li><li><code>@EnableAutoConfiguration</code></li><li><code>@ComponentScan</code></li></ul><h3 id=æ¡ä»¶æ³¨è§£>æ¡ä»¶æ³¨è§£<a hidden class=anchor aria-hidden=true href=#æ¡ä»¶æ³¨è§£>#</a></h3><p>SpringBootä½¿ç”¨æ¡ä»¶æ³¨è§£æ¥å†³å®šæ˜¯å¦å¯ç”¨æŸä¸ªé…ç½®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ConditionalOnClass</span><span class=p>(</span><span class=n>DataSource</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ConditionalOnProperty</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;spring.datasource.url&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DataSourceAutoConfiguration</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ConditionalOnMissingBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>DataSource</span><span class=w> </span><span class=nf>dataSource</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HikariDataSource</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=æœ€ä½³å®è·µ>æœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#æœ€ä½³å®è·µ>#</a></h2><h3 id=1-ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ>1. ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#1-ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>UserRepository</span><span class=w> </span><span class=n>userRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ¨èï¼šæ„é€ å™¨æ³¨å…¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>UserService</span><span class=p>(</span><span class=n>UserRepository</span><span class=w> </span><span class=n>userRepository</span><span class=p>,</span><span class=w> </span><span class=n>EmailService</span><span class=w> </span><span class=n>emailService</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>userRepository</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>emailService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>emailService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=2-é…ç½®ç±»çš„ä½¿ç”¨>2. é…ç½®ç±»çš„ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#2-é…ç½®ç±»çš„ä½¿ç”¨>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableConfigurationProperties</span><span class=p>(</span><span class=n>AppProperties</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AppConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ConditionalOnMissingBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>RestTemplate</span><span class=w> </span><span class=nf>restTemplate</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RestTemplate</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=3-å±æ€§é…ç½®>3. å±æ€§é…ç½®<a hidden class=anchor aria-hidden=true href=#3-å±æ€§é…ç½®>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># application.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>MyApplication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>features</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>feature1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>feature2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>datasource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>jdbc:mysql://localhost:3306/mydb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>${DB_USERNAME:root}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${DB_PASSWORD:password}</span><span class=w>
</span></span></span></code></pre></div><h2 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h2><p>SpringBooté€šè¿‡IoCã€DIå’ŒAOPä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼Œå®ç°äº†ï¼š</p><ol><li><strong>IoCå®¹å™¨</strong>ï¼šç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå®ç°æ¾è€¦åˆçš„å¯¹è±¡å…³ç³»</li><li><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼šåˆ†ç¦»æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œæé«˜ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦</li></ol><p>è¿™äº›æ¦‚å¿µçš„ç»“åˆä½¿ç”¨ï¼Œè®©SpringBootæˆä¸ºäº†Javaå¼€å‘ä¸­æœ€å—æ¬¢è¿çš„æ¡†æ¶ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p><hr><p><em>ç†è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µæ˜¯æŒæ¡SpringBootçš„å…³é”®ï¼Œå»ºè®®é€šè¿‡å®é™…é¡¹ç›®æ¥åŠ æ·±ç†è§£ã€‚</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://tyhzxh.github.io/tags/springboot/>SpringBoot</a></li><li><a href=https://tyhzxh.github.io/tags/java/>Java</a></li><li><a href=https://tyhzxh.github.io/tags/%E6%A1%86%E6%9E%B6/>æ¡†æ¶</a></li><li><a href=https://tyhzxh.github.io/tags/ioc/>IoC</a></li><li><a href=https://tyhzxh.github.io/tags/aop/>AOP</a></li><li><a href=https://tyhzxh.github.io/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/>ä¾èµ–æ³¨å…¥</a></li></ul><nav class=paginav><a class=prev href=https://tyhzxh.github.io/posts/prefix-sum-algorithm/><span class=title>Â« Prev</span><br><span>å‰ç¼€å’Œç®—æ³•è¯¦è§£ä¸åº”ç”¨</span>
</a><a class=next href=https://tyhzxh.github.io/posts/git-notes/><span class=title>Next Â»</span><br><span>Git ç‰ˆæœ¬æ§åˆ¶å­¦ä¹ ç¬”è®°</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://tyhzxh.github.io/>tyhzxhçš„ä¸ªäººåšå®¢</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>